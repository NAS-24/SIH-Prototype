function mw(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function gw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sg={exports:{}},pl={},Cg={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=Symbol.for("react.element"),yw=Symbol.for("react.portal"),vw=Symbol.for("react.fragment"),_w=Symbol.for("react.strict_mode"),ww=Symbol.for("react.profiler"),Ew=Symbol.for("react.provider"),xw=Symbol.for("react.context"),Tw=Symbol.for("react.forward_ref"),Iw=Symbol.for("react.suspense"),Sw=Symbol.for("react.memo"),Cw=Symbol.for("react.lazy"),Gf=Symbol.iterator;function Aw(t){return t===null||typeof t!="object"?null:(t=Gf&&t[Gf]||t["@@iterator"],typeof t=="function"?t:null)}var Ag={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rg=Object.assign,Pg={};function Ds(t,e,n){this.props=t,this.context=e,this.refs=Pg,this.updater=n||Ag}Ds.prototype.isReactComponent={};Ds.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ds.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ng(){}Ng.prototype=Ds.prototype;function _h(t,e,n){this.props=t,this.context=e,this.refs=Pg,this.updater=n||Ag}var wh=_h.prototype=new Ng;wh.constructor=_h;Rg(wh,Ds.prototype);wh.isPureReactComponent=!0;var Kf=Array.isArray,kg=Object.prototype.hasOwnProperty,Eh={current:null},Vg={key:!0,ref:!0,__self:!0,__source:!0};function Dg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)kg.call(e,r)&&!Vg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:fo,type:t,key:i,ref:o,props:s,_owner:Eh.current}}function Rw(t,e){return{$$typeof:fo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xh(t){return typeof t=="object"&&t!==null&&t.$$typeof===fo}function Pw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xf=/\/+/g;function pu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Pw(""+t.key):e.toString(36)}function ca(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fo:case yw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pu(o,0):r,Kf(s)?(n="",t!=null&&(n=t.replace(Xf,"$&/")+"/"),ca(s,e,n,"",function(h){return h})):s!=null&&(xh(s)&&(s=Rw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Xf,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Kf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+pu(i,l);o+=ca(i,e,n,u,s)}else if(u=Aw(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+pu(i,l++),o+=ca(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uo(t,e,n){if(t==null)return t;var r=[],s=0;return ca(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Nw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ct={current:null},ha={transition:null},kw={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:ha,ReactCurrentOwner:Eh};function bg(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Uo,forEach:function(t,e,n){Uo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uo(t,function(){e++}),e},toArray:function(t){return Uo(t,function(e){return e})||[]},only:function(t){if(!xh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Ds;ee.Fragment=vw;ee.Profiler=ww;ee.PureComponent=_h;ee.StrictMode=_w;ee.Suspense=Iw;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kw;ee.act=bg;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Eh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)kg.call(e,u)&&!Vg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:fo,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:xw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ew,_context:t},t.Consumer=t};ee.createElement=Dg;ee.createFactory=function(t){var e=Dg.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:Tw,render:t}};ee.isValidElement=xh;ee.lazy=function(t){return{$$typeof:Cw,_payload:{_status:-1,_result:t},_init:Nw}};ee.memo=function(t,e){return{$$typeof:Sw,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=ha.transition;ha.transition={};try{t()}finally{ha.transition=e}};ee.unstable_act=bg;ee.useCallback=function(t,e){return ct.current.useCallback(t,e)};ee.useContext=function(t){return ct.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return ct.current.useDeferredValue(t)};ee.useEffect=function(t,e){return ct.current.useEffect(t,e)};ee.useId=function(){return ct.current.useId()};ee.useImperativeHandle=function(t,e,n){return ct.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return ct.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return ct.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return ct.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return ct.current.useReducer(t,e,n)};ee.useRef=function(t){return ct.current.useRef(t)};ee.useState=function(t){return ct.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return ct.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return ct.current.useTransition()};ee.version="18.3.1";Cg.exports=ee;var M=Cg.exports;const Mg=gw(M),Vw=mw({__proto__:null,default:Mg},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw=M,bw=Symbol.for("react.element"),Mw=Symbol.for("react.fragment"),jw=Object.prototype.hasOwnProperty,Lw=Dw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ow={key:!0,ref:!0,__self:!0,__source:!0};function jg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jw.call(e,r)&&!Ow.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:bw,type:t,key:i,ref:o,props:s,_owner:Lw.current}}pl.Fragment=Mw;pl.jsx=jg;pl.jsxs=jg;Sg.exports=pl;var p=Sg.exports,Zu={},Lg={exports:{}},At={},Og={exports:{}},Fg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,X){var G=B.length;B.push(X);e:for(;0<G;){var ce=G-1>>>1,ve=B[ce];if(0<s(ve,X))B[ce]=X,B[G]=ve,G=ce;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var X=B[0],G=B.pop();if(G!==X){B[0]=G;e:for(var ce=0,ve=B.length,ln=ve>>>1;ce<ln;){var dt=2*(ce+1)-1,un=B[dt],it=dt+1,qt=B[it];if(0>s(un,G))it<ve&&0>s(qt,un)?(B[ce]=qt,B[it]=G,ce=it):(B[ce]=un,B[dt]=G,ce=dt);else if(it<ve&&0>s(qt,G))B[ce]=qt,B[it]=G,ce=it;else break e}}return X}function s(B,X){var G=B.sortIndex-X.sortIndex;return G!==0?G:B.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,m=null,g=3,C=!1,R=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(B){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=B)r(h),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(h)}}function N(B){if(P=!1,T(B),!R)if(n(u)!==null)R=!0,dr(O);else{var X=n(h);X!==null&&Tn(N,X.startTime-B)}}function O(B,X){R=!1,P&&(P=!1,_(v),v=-1),C=!0;var G=g;try{for(T(X),m=n(u);m!==null&&(!(m.expirationTime>X)||B&&!A());){var ce=m.callback;if(typeof ce=="function"){m.callback=null,g=m.priorityLevel;var ve=ce(m.expirationTime<=X);X=t.unstable_now(),typeof ve=="function"?m.callback=ve:m===n(u)&&r(u),T(X)}else r(u);m=n(u)}if(m!==null)var ln=!0;else{var dt=n(h);dt!==null&&Tn(N,dt.startTime-X),ln=!1}return ln}finally{m=null,g=G,C=!1}}var z=!1,E=null,v=-1,x=5,S=-1;function A(){return!(t.unstable_now()-S<x)}function k(){if(E!==null){var B=t.unstable_now();S=B;var X=!0;try{X=E(!0,B)}finally{X?I():(z=!1,E=null)}}else z=!1}var I;if(typeof w=="function")I=function(){w(k)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,jt=Ie.port2;Ie.port1.onmessage=k,I=function(){jt.postMessage(null)}}else I=function(){D(k,0)};function dr(B){E=B,z||(z=!0,I())}function Tn(B,X){v=D(function(){B(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){R||C||(R=!0,dr(O))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var G=g;g=X;try{return B()}finally{g=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=g;g=B;try{return X()}finally{g=G}},t.unstable_scheduleCallback=function(B,X,G){var ce=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ce+G:ce):G=ce,B){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=G+ve,B={id:f++,callback:X,priorityLevel:B,startTime:G,expirationTime:ve,sortIndex:-1},G>ce?(B.sortIndex=G,e(h,B),n(u)===null&&B===n(h)&&(P?(_(v),v=-1):P=!0,Tn(N,G-ce))):(B.sortIndex=ve,e(u,B),R||C||(R=!0,dr(O))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var X=g;return function(){var G=g;g=X;try{return B.apply(this,arguments)}finally{g=G}}}})(Fg);Og.exports=Fg;var Fw=Og.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw=M,Ct=Fw;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zg=new Set,Li={};function Lr(t,e){ws(t,e),ws(t+"Capture",e)}function ws(t,e){for(Li[t]=e,t=0;t<e.length;t++)zg.add(e[t])}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ec=Object.prototype.hasOwnProperty,Uw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yf={},Jf={};function Bw(t){return ec.call(Jf,t)?!0:ec.call(Yf,t)?!1:Uw.test(t)?Jf[t]=!0:(Yf[t]=!0,!1)}function $w(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Hw(t,e,n,r){if(e===null||typeof e>"u"||$w(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ht(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ge[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ge[e]=new ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ge[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ge[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ge[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ge[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ge[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ge[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ge[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Th=/[\-:]([a-z])/g;function Ih(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Th,Ih);Ge[e]=new ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Th,Ih);Ge[e]=new ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Th,Ih);Ge[e]=new ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ge[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ge[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sh(t,e,n,r){var s=Ge.hasOwnProperty(e)?Ge[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hw(e,n,s,r)&&(n=null),r||s===null?Bw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xn=zw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bo=Symbol.for("react.element"),Zr=Symbol.for("react.portal"),es=Symbol.for("react.fragment"),Ch=Symbol.for("react.strict_mode"),tc=Symbol.for("react.profiler"),Ug=Symbol.for("react.provider"),Bg=Symbol.for("react.context"),Ah=Symbol.for("react.forward_ref"),nc=Symbol.for("react.suspense"),rc=Symbol.for("react.suspense_list"),Rh=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),$g=Symbol.for("react.offscreen"),Zf=Symbol.iterator;function ai(t){return t===null||typeof t!="object"?null:(t=Zf&&t[Zf]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,mu;function mi(t){if(mu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mu=e&&e[1]||""}return`
`+mu+t}var gu=!1;function yu(t,e){if(!t||gu)return"";gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{gu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mi(t):""}function qw(t){switch(t.tag){case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 2:case 15:return t=yu(t.type,!1),t;case 11:return t=yu(t.type.render,!1),t;case 1:return t=yu(t.type,!0),t;default:return""}}function sc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case es:return"Fragment";case Zr:return"Portal";case tc:return"Profiler";case Ch:return"StrictMode";case nc:return"Suspense";case rc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bg:return(t.displayName||"Context")+".Consumer";case Ug:return(t._context.displayName||"Context")+".Provider";case Ah:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rh:return e=t.displayName||null,e!==null?e:sc(t.type)||"Memo";case Vn:e=t._payload,t=t._init;try{return sc(t(e))}catch{}}return null}function Ww(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sc(e);case 8:return e===Ch?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qw(t){var e=Hg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $o(t){t._valueTracker||(t._valueTracker=Qw(t))}function qg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Hg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ra(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ic(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ep(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wg(t,e){e=e.checked,e!=null&&Sh(t,"checked",e,!1)}function oc(t,e){Wg(t,e);var n=Zn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ac(t,e.type,n):e.hasOwnProperty("defaultValue")&&ac(t,e.type,Zn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ac(t,e,n){(e!=="number"||Ra(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gi=Array.isArray;function hs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function lc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function np(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(gi(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zn(n)}}function Qg(t,e){var n=Zn(e.value),r=Zn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ho,Kg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ho=Ho||document.createElement("div"),Ho.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ho.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gw=["Webkit","ms","Moz","O"];Object.keys(Ti).forEach(function(t){Gw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ti[e]=Ti[t]})});function Xg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ti.hasOwnProperty(t)&&Ti[t]?(""+e).trim():e+"px"}function Yg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Xg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Kw=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cc(t,e){if(e){if(Kw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function hc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=null;function Ph(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fc=null,ds=null,fs=null;function sp(t){if(t=go(t)){if(typeof fc!="function")throw Error(F(280));var e=t.stateNode;e&&(e=_l(e),fc(t.stateNode,t.type,e))}}function Jg(t){ds?fs?fs.push(t):fs=[t]:ds=t}function Zg(){if(ds){var t=ds,e=fs;if(fs=ds=null,sp(t),e)for(t=0;t<e.length;t++)sp(e[t])}}function ey(t,e){return t(e)}function ty(){}var vu=!1;function ny(t,e,n){if(vu)return t(e,n);vu=!0;try{return ey(t,e,n)}finally{vu=!1,(ds!==null||fs!==null)&&(ty(),Zg())}}function Fi(t,e){var n=t.stateNode;if(n===null)return null;var r=_l(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var pc=!1;if(mn)try{var li={};Object.defineProperty(li,"passive",{get:function(){pc=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{pc=!1}function Xw(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Ii=!1,Pa=null,Na=!1,mc=null,Yw={onError:function(t){Ii=!0,Pa=t}};function Jw(t,e,n,r,s,i,o,l,u){Ii=!1,Pa=null,Xw.apply(Yw,arguments)}function Zw(t,e,n,r,s,i,o,l,u){if(Jw.apply(this,arguments),Ii){if(Ii){var h=Pa;Ii=!1,Pa=null}else throw Error(F(198));Na||(Na=!0,mc=h)}}function Or(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ry(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ip(t){if(Or(t)!==t)throw Error(F(188))}function e1(t){var e=t.alternate;if(!e){if(e=Or(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ip(s),t;if(i===r)return ip(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function sy(t){return t=e1(t),t!==null?iy(t):null}function iy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iy(t);if(e!==null)return e;t=t.sibling}return null}var oy=Ct.unstable_scheduleCallback,op=Ct.unstable_cancelCallback,t1=Ct.unstable_shouldYield,n1=Ct.unstable_requestPaint,Re=Ct.unstable_now,r1=Ct.unstable_getCurrentPriorityLevel,Nh=Ct.unstable_ImmediatePriority,ay=Ct.unstable_UserBlockingPriority,ka=Ct.unstable_NormalPriority,s1=Ct.unstable_LowPriority,ly=Ct.unstable_IdlePriority,ml=null,Jt=null;function i1(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(ml,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:l1,o1=Math.log,a1=Math.LN2;function l1(t){return t>>>=0,t===0?32:31-(o1(t)/a1|0)|0}var qo=64,Wo=4194304;function yi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Va(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=yi(l):(i&=o,i!==0&&(r=yi(i)))}else o=n&~s,o!==0?r=yi(o):i!==0&&(r=yi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),s=1<<n,r|=t[n],e&=~s;return r}function u1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ut(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=u1(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function gc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uy(){var t=qo;return qo<<=1,!(qo&4194240)&&(qo=64),t}function _u(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function po(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function h1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ut(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function kh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function cy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hy,Vh,dy,fy,py,yc=!1,Qo=[],zn=null,Un=null,Bn=null,zi=new Map,Ui=new Map,bn=[],d1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ap(t,e){switch(t){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":zi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ui.delete(e.pointerId)}}function ui(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=go(e),e!==null&&Vh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function f1(t,e,n,r,s){switch(e){case"focusin":return zn=ui(zn,t,e,n,r,s),!0;case"dragenter":return Un=ui(Un,t,e,n,r,s),!0;case"mouseover":return Bn=ui(Bn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return zi.set(i,ui(zi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ui.set(i,ui(Ui.get(i)||null,t,e,n,r,s)),!0}return!1}function my(t){var e=Er(t.target);if(e!==null){var n=Or(e);if(n!==null){if(e=n.tag,e===13){if(e=ry(n),e!==null){t.blockedOn=e,py(t.priority,function(){dy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function da(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dc=r,n.target.dispatchEvent(r),dc=null}else return e=go(n),e!==null&&Vh(e),t.blockedOn=n,!1;e.shift()}return!0}function lp(t,e,n){da(t)&&n.delete(e)}function p1(){yc=!1,zn!==null&&da(zn)&&(zn=null),Un!==null&&da(Un)&&(Un=null),Bn!==null&&da(Bn)&&(Bn=null),zi.forEach(lp),Ui.forEach(lp)}function ci(t,e){t.blockedOn===e&&(t.blockedOn=null,yc||(yc=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,p1)))}function Bi(t){function e(s){return ci(s,t)}if(0<Qo.length){ci(Qo[0],t);for(var n=1;n<Qo.length;n++){var r=Qo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zn!==null&&ci(zn,t),Un!==null&&ci(Un,t),Bn!==null&&ci(Bn,t),zi.forEach(e),Ui.forEach(e),n=0;n<bn.length;n++)r=bn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bn.length&&(n=bn[0],n.blockedOn===null);)my(n),n.blockedOn===null&&bn.shift()}var ps=xn.ReactCurrentBatchConfig,Da=!0;function m1(t,e,n,r){var s=ae,i=ps.transition;ps.transition=null;try{ae=1,Dh(t,e,n,r)}finally{ae=s,ps.transition=i}}function g1(t,e,n,r){var s=ae,i=ps.transition;ps.transition=null;try{ae=4,Dh(t,e,n,r)}finally{ae=s,ps.transition=i}}function Dh(t,e,n,r){if(Da){var s=vc(t,e,n,r);if(s===null)Pu(t,e,r,ba,n),ap(t,r);else if(f1(s,t,e,n,r))r.stopPropagation();else if(ap(t,r),e&4&&-1<d1.indexOf(t)){for(;s!==null;){var i=go(s);if(i!==null&&hy(i),i=vc(t,e,n,r),i===null&&Pu(t,e,r,ba,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Pu(t,e,r,null,n)}}var ba=null;function vc(t,e,n,r){if(ba=null,t=Ph(r),t=Er(t),t!==null)if(e=Or(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ry(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ba=t,null}function gy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r1()){case Nh:return 1;case ay:return 4;case ka:case s1:return 16;case ly:return 536870912;default:return 16}default:return 16}}var jn=null,bh=null,fa=null;function yy(){if(fa)return fa;var t,e=bh,n=e.length,r,s="value"in jn?jn.value:jn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return fa=s.slice(t,1<r?1-r:void 0)}function pa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Go(){return!0}function up(){return!1}function Rt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Go:up,this.isPropagationStopped=up,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),e}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mh=Rt(bs),mo=xe({},bs,{view:0,detail:0}),y1=Rt(mo),wu,Eu,hi,gl=xe({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hi&&(hi&&t.type==="mousemove"?(wu=t.screenX-hi.screenX,Eu=t.screenY-hi.screenY):Eu=wu=0,hi=t),wu)},movementY:function(t){return"movementY"in t?t.movementY:Eu}}),cp=Rt(gl),v1=xe({},gl,{dataTransfer:0}),_1=Rt(v1),w1=xe({},mo,{relatedTarget:0}),xu=Rt(w1),E1=xe({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),x1=Rt(E1),T1=xe({},bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I1=Rt(T1),S1=xe({},bs,{data:0}),hp=Rt(S1),C1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=R1[t])?!!e[t]:!1}function jh(){return P1}var N1=xe({},mo,{key:function(t){if(t.key){var e=C1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(t){return t.type==="keypress"?pa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),k1=Rt(N1),V1=xe({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dp=Rt(V1),D1=xe({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),b1=Rt(D1),M1=xe({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),j1=Rt(M1),L1=xe({},gl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),O1=Rt(L1),F1=[9,13,27,32],Lh=mn&&"CompositionEvent"in window,Si=null;mn&&"documentMode"in document&&(Si=document.documentMode);var z1=mn&&"TextEvent"in window&&!Si,vy=mn&&(!Lh||Si&&8<Si&&11>=Si),fp=" ",pp=!1;function _y(t,e){switch(t){case"keyup":return F1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ts=!1;function U1(t,e){switch(t){case"compositionend":return wy(e);case"keypress":return e.which!==32?null:(pp=!0,fp);case"textInput":return t=e.data,t===fp&&pp?null:t;default:return null}}function B1(t,e){if(ts)return t==="compositionend"||!Lh&&_y(t,e)?(t=yy(),fa=bh=jn=null,ts=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vy&&e.locale!=="ko"?null:e.data;default:return null}}var $1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$1[t.type]:e==="textarea"}function Ey(t,e,n,r){Jg(r),e=Ma(e,"onChange"),0<e.length&&(n=new Mh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ci=null,$i=null;function H1(t){Vy(t,0)}function yl(t){var e=ss(t);if(qg(e))return t}function q1(t,e){if(t==="change")return e}var xy=!1;if(mn){var Tu;if(mn){var Iu="oninput"in document;if(!Iu){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),Iu=typeof gp.oninput=="function"}Tu=Iu}else Tu=!1;xy=Tu&&(!document.documentMode||9<document.documentMode)}function yp(){Ci&&(Ci.detachEvent("onpropertychange",Ty),$i=Ci=null)}function Ty(t){if(t.propertyName==="value"&&yl($i)){var e=[];Ey(e,$i,t,Ph(t)),ny(H1,e)}}function W1(t,e,n){t==="focusin"?(yp(),Ci=e,$i=n,Ci.attachEvent("onpropertychange",Ty)):t==="focusout"&&yp()}function Q1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yl($i)}function G1(t,e){if(t==="click")return yl(e)}function K1(t,e){if(t==="input"||t==="change")return yl(e)}function X1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:X1;function Hi(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ec.call(e,s)||!$t(t[s],e[s]))return!1}return!0}function vp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _p(t,e){var n=vp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vp(n)}}function Iy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Iy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sy(){for(var t=window,e=Ra();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ra(t.document)}return e}function Oh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y1(t){var e=Sy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Iy(n.ownerDocument.documentElement,n)){if(r!==null&&Oh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=_p(n,i);var o=_p(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var J1=mn&&"documentMode"in document&&11>=document.documentMode,ns=null,_c=null,Ai=null,wc=!1;function wp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wc||ns==null||ns!==Ra(r)||(r=ns,"selectionStart"in r&&Oh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ai&&Hi(Ai,r)||(Ai=r,r=Ma(_c,"onSelect"),0<r.length&&(e=new Mh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ns)))}function Ko(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rs={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},Su={},Cy={};mn&&(Cy=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function vl(t){if(Su[t])return Su[t];if(!rs[t])return t;var e=rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Cy)return Su[t]=e[n];return t}var Ay=vl("animationend"),Ry=vl("animationiteration"),Py=vl("animationstart"),Ny=vl("transitionend"),ky=new Map,Ep="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(t,e){ky.set(t,e),Lr(e,[t])}for(var Cu=0;Cu<Ep.length;Cu++){var Au=Ep[Cu],Z1=Au.toLowerCase(),eE=Au[0].toUpperCase()+Au.slice(1);ar(Z1,"on"+eE)}ar(Ay,"onAnimationEnd");ar(Ry,"onAnimationIteration");ar(Py,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(Ny,"onTransitionEnd");ws("onMouseEnter",["mouseout","mouseover"]);ws("onMouseLeave",["mouseout","mouseover"]);ws("onPointerEnter",["pointerout","pointerover"]);ws("onPointerLeave",["pointerout","pointerover"]);Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tE=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function xp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Zw(r,e,void 0,t),t.currentTarget=null}function Vy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;xp(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;xp(s,l,h),i=u}}}if(Na)throw t=mc,Na=!1,mc=null,t}function pe(t,e){var n=e[Sc];n===void 0&&(n=e[Sc]=new Set);var r=t+"__bubble";n.has(r)||(Dy(e,t,2,!1),n.add(r))}function Ru(t,e,n){var r=0;e&&(r|=4),Dy(n,t,r,e)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function qi(t){if(!t[Xo]){t[Xo]=!0,zg.forEach(function(n){n!=="selectionchange"&&(tE.has(n)||Ru(n,!1,t),Ru(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xo]||(e[Xo]=!0,Ru("selectionchange",!1,e))}}function Dy(t,e,n,r){switch(gy(e)){case 1:var s=m1;break;case 4:s=g1;break;default:s=Dh}n=s.bind(null,e,n,t),s=void 0,!pc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Er(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}ny(function(){var h=i,f=Ph(n),m=[];e:{var g=ky.get(t);if(g!==void 0){var C=Mh,R=t;switch(t){case"keypress":if(pa(n)===0)break e;case"keydown":case"keyup":C=k1;break;case"focusin":R="focus",C=xu;break;case"focusout":R="blur",C=xu;break;case"beforeblur":case"afterblur":C=xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=_1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=b1;break;case Ay:case Ry:case Py:C=x1;break;case Ny:C=j1;break;case"scroll":C=y1;break;case"wheel":C=O1;break;case"copy":case"cut":case"paste":C=I1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=dp}var P=(e&4)!==0,D=!P&&t==="scroll",_=P?g!==null?g+"Capture":null:g;P=[];for(var w=h,T;w!==null;){T=w;var N=T.stateNode;if(T.tag===5&&N!==null&&(T=N,_!==null&&(N=Fi(w,_),N!=null&&P.push(Wi(w,N,T)))),D)break;w=w.return}0<P.length&&(g=new C(g,R,null,n,f),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",g&&n!==dc&&(R=n.relatedTarget||n.fromElement)&&(Er(R)||R[gn]))break e;if((C||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,C?(R=n.relatedTarget||n.toElement,C=h,R=R?Er(R):null,R!==null&&(D=Or(R),R!==D||R.tag!==5&&R.tag!==6)&&(R=null)):(C=null,R=h),C!==R)){if(P=cp,N="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=dp,N="onPointerLeave",_="onPointerEnter",w="pointer"),D=C==null?g:ss(C),T=R==null?g:ss(R),g=new P(N,w+"leave",C,n,f),g.target=D,g.relatedTarget=T,N=null,Er(f)===h&&(P=new P(_,w+"enter",R,n,f),P.target=T,P.relatedTarget=D,N=P),D=N,C&&R)t:{for(P=C,_=R,w=0,T=P;T;T=Qr(T))w++;for(T=0,N=_;N;N=Qr(N))T++;for(;0<w-T;)P=Qr(P),w--;for(;0<T-w;)_=Qr(_),T--;for(;w--;){if(P===_||_!==null&&P===_.alternate)break t;P=Qr(P),_=Qr(_)}P=null}else P=null;C!==null&&Tp(m,g,C,P,!1),R!==null&&D!==null&&Tp(m,D,R,P,!0)}}e:{if(g=h?ss(h):window,C=g.nodeName&&g.nodeName.toLowerCase(),C==="select"||C==="input"&&g.type==="file")var O=q1;else if(mp(g))if(xy)O=K1;else{O=Q1;var z=W1}else(C=g.nodeName)&&C.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=G1);if(O&&(O=O(t,h))){Ey(m,O,n,f);break e}z&&z(t,g,h),t==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&ac(g,"number",g.value)}switch(z=h?ss(h):window,t){case"focusin":(mp(z)||z.contentEditable==="true")&&(ns=z,_c=h,Ai=null);break;case"focusout":Ai=_c=ns=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,wp(m,n,f);break;case"selectionchange":if(J1)break;case"keydown":case"keyup":wp(m,n,f)}var E;if(Lh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ts?_y(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(vy&&n.locale!=="ko"&&(ts||v!=="onCompositionStart"?v==="onCompositionEnd"&&ts&&(E=yy()):(jn=f,bh="value"in jn?jn.value:jn.textContent,ts=!0)),z=Ma(h,v),0<z.length&&(v=new hp(v,t,null,n,f),m.push({event:v,listeners:z}),E?v.data=E:(E=wy(n),E!==null&&(v.data=E)))),(E=z1?U1(t,n):B1(t,n))&&(h=Ma(h,"onBeforeInput"),0<h.length&&(f=new hp("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=E))}Vy(m,e)})}function Wi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ma(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fi(t,n),i!=null&&r.unshift(Wi(t,i,s)),i=Fi(t,e),i!=null&&r.push(Wi(t,i,s))),t=t.return}return r}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Fi(n,i),u!=null&&o.unshift(Wi(n,u,l))):s||(u=Fi(n,i),u!=null&&o.push(Wi(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nE=/\r\n?/g,rE=/\u0000|\uFFFD/g;function Ip(t){return(typeof t=="string"?t:""+t).replace(nE,`
`).replace(rE,"")}function Yo(t,e,n){if(e=Ip(e),Ip(t)!==e&&n)throw Error(F(425))}function ja(){}var Ec=null,xc=null;function Tc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ic=typeof setTimeout=="function"?setTimeout:void 0,sE=typeof clearTimeout=="function"?clearTimeout:void 0,Sp=typeof Promise=="function"?Promise:void 0,iE=typeof queueMicrotask=="function"?queueMicrotask:typeof Sp<"u"?function(t){return Sp.resolve(null).then(t).catch(oE)}:Ic;function oE(t){setTimeout(function(){throw t})}function Nu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bi(e)}function $n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ms,Qi="__reactProps$"+Ms,gn="__reactContainer$"+Ms,Sc="__reactEvents$"+Ms,aE="__reactListeners$"+Ms,lE="__reactHandles$"+Ms;function Er(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gn]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cp(t);t!==null;){if(n=t[Yt])return n;t=Cp(t)}return e}t=n,n=t.parentNode}return null}function go(t){return t=t[Yt]||t[gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function _l(t){return t[Qi]||null}var Cc=[],is=-1;function lr(t){return{current:t}}function ge(t){0>is||(t.current=Cc[is],Cc[is]=null,is--)}function de(t,e){is++,Cc[is]=t.current,t.current=e}var er={},rt=lr(er),yt=lr(!1),Nr=er;function Es(t,e){var n=t.type.contextTypes;if(!n)return er;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vt(t){return t=t.childContextTypes,t!=null}function La(){ge(yt),ge(rt)}function Ap(t,e,n){if(rt.current!==er)throw Error(F(168));de(rt,e),de(yt,n)}function by(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,Ww(t)||"Unknown",s));return xe({},n,r)}function Oa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||er,Nr=rt.current,de(rt,t),de(yt,yt.current),!0}function Rp(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=by(t,e,Nr),r.__reactInternalMemoizedMergedChildContext=t,ge(yt),ge(rt),de(rt,t)):ge(yt),de(yt,n)}var hn=null,wl=!1,ku=!1;function My(t){hn===null?hn=[t]:hn.push(t)}function uE(t){wl=!0,My(t)}function ur(){if(!ku&&hn!==null){ku=!0;var t=0,e=ae;try{var n=hn;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hn=null,wl=!1}catch(s){throw hn!==null&&(hn=hn.slice(t+1)),oy(Nh,ur),s}finally{ae=e,ku=!1}}return null}var os=[],as=0,Fa=null,za=0,Pt=[],Nt=0,kr=null,dn=1,fn="";function vr(t,e){os[as++]=za,os[as++]=Fa,Fa=t,za=e}function jy(t,e,n){Pt[Nt++]=dn,Pt[Nt++]=fn,Pt[Nt++]=kr,kr=t;var r=dn;t=fn;var s=32-Ut(r)-1;r&=~(1<<s),n+=1;var i=32-Ut(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,dn=1<<32-Ut(e)+s|n<<s|r,fn=i+t}else dn=1<<i|n<<s|r,fn=t}function Fh(t){t.return!==null&&(vr(t,1),jy(t,1,0))}function zh(t){for(;t===Fa;)Fa=os[--as],os[as]=null,za=os[--as],os[as]=null;for(;t===kr;)kr=Pt[--Nt],Pt[Nt]=null,fn=Pt[--Nt],Pt[Nt]=null,dn=Pt[--Nt],Pt[Nt]=null}var St=null,Tt=null,ye=!1,zt=null;function Ly(t,e){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,St=t,Tt=$n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,St=t,Tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kr!==null?{id:dn,overflow:fn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,St=t,Tt=null,!0):!1;default:return!1}}function Ac(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rc(t){if(ye){var e=Tt;if(e){var n=e;if(!Pp(t,e)){if(Ac(t))throw Error(F(418));e=$n(n.nextSibling);var r=St;e&&Pp(t,e)?Ly(r,n):(t.flags=t.flags&-4097|2,ye=!1,St=t)}}else{if(Ac(t))throw Error(F(418));t.flags=t.flags&-4097|2,ye=!1,St=t}}}function Np(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function Jo(t){if(t!==St)return!1;if(!ye)return Np(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tc(t.type,t.memoizedProps)),e&&(e=Tt)){if(Ac(t))throw Oy(),Error(F(418));for(;e;)Ly(t,e),e=$n(e.nextSibling)}if(Np(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tt=$n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tt=null}}else Tt=St?$n(t.stateNode.nextSibling):null;return!0}function Oy(){for(var t=Tt;t;)t=$n(t.nextSibling)}function xs(){Tt=St=null,ye=!1}function Uh(t){zt===null?zt=[t]:zt.push(t)}var cE=xn.ReactCurrentBatchConfig;function di(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Zo(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kp(t){var e=t._init;return e(t._payload)}function Fy(t){function e(_,w){if(t){var T=_.deletions;T===null?(_.deletions=[w],_.flags|=16):T.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Qn(_,w),_.index=0,_.sibling=null,_}function i(_,w,T){return _.index=T,t?(T=_.alternate,T!==null?(T=T.index,T<w?(_.flags|=2,w):T):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,T,N){return w===null||w.tag!==6?(w=Ou(T,_.mode,N),w.return=_,w):(w=s(w,T),w.return=_,w)}function u(_,w,T,N){var O=T.type;return O===es?f(_,w,T.props.children,N,T.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Vn&&kp(O)===w.type)?(N=s(w,T.props),N.ref=di(_,w,T),N.return=_,N):(N=Ea(T.type,T.key,T.props,null,_.mode,N),N.ref=di(_,w,T),N.return=_,N)}function h(_,w,T,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=Fu(T,_.mode,N),w.return=_,w):(w=s(w,T.children||[]),w.return=_,w)}function f(_,w,T,N,O){return w===null||w.tag!==7?(w=Cr(T,_.mode,N,O),w.return=_,w):(w=s(w,T),w.return=_,w)}function m(_,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ou(""+w,_.mode,T),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bo:return T=Ea(w.type,w.key,w.props,null,_.mode,T),T.ref=di(_,null,w),T.return=_,T;case Zr:return w=Fu(w,_.mode,T),w.return=_,w;case Vn:var N=w._init;return m(_,N(w._payload),T)}if(gi(w)||ai(w))return w=Cr(w,_.mode,T,null),w.return=_,w;Zo(_,w)}return null}function g(_,w,T,N){var O=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return O!==null?null:l(_,w,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Bo:return T.key===O?u(_,w,T,N):null;case Zr:return T.key===O?h(_,w,T,N):null;case Vn:return O=T._init,g(_,w,O(T._payload),N)}if(gi(T)||ai(T))return O!==null?null:f(_,w,T,N,null);Zo(_,T)}return null}function C(_,w,T,N,O){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(T)||null,l(w,_,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Bo:return _=_.get(N.key===null?T:N.key)||null,u(w,_,N,O);case Zr:return _=_.get(N.key===null?T:N.key)||null,h(w,_,N,O);case Vn:var z=N._init;return C(_,w,T,z(N._payload),O)}if(gi(N)||ai(N))return _=_.get(T)||null,f(w,_,N,O,null);Zo(w,N)}return null}function R(_,w,T,N){for(var O=null,z=null,E=w,v=w=0,x=null;E!==null&&v<T.length;v++){E.index>v?(x=E,E=null):x=E.sibling;var S=g(_,E,T[v],N);if(S===null){E===null&&(E=x);break}t&&E&&S.alternate===null&&e(_,E),w=i(S,w,v),z===null?O=S:z.sibling=S,z=S,E=x}if(v===T.length)return n(_,E),ye&&vr(_,v),O;if(E===null){for(;v<T.length;v++)E=m(_,T[v],N),E!==null&&(w=i(E,w,v),z===null?O=E:z.sibling=E,z=E);return ye&&vr(_,v),O}for(E=r(_,E);v<T.length;v++)x=C(E,_,v,T[v],N),x!==null&&(t&&x.alternate!==null&&E.delete(x.key===null?v:x.key),w=i(x,w,v),z===null?O=x:z.sibling=x,z=x);return t&&E.forEach(function(A){return e(_,A)}),ye&&vr(_,v),O}function P(_,w,T,N){var O=ai(T);if(typeof O!="function")throw Error(F(150));if(T=O.call(T),T==null)throw Error(F(151));for(var z=O=null,E=w,v=w=0,x=null,S=T.next();E!==null&&!S.done;v++,S=T.next()){E.index>v?(x=E,E=null):x=E.sibling;var A=g(_,E,S.value,N);if(A===null){E===null&&(E=x);break}t&&E&&A.alternate===null&&e(_,E),w=i(A,w,v),z===null?O=A:z.sibling=A,z=A,E=x}if(S.done)return n(_,E),ye&&vr(_,v),O;if(E===null){for(;!S.done;v++,S=T.next())S=m(_,S.value,N),S!==null&&(w=i(S,w,v),z===null?O=S:z.sibling=S,z=S);return ye&&vr(_,v),O}for(E=r(_,E);!S.done;v++,S=T.next())S=C(E,_,v,S.value,N),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?v:S.key),w=i(S,w,v),z===null?O=S:z.sibling=S,z=S);return t&&E.forEach(function(k){return e(_,k)}),ye&&vr(_,v),O}function D(_,w,T,N){if(typeof T=="object"&&T!==null&&T.type===es&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Bo:e:{for(var O=T.key,z=w;z!==null;){if(z.key===O){if(O=T.type,O===es){if(z.tag===7){n(_,z.sibling),w=s(z,T.props.children),w.return=_,_=w;break e}}else if(z.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Vn&&kp(O)===z.type){n(_,z.sibling),w=s(z,T.props),w.ref=di(_,z,T),w.return=_,_=w;break e}n(_,z);break}else e(_,z);z=z.sibling}T.type===es?(w=Cr(T.props.children,_.mode,N,T.key),w.return=_,_=w):(N=Ea(T.type,T.key,T.props,null,_.mode,N),N.ref=di(_,w,T),N.return=_,_=N)}return o(_);case Zr:e:{for(z=T.key;w!==null;){if(w.key===z)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(_,w.sibling),w=s(w,T.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=Fu(T,_.mode,N),w.return=_,_=w}return o(_);case Vn:return z=T._init,D(_,w,z(T._payload),N)}if(gi(T))return R(_,w,T,N);if(ai(T))return P(_,w,T,N);Zo(_,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,T),w.return=_,_=w):(n(_,w),w=Ou(T,_.mode,N),w.return=_,_=w),o(_)):n(_,w)}return D}var Ts=Fy(!0),zy=Fy(!1),Ua=lr(null),Ba=null,ls=null,Bh=null;function $h(){Bh=ls=Ba=null}function Hh(t){var e=Ua.current;ge(Ua),t._currentValue=e}function Pc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ms(t,e){Ba=t,Bh=ls=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function bt(t){var e=t._currentValue;if(Bh!==t)if(t={context:t,memoizedValue:e,next:null},ls===null){if(Ba===null)throw Error(F(308));ls=t,Ba.dependencies={lanes:0,firstContext:t}}else ls=ls.next=t;return e}var xr=null;function qh(t){xr===null?xr=[t]:xr.push(t)}function Uy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qh(e)):(n.next=s.next,s.next=n),e.interleaved=n,yn(t,r)}function yn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dn=!1;function Wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function By(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,yn(t,n)}return s=r.interleaved,s===null?(e.next=e,qh(r)):(e.next=s.next,s.next=e),r.interleaved=e,yn(t,n)}function ma(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kh(t,n)}}function Vp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $a(t,e,n,r){var s=t.updateQueue;Dn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=h=u=null,l=i;do{var g=l.lane,C=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,P=l;switch(g=e,C=n,P.tag){case 1:if(R=P.payload,typeof R=="function"){m=R.call(C,m,g);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=P.payload,g=typeof R=="function"?R.call(C,m,g):R,g==null)break e;m=xe({},m,g);break e;case 2:Dn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else C={eventTime:C,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=C,u=m):f=f.next=C,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Dr|=o,t.lanes=o,t.memoizedState=m}}function Dp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var yo={},Zt=lr(yo),Gi=lr(yo),Ki=lr(yo);function Tr(t){if(t===yo)throw Error(F(174));return t}function Qh(t,e){switch(de(Ki,e),de(Gi,t),de(Zt,yo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uc(e,t)}ge(Zt),de(Zt,e)}function Is(){ge(Zt),ge(Gi),ge(Ki)}function $y(t){Tr(Ki.current);var e=Tr(Zt.current),n=uc(e,t.type);e!==n&&(de(Gi,t),de(Zt,n))}function Gh(t){Gi.current===t&&(ge(Zt),ge(Gi))}var we=lr(0);function Ha(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vu=[];function Kh(){for(var t=0;t<Vu.length;t++)Vu[t]._workInProgressVersionPrimary=null;Vu.length=0}var ga=xn.ReactCurrentDispatcher,Du=xn.ReactCurrentBatchConfig,Vr=0,Ee=null,je=null,Be=null,qa=!1,Ri=!1,Xi=0,hE=0;function Ye(){throw Error(F(321))}function Xh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function Yh(t,e,n,r,s,i){if(Vr=i,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ga.current=t===null||t.memoizedState===null?mE:gE,t=n(r,s),Ri){i=0;do{if(Ri=!1,Xi=0,25<=i)throw Error(F(301));i+=1,Be=je=null,e.updateQueue=null,ga.current=yE,t=n(r,s)}while(Ri)}if(ga.current=Wa,e=je!==null&&je.next!==null,Vr=0,Be=je=Ee=null,qa=!1,e)throw Error(F(300));return t}function Jh(){var t=Xi!==0;return Xi=0,t}function Kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ee.memoizedState=Be=t:Be=Be.next=t,Be}function Mt(){if(je===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Be===null?Ee.memoizedState:Be.next;if(e!==null)Be=e,je=t;else{if(t===null)throw Error(F(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Be===null?Ee.memoizedState=Be=t:Be=Be.next=t}return Be}function Yi(t,e){return typeof e=="function"?e(t):e}function bu(t){var e=Mt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var f=h.lane;if((Vr&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ee.lanes|=f,Dr|=f}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,$t(r,e.memoizedState)||(gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ee.lanes|=i,Dr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mu(t){var e=Mt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);$t(i,e.memoizedState)||(gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Hy(){}function qy(t,e){var n=Ee,r=Mt(),s=e(),i=!$t(r.memoizedState,s);if(i&&(r.memoizedState=s,gt=!0),r=r.queue,Zh(Gy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Ji(9,Qy.bind(null,n,r,s,e),void 0,null),$e===null)throw Error(F(349));Vr&30||Wy(n,e,s)}return s}function Wy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qy(t,e,n,r){e.value=n,e.getSnapshot=r,Ky(e)&&Xy(t)}function Gy(t,e,n){return n(function(){Ky(e)&&Xy(t)})}function Ky(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function Xy(t){var e=yn(t,1);e!==null&&Bt(e,t,1,-1)}function bp(t){var e=Kt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:t},e.queue=t,t=t.dispatch=pE.bind(null,Ee,t),[e.memoizedState,t]}function Ji(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Yy(){return Mt().memoizedState}function ya(t,e,n,r){var s=Kt();Ee.flags|=t,s.memoizedState=Ji(1|e,n,void 0,r===void 0?null:r)}function El(t,e,n,r){var s=Mt();r=r===void 0?null:r;var i=void 0;if(je!==null){var o=je.memoizedState;if(i=o.destroy,r!==null&&Xh(r,o.deps)){s.memoizedState=Ji(e,n,i,r);return}}Ee.flags|=t,s.memoizedState=Ji(1|e,n,i,r)}function Mp(t,e){return ya(8390656,8,t,e)}function Zh(t,e){return El(2048,8,t,e)}function Jy(t,e){return El(4,2,t,e)}function Zy(t,e){return El(4,4,t,e)}function ev(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tv(t,e,n){return n=n!=null?n.concat([t]):null,El(4,4,ev.bind(null,e,t),n)}function ed(){}function nv(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function rv(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function sv(t,e,n){return Vr&21?($t(n,e)||(n=uy(),Ee.lanes|=n,Dr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=n)}function dE(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=Du.transition;Du.transition={};try{t(!1),e()}finally{ae=n,Du.transition=r}}function iv(){return Mt().memoizedState}function fE(t,e,n){var r=Wn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ov(t))av(e,n);else if(n=Uy(t,e,n,r),n!==null){var s=ut();Bt(n,t,r,s),lv(n,e,r)}}function pE(t,e,n){var r=Wn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ov(t))av(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,$t(l,o)){var u=e.interleaved;u===null?(s.next=s,qh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Uy(t,e,s,r),n!==null&&(s=ut(),Bt(n,t,r,s),lv(n,e,r))}}function ov(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function av(t,e){Ri=qa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kh(t,n)}}var Wa={readContext:bt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},mE={readContext:bt,useCallback:function(t,e){return Kt().memoizedState=[t,e===void 0?null:e],t},useContext:bt,useEffect:Mp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ya(4194308,4,ev.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return ya(4,2,t,e)},useMemo:function(t,e){var n=Kt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fE.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=Kt();return t={current:t},e.memoizedState=t},useState:bp,useDebugValue:ed,useDeferredValue:function(t){return Kt().memoizedState=t},useTransition:function(){var t=bp(!1),e=t[0];return t=dE.bind(null,t[1]),Kt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,s=Kt();if(ye){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),$e===null)throw Error(F(349));Vr&30||Wy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Mp(Gy.bind(null,r,i,t),[t]),r.flags|=2048,Ji(9,Qy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Kt(),e=$e.identifierPrefix;if(ye){var n=fn,r=dn;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gE={readContext:bt,useCallback:nv,useContext:bt,useEffect:Zh,useImperativeHandle:tv,useInsertionEffect:Jy,useLayoutEffect:Zy,useMemo:rv,useReducer:bu,useRef:Yy,useState:function(){return bu(Yi)},useDebugValue:ed,useDeferredValue:function(t){var e=Mt();return sv(e,je.memoizedState,t)},useTransition:function(){var t=bu(Yi)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Hy,useSyncExternalStore:qy,useId:iv,unstable_isNewReconciler:!1},yE={readContext:bt,useCallback:nv,useContext:bt,useEffect:Zh,useImperativeHandle:tv,useInsertionEffect:Jy,useLayoutEffect:Zy,useMemo:rv,useReducer:Mu,useRef:Yy,useState:function(){return Mu(Yi)},useDebugValue:ed,useDeferredValue:function(t){var e=Mt();return je===null?e.memoizedState=t:sv(e,je.memoizedState,t)},useTransition:function(){var t=Mu(Yi)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Hy,useSyncExternalStore:qy,useId:iv,unstable_isNewReconciler:!1};function Ot(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xl={isMounted:function(t){return(t=t._reactInternals)?Or(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ut(),s=Wn(t),i=pn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hn(t,i,s),e!==null&&(Bt(e,t,s,r),ma(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ut(),s=Wn(t),i=pn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hn(t,i,s),e!==null&&(Bt(e,t,s,r),ma(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ut(),r=Wn(t),s=pn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hn(t,s,r),e!==null&&(Bt(e,t,r,n),ma(e,t,r))}};function jp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Hi(n,r)||!Hi(s,i):!0}function uv(t,e,n){var r=!1,s=er,i=e.contextType;return typeof i=="object"&&i!==null?i=bt(i):(s=vt(e)?Nr:rt.current,r=e.contextTypes,i=(r=r!=null)?Es(t,s):er),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Lp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xl.enqueueReplaceState(e,e.state,null)}function kc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Wh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=bt(i):(i=vt(e)?Nr:rt.current,s.context=Es(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Nc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xl.enqueueReplaceState(s,s.state,null),$a(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ss(t,e){try{var n="",r=e;do n+=qw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ju(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vE=typeof WeakMap=="function"?WeakMap:Map;function cv(t,e,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ga||(Ga=!0,Bc=r),Vc(t,e)},n}function hv(t,e,n){n=pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Vc(t,e),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Op(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=VE.bind(null,t,e,n),e.then(t,t))}function Fp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pn(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var _E=xn.ReactCurrentOwner,gt=!1;function lt(t,e,n,r){e.child=t===null?zy(e,null,n,r):Ts(e,t.child,n,r)}function Up(t,e,n,r,s){n=n.render;var i=e.ref;return ms(e,s),r=Yh(t,e,n,r,i,s),n=Jh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vn(t,e,s)):(ye&&n&&Fh(e),e.flags|=1,lt(t,e,r,s),e.child)}function Bp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ld(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,dv(t,e,i,r,s)):(t=Ea(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Hi,n(o,r)&&t.ref===e.ref)return vn(t,e,s)}return e.flags|=1,t=Qn(i,r),t.ref=e.ref,t.return=e,e.child=t}function dv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Hi(i,r)&&t.ref===e.ref)if(gt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,vn(t,e,s)}return Dc(t,e,n,r,s)}function fv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(cs,xt),xt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,de(cs,xt),xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(cs,xt),xt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,de(cs,xt),xt|=r;return lt(t,e,s,n),e.child}function pv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dc(t,e,n,r,s){var i=vt(n)?Nr:rt.current;return i=Es(e,i),ms(e,s),n=Yh(t,e,n,r,i,s),r=Jh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vn(t,e,s)):(ye&&r&&Fh(e),e.flags|=1,lt(t,e,n,s),e.child)}function $p(t,e,n,r,s){if(vt(n)){var i=!0;Oa(e)}else i=!1;if(ms(e,s),e.stateNode===null)va(t,e),uv(e,n,r),kc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=bt(h):(h=vt(n)?Nr:rt.current,h=Es(e,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Lp(e,o,r,h),Dn=!1;var g=e.memoizedState;o.state=g,$a(e,r,o,s),u=e.memoizedState,l!==r||g!==u||yt.current||Dn?(typeof f=="function"&&(Nc(e,n,f,r),u=e.memoizedState),(l=Dn||jp(e,n,l,r,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,By(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Ot(e.type,l),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=bt(u):(u=vt(n)?Nr:rt.current,u=Es(e,u));var C=n.getDerivedStateFromProps;(f=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Lp(e,o,r,u),Dn=!1,g=e.memoizedState,o.state=g,$a(e,r,o,s);var R=e.memoizedState;l!==m||g!==R||yt.current||Dn?(typeof C=="function"&&(Nc(e,n,C,r),R=e.memoizedState),(h=Dn||jp(e,n,h,r,g,R,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return bc(t,e,n,r,i,s)}function bc(t,e,n,r,s,i){pv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Rp(e,n,!1),vn(t,e,i);r=e.stateNode,_E.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ts(e,t.child,null,i),e.child=Ts(e,null,l,i)):lt(t,e,l,i),e.memoizedState=r.state,s&&Rp(e,n,!0),e.child}function mv(t){var e=t.stateNode;e.pendingContext?Ap(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ap(t,e.context,!1),Qh(t,e.containerInfo)}function Hp(t,e,n,r,s){return xs(),Uh(s),e.flags|=256,lt(t,e,n,r),e.child}var Mc={dehydrated:null,treeContext:null,retryLane:0};function jc(t){return{baseLanes:t,cachePool:null,transitions:null}}function gv(t,e,n){var r=e.pendingProps,s=we.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),de(we,s&1),t===null)return Rc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Sl(o,r,0,null),t=Cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jc(n),e.memoizedState=Mc,t):td(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return wE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Qn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Qn(l,i):(i=Cr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?jc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Mc,r}return i=t.child,t=i.sibling,r=Qn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function td(t,e){return e=Sl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ea(t,e,n,r){return r!==null&&Uh(r),Ts(e,t.child,null,n),t=td(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ju(Error(F(422))),ea(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Sl({mode:"visible",children:r.children},s,0,null),i=Cr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ts(e,t.child,null,o),e.child.memoizedState=jc(o),e.memoizedState=Mc,i);if(!(e.mode&1))return ea(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=ju(i,r,void 0),ea(t,e,o,r)}if(l=(o&t.childLanes)!==0,gt||l){if(r=$e,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,yn(t,s),Bt(r,t,s,-1))}return ad(),r=ju(Error(F(421))),ea(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=DE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tt=$n(s.nextSibling),St=e,ye=!0,zt=null,t!==null&&(Pt[Nt++]=dn,Pt[Nt++]=fn,Pt[Nt++]=kr,dn=t.id,fn=t.overflow,kr=e),e=td(e,r.children),e.flags|=4096,e)}function qp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pc(t.return,e,n)}function Lu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function yv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(lt(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qp(t,n,e);else if(t.tag===19)qp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(de(we,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ha(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Lu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ha(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Lu(e,!0,n,null,i);break;case"together":Lu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function va(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Qn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EE(t,e,n){switch(e.tag){case 3:mv(e),xs();break;case 5:$y(e);break;case 1:vt(e.type)&&Oa(e);break;case 4:Qh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;de(Ua,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(de(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?gv(t,e,n):(de(we,we.current&1),t=vn(t,e,n),t!==null?t.sibling:null);de(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return yv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,fv(t,e,n)}return vn(t,e,n)}var vv,Lc,_v,wv;vv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lc=function(){};_v=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Tr(Zt.current);var i=null;switch(n){case"input":s=ic(t,s),r=ic(t,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=lc(t,s),r=lc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ja)}cc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Li.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Li.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&pe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};wv=function(t,e,n,r){n!==r&&(e.flags|=4)};function fi(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xE(t,e,n){var r=e.pendingProps;switch(zh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return vt(e.type)&&La(),Je(e),null;case 3:return r=e.stateNode,Is(),ge(yt),ge(rt),Kh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(qc(zt),zt=null))),Lc(t,e),Je(e),null;case 5:Gh(e);var s=Tr(Ki.current);if(n=e.type,t!==null&&e.stateNode!=null)_v(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Je(e),null}if(t=Tr(Zt.current),Jo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yt]=e,r[Qi]=i,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<vi.length;s++)pe(vi[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":ep(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":np(r,i),pe("invalid",r)}cc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Yo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Yo(r.textContent,l,t),s=["children",""+l]):Li.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":$o(r),tp(r,i,!0);break;case"textarea":$o(r),rp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ja)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yt]=e,t[Qi]=r,vv(t,e,!1,!1),e.stateNode=t;e:{switch(o=hc(n,r),n){case"dialog":pe("cancel",t),pe("close",t),s=r;break;case"iframe":case"object":case"embed":pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<vi.length;s++)pe(vi[s],t);s=r;break;case"source":pe("error",t),s=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),s=r;break;case"details":pe("toggle",t),s=r;break;case"input":ep(t,r),s=ic(t,r),pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),pe("invalid",t);break;case"textarea":np(t,r),s=lc(t,r),pe("invalid",t);break;default:s=r}cc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Yg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Kg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Oi(t,u):typeof u=="number"&&Oi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Li.hasOwnProperty(i)?u!=null&&i==="onScroll"&&pe("scroll",t):u!=null&&Sh(t,i,u,o))}switch(n){case"input":$o(t),tp(t,r,!1);break;case"textarea":$o(t),rp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?hs(t,!!r.multiple,i,!1):r.defaultValue!=null&&hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ja)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)wv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Tr(Ki.current),Tr(Zt.current),Jo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yt]=e,(i=r.nodeValue!==n)&&(t=St,t!==null))switch(t.tag){case 3:Yo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=e,e.stateNode=r}return Je(e),null;case 13:if(ge(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&Tt!==null&&e.mode&1&&!(e.flags&128))Oy(),xs(),e.flags|=98560,i=!1;else if(i=Jo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Yt]=e}else xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),i=!1}else zt!==null&&(qc(zt),zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?Oe===0&&(Oe=3):ad())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return Is(),Lc(t,e),t===null&&qi(e.stateNode.containerInfo),Je(e),null;case 10:return Hh(e.type._context),Je(e),null;case 17:return vt(e.type)&&La(),Je(e),null;case 19:if(ge(we),i=e.memoizedState,i===null)return Je(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)fi(i,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ha(t),o!==null){for(e.flags|=128,fi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return de(we,we.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>Cs&&(e.flags|=128,r=!0,fi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ha(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ye)return Je(e),null}else 2*Re()-i.renderingStartTime>Cs&&n!==1073741824&&(e.flags|=128,r=!0,fi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=we.current,de(we,r?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return od(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function TE(t,e){switch(zh(e),e.tag){case 1:return vt(e.type)&&La(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Is(),ge(yt),ge(rt),Kh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gh(e),null;case 13:if(ge(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(we),null;case 4:return Is(),null;case 10:return Hh(e.type._context),null;case 22:case 23:return od(),null;case 24:return null;default:return null}}var ta=!1,tt=!1,IE=typeof WeakSet=="function"?WeakSet:Set,W=null;function us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Oc(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var Wp=!1;function SE(t,e){if(Ec=Da,t=Sy(),Oh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,m=t,g=null;t:for(;;){for(var C;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(C=m.firstChild)!==null;)g=m,m=C;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=o),g===i&&++f===r&&(u=o),(C=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(xc={focusedElem:t,selectionRange:n},Da=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var P=R.memoizedProps,D=R.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?P:Ot(e.type,P),D);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(N){Ce(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return R=Wp,Wp=!1,R}function Pi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Oc(e,n,i)}s=s.next}while(s!==r)}}function Tl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ev(t){var e=t.alternate;e!==null&&(t.alternate=null,Ev(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[Qi],delete e[Sc],delete e[aE],delete e[lE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xv(t){return t.tag===5||t.tag===3||t.tag===4}function Qp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ja));else if(r!==4&&(t=t.child,t!==null))for(zc(t,e,n),t=t.sibling;t!==null;)zc(t,e,n),t=t.sibling}function Uc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uc(t,e,n),t=t.sibling;t!==null;)Uc(t,e,n),t=t.sibling}var He=null,Ft=!1;function kn(t,e,n){for(n=n.child;n!==null;)Tv(t,e,n),n=n.sibling}function Tv(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(ml,n)}catch{}switch(n.tag){case 5:tt||us(n,e);case 6:var r=He,s=Ft;He=null,kn(t,e,n),He=r,Ft=s,He!==null&&(Ft?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Ft?(t=He,n=n.stateNode,t.nodeType===8?Nu(t.parentNode,n):t.nodeType===1&&Nu(t,n),Bi(t)):Nu(He,n.stateNode));break;case 4:r=He,s=Ft,He=n.stateNode.containerInfo,Ft=!0,kn(t,e,n),He=r,Ft=s;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Oc(n,e,o),s=s.next}while(s!==r)}kn(t,e,n);break;case 1:if(!tt&&(us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ce(n,e,l)}kn(t,e,n);break;case 21:kn(t,e,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,kn(t,e,n),tt=r):kn(t,e,n);break;default:kn(t,e,n)}}function Gp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IE),e.forEach(function(r){var s=bE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:He=l.stateNode,Ft=!1;break e;case 3:He=l.stateNode.containerInfo,Ft=!0;break e;case 4:He=l.stateNode.containerInfo,Ft=!0;break e}l=l.return}if(He===null)throw Error(F(160));Tv(i,o,s),He=null,Ft=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Ce(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Iv(e,t),e=e.sibling}function Iv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),Gt(t),r&4){try{Pi(3,t,t.return),Tl(3,t)}catch(P){Ce(t,t.return,P)}try{Pi(5,t,t.return)}catch(P){Ce(t,t.return,P)}}break;case 1:Lt(e,t),Gt(t),r&512&&n!==null&&us(n,n.return);break;case 5:if(Lt(e,t),Gt(t),r&512&&n!==null&&us(n,n.return),t.flags&32){var s=t.stateNode;try{Oi(s,"")}catch(P){Ce(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Wg(s,i),hc(l,o);var h=hc(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Yg(s,m):f==="dangerouslySetInnerHTML"?Kg(s,m):f==="children"?Oi(s,m):Sh(s,f,m,h)}switch(l){case"input":oc(s,i);break;case"textarea":Qg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?hs(s,!!i.multiple,C,!1):g!==!!i.multiple&&(i.defaultValue!=null?hs(s,!!i.multiple,i.defaultValue,!0):hs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qi]=i}catch(P){Ce(t,t.return,P)}}break;case 6:if(Lt(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Ce(t,t.return,P)}}break;case 3:if(Lt(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bi(e.containerInfo)}catch(P){Ce(t,t.return,P)}break;case 4:Lt(e,t),Gt(t);break;case 13:Lt(e,t),Gt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sd=Re())),r&4&&Gp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(h=tt)||f,Lt(e,t),tt=h):Lt(e,t),Gt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(m=W=f;W!==null;){switch(g=W,C=g.child,g.tag){case 0:case 11:case 14:case 15:Pi(4,g,g.return);break;case 1:us(g,g.return);var R=g.stateNode;if(typeof R.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(P){Ce(r,n,P)}}break;case 5:us(g,g.return);break;case 22:if(g.memoizedState!==null){Xp(m);continue}}C!==null?(C.return=g,W=C):Xp(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Xg("display",o))}catch(P){Ce(t,t.return,P)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(P){Ce(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lt(e,t),Gt(t),r&4&&Gp(t);break;case 21:break;default:Lt(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xv(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Oi(s,""),r.flags&=-33);var i=Qp(t);Uc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Qp(t);zc(t,l,o);break;default:throw Error(F(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CE(t,e,n){W=t,Sv(t)}function Sv(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ta;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||tt;l=ta;var h=tt;if(ta=o,(tt=u)&&!h)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?Yp(s):u!==null?(u.return=o,W=u):Yp(s);for(;i!==null;)W=i,Sv(i),i=i.sibling;W=s,ta=l,tt=h}Kp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Kp(t)}}function Kp(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||Tl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ot(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Dp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Dp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Bi(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}tt||e.flags&512&&Fc(e)}catch(g){Ce(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Xp(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Yp(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tl(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ce(e,s,u)}}var i=e.return;try{Fc(e)}catch(u){Ce(e,i,u)}break;case 5:var o=e.return;try{Fc(e)}catch(u){Ce(e,o,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var AE=Math.ceil,Qa=xn.ReactCurrentDispatcher,nd=xn.ReactCurrentOwner,Dt=xn.ReactCurrentBatchConfig,ie=0,$e=null,Ne=null,Qe=0,xt=0,cs=lr(0),Oe=0,Zi=null,Dr=0,Il=0,rd=0,Ni=null,pt=null,sd=0,Cs=1/0,cn=null,Ga=!1,Bc=null,qn=null,na=!1,Ln=null,Ka=0,ki=0,$c=null,_a=-1,wa=0;function ut(){return ie&6?Re():_a!==-1?_a:_a=Re()}function Wn(t){return t.mode&1?ie&2&&Qe!==0?Qe&-Qe:cE.transition!==null?(wa===0&&(wa=uy()),wa):(t=ae,t!==0||(t=window.event,t=t===void 0?16:gy(t.type)),t):1}function Bt(t,e,n,r){if(50<ki)throw ki=0,$c=null,Error(F(185));po(t,n,r),(!(ie&2)||t!==$e)&&(t===$e&&(!(ie&2)&&(Il|=n),Oe===4&&Mn(t,Qe)),_t(t,r),n===1&&ie===0&&!(e.mode&1)&&(Cs=Re()+500,wl&&ur()))}function _t(t,e){var n=t.callbackNode;c1(t,e);var r=Va(t,t===$e?Qe:0);if(r===0)n!==null&&op(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&op(n),e===1)t.tag===0?uE(Jp.bind(null,t)):My(Jp.bind(null,t)),iE(function(){!(ie&6)&&ur()}),n=null;else{switch(cy(r)){case 1:n=Nh;break;case 4:n=ay;break;case 16:n=ka;break;case 536870912:n=ly;break;default:n=ka}n=Dv(n,Cv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Cv(t,e){if(_a=-1,wa=0,ie&6)throw Error(F(327));var n=t.callbackNode;if(gs()&&t.callbackNode!==n)return null;var r=Va(t,t===$e?Qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xa(t,r);else{e=r;var s=ie;ie|=2;var i=Rv();($e!==t||Qe!==e)&&(cn=null,Cs=Re()+500,Sr(t,e));do try{NE();break}catch(l){Av(t,l)}while(!0);$h(),Qa.current=i,ie=s,Ne!==null?e=0:($e=null,Qe=0,e=Oe)}if(e!==0){if(e===2&&(s=gc(t),s!==0&&(r=s,e=Hc(t,s))),e===1)throw n=Zi,Sr(t,0),Mn(t,r),_t(t,Re()),n;if(e===6)Mn(t,r);else{if(s=t.current.alternate,!(r&30)&&!RE(s)&&(e=Xa(t,r),e===2&&(i=gc(t),i!==0&&(r=i,e=Hc(t,i))),e===1))throw n=Zi,Sr(t,0),Mn(t,r),_t(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:_r(t,pt,cn);break;case 3:if(Mn(t,r),(r&130023424)===r&&(e=sd+500-Re(),10<e)){if(Va(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ic(_r.bind(null,t,pt,cn),e);break}_r(t,pt,cn);break;case 4:if(Mn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ut(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AE(r/1960))-r,10<r){t.timeoutHandle=Ic(_r.bind(null,t,pt,cn),r);break}_r(t,pt,cn);break;case 5:_r(t,pt,cn);break;default:throw Error(F(329))}}}return _t(t,Re()),t.callbackNode===n?Cv.bind(null,t):null}function Hc(t,e){var n=Ni;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=Xa(t,e),t!==2&&(e=pt,pt=n,e!==null&&qc(e)),t}function qc(t){pt===null?pt=t:pt.push.apply(pt,t)}function RE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!$t(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mn(t,e){for(e&=~rd,e&=~Il,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function Jp(t){if(ie&6)throw Error(F(327));gs();var e=Va(t,0);if(!(e&1))return _t(t,Re()),null;var n=Xa(t,e);if(t.tag!==0&&n===2){var r=gc(t);r!==0&&(e=r,n=Hc(t,r))}if(n===1)throw n=Zi,Sr(t,0),Mn(t,e),_t(t,Re()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_r(t,pt,cn),_t(t,Re()),null}function id(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(Cs=Re()+500,wl&&ur())}}function br(t){Ln!==null&&Ln.tag===0&&!(ie&6)&&gs();var e=ie;ie|=1;var n=Dt.transition,r=ae;try{if(Dt.transition=null,ae=1,t)return t()}finally{ae=r,Dt.transition=n,ie=e,!(ie&6)&&ur()}}function od(){xt=cs.current,ge(cs)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sE(n)),Ne!==null)for(n=Ne.return;n!==null;){var r=n;switch(zh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&La();break;case 3:Is(),ge(yt),ge(rt),Kh();break;case 5:Gh(r);break;case 4:Is();break;case 13:ge(we);break;case 19:ge(we);break;case 10:Hh(r.type._context);break;case 22:case 23:od()}n=n.return}if($e=t,Ne=t=Qn(t.current,null),Qe=xt=e,Oe=0,Zi=null,rd=Il=Dr=0,pt=Ni=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xr=null}return t}function Av(t,e){do{var n=Ne;try{if($h(),ga.current=Wa,qa){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qa=!1}if(Vr=0,Be=je=Ee=null,Ri=!1,Xi=0,nd.current=null,n===null||n.return===null){Oe=1,Zi=e,Ne=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var C=Fp(o);if(C!==null){C.flags&=-257,zp(C,o,l,i,e),C.mode&1&&Op(i,h,e),e=C,u=h;var R=e.updateQueue;if(R===null){var P=new Set;P.add(u),e.updateQueue=P}else R.add(u);break e}else{if(!(e&1)){Op(i,h,e),ad();break e}u=Error(F(426))}}else if(ye&&l.mode&1){var D=Fp(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),zp(D,o,l,i,e),Uh(Ss(u,l));break e}}i=u=Ss(u,l),Oe!==4&&(Oe=2),Ni===null?Ni=[i]:Ni.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=cv(i,u,e);Vp(i,_);break e;case 1:l=u;var w=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(qn===null||!qn.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=hv(i,l,e);Vp(i,N);break e}}i=i.return}while(i!==null)}Nv(n)}catch(O){e=O,Ne===n&&n!==null&&(Ne=n=n.return);continue}break}while(!0)}function Rv(){var t=Qa.current;return Qa.current=Wa,t===null?Wa:t}function ad(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),$e===null||!(Dr&268435455)&&!(Il&268435455)||Mn($e,Qe)}function Xa(t,e){var n=ie;ie|=2;var r=Rv();($e!==t||Qe!==e)&&(cn=null,Sr(t,e));do try{PE();break}catch(s){Av(t,s)}while(!0);if($h(),ie=n,Qa.current=r,Ne!==null)throw Error(F(261));return $e=null,Qe=0,Oe}function PE(){for(;Ne!==null;)Pv(Ne)}function NE(){for(;Ne!==null&&!t1();)Pv(Ne)}function Pv(t){var e=Vv(t.alternate,t,xt);t.memoizedProps=t.pendingProps,e===null?Nv(t):Ne=e,nd.current=null}function Nv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TE(n,e),n!==null){n.flags&=32767,Ne=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,Ne=null;return}}else if(n=xE(n,e,xt),n!==null){Ne=n;return}if(e=e.sibling,e!==null){Ne=e;return}Ne=e=t}while(e!==null);Oe===0&&(Oe=5)}function _r(t,e,n){var r=ae,s=Dt.transition;try{Dt.transition=null,ae=1,kE(t,e,n,r)}finally{Dt.transition=s,ae=r}return null}function kE(t,e,n,r){do gs();while(Ln!==null);if(ie&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(h1(t,i),t===$e&&(Ne=$e=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||na||(na=!0,Dv(ka,function(){return gs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dt.transition,Dt.transition=null;var o=ae;ae=1;var l=ie;ie|=4,nd.current=null,SE(t,n),Iv(n,t),Y1(xc),Da=!!Ec,xc=Ec=null,t.current=n,CE(n),n1(),ie=l,ae=o,Dt.transition=i}else t.current=n;if(na&&(na=!1,Ln=t,Ka=s),i=t.pendingLanes,i===0&&(qn=null),i1(n.stateNode),_t(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ga)throw Ga=!1,t=Bc,Bc=null,t;return Ka&1&&t.tag!==0&&gs(),i=t.pendingLanes,i&1?t===$c?ki++:(ki=0,$c=t):ki=0,ur(),null}function gs(){if(Ln!==null){var t=cy(Ka),e=Dt.transition,n=ae;try{if(Dt.transition=null,ae=16>t?16:t,Ln===null)var r=!1;else{if(t=Ln,Ln=null,Ka=0,ie&6)throw Error(F(331));var s=ie;for(ie|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(W=h;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:Pi(8,f,i)}var m=f.child;if(m!==null)m.return=f,W=m;else for(;W!==null;){f=W;var g=f.sibling,C=f.return;if(Ev(f),f===h){W=null;break}if(g!==null){g.return=C,W=g;break}W=C}}}var R=i.alternate;if(R!==null){var P=R.child;if(P!==null){R.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Pi(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,W=_;break e}W=i.return}}var w=t.current;for(W=w;W!==null;){o=W;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,W=T;else e:for(o=w;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Tl(9,l)}}catch(O){Ce(l,l.return,O)}if(l===o){W=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,W=N;break e}W=l.return}}if(ie=s,ur(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(ml,t)}catch{}r=!0}return r}finally{ae=n,Dt.transition=e}}return!1}function Zp(t,e,n){e=Ss(n,e),e=cv(t,e,1),t=Hn(t,e,1),e=ut(),t!==null&&(po(t,1,e),_t(t,e))}function Ce(t,e,n){if(t.tag===3)Zp(t,t,n);else for(;e!==null;){if(e.tag===3){Zp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){t=Ss(n,t),t=hv(e,t,1),e=Hn(e,t,1),t=ut(),e!==null&&(po(e,1,t),_t(e,t));break}}e=e.return}}function VE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Qe&n)===n&&(Oe===4||Oe===3&&(Qe&130023424)===Qe&&500>Re()-sd?Sr(t,0):rd|=n),_t(t,e)}function kv(t,e){e===0&&(t.mode&1?(e=Wo,Wo<<=1,!(Wo&130023424)&&(Wo=4194304)):e=1);var n=ut();t=yn(t,e),t!==null&&(po(t,e,n),_t(t,n))}function DE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kv(t,n)}function bE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),kv(t,n)}var Vv;Vv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yt.current)gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gt=!1,EE(t,e,n);gt=!!(t.flags&131072)}else gt=!1,ye&&e.flags&1048576&&jy(e,za,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;va(t,e),t=e.pendingProps;var s=Es(e,rt.current);ms(e,n),s=Yh(null,e,r,t,s,n);var i=Jh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vt(r)?(i=!0,Oa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wh(e),s.updater=xl,e.stateNode=s,s._reactInternals=e,kc(e,r,t,n),e=bc(null,e,r,!0,i,n)):(e.tag=0,ye&&i&&Fh(e),lt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(va(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=jE(r),t=Ot(r,t),s){case 0:e=Dc(null,e,r,t,n);break e;case 1:e=$p(null,e,r,t,n);break e;case 11:e=Up(null,e,r,t,n);break e;case 14:e=Bp(null,e,r,Ot(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Dc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),$p(t,e,r,s,n);case 3:e:{if(mv(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,By(t,e),$a(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ss(Error(F(423)),e),e=Hp(t,e,r,n,s);break e}else if(r!==s){s=Ss(Error(F(424)),e),e=Hp(t,e,r,n,s);break e}else for(Tt=$n(e.stateNode.containerInfo.firstChild),St=e,ye=!0,zt=null,n=zy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),r===s){e=vn(t,e,n);break e}lt(t,e,r,n)}e=e.child}return e;case 5:return $y(e),t===null&&Rc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Tc(r,s)?o=null:i!==null&&Tc(r,i)&&(e.flags|=32),pv(t,e),lt(t,e,o,n),e.child;case 6:return t===null&&Rc(e),null;case 13:return gv(t,e,n);case 4:return Qh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ts(e,null,r,n):lt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Up(t,e,r,s,n);case 7:return lt(t,e,e.pendingProps,n),e.child;case 8:return lt(t,e,e.pendingProps.children,n),e.child;case 12:return lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,de(Ua,r._currentValue),r._currentValue=o,i!==null)if($t(i.value,o)){if(i.children===s.children&&!yt.current){e=vn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=pn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Pc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Pc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}lt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ms(e,n),s=bt(s),r=r(s),e.flags|=1,lt(t,e,r,n),e.child;case 14:return r=e.type,s=Ot(r,e.pendingProps),s=Ot(r.type,s),Bp(t,e,r,s,n);case 15:return dv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),va(t,e),e.tag=1,vt(r)?(t=!0,Oa(e)):t=!1,ms(e,n),uv(e,r,s),kc(e,r,s,n),bc(null,e,r,!0,t,n);case 19:return yv(t,e,n);case 22:return fv(t,e,n)}throw Error(F(156,e.tag))};function Dv(t,e){return oy(t,e)}function ME(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,n,r){return new ME(t,e,n,r)}function ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jE(t){if(typeof t=="function")return ld(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ah)return 11;if(t===Rh)return 14}return 2}function Qn(t,e){var n=t.alternate;return n===null?(n=Vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ea(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ld(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case es:return Cr(n.children,s,i,e);case Ch:o=8,s|=8;break;case tc:return t=Vt(12,n,e,s|2),t.elementType=tc,t.lanes=i,t;case nc:return t=Vt(13,n,e,s),t.elementType=nc,t.lanes=i,t;case rc:return t=Vt(19,n,e,s),t.elementType=rc,t.lanes=i,t;case $g:return Sl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ug:o=10;break e;case Bg:o=9;break e;case Ah:o=11;break e;case Rh:o=14;break e;case Vn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Vt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Cr(t,e,n,r){return t=Vt(7,t,r,e),t.lanes=n,t}function Sl(t,e,n,r){return t=Vt(22,t,r,e),t.elementType=$g,t.lanes=n,t.stateNode={isHidden:!1},t}function Ou(t,e,n){return t=Vt(6,t,null,e),t.lanes=n,t}function Fu(t,e,n){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_u(0),this.expirationTimes=_u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_u(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ud(t,e,n,r,s,i,o,l,u){return t=new LE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wh(i),t}function OE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bv(t){if(!t)return er;t=t._reactInternals;e:{if(Or(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(vt(n))return by(t,n,e)}return e}function Mv(t,e,n,r,s,i,o,l,u){return t=ud(n,r,!0,t,s,i,o,l,u),t.context=bv(null),n=t.current,r=ut(),s=Wn(n),i=pn(r,s),i.callback=e??null,Hn(n,i,s),t.current.lanes=s,po(t,s,r),_t(t,r),t}function Cl(t,e,n,r){var s=e.current,i=ut(),o=Wn(s);return n=bv(n),e.context===null?e.context=n:e.pendingContext=n,e=pn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hn(s,e,o),t!==null&&(Bt(t,s,o,i),ma(t,s,o)),o}function Ya(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function em(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cd(t,e){em(t,e),(t=t.alternate)&&em(t,e)}function FE(){return null}var jv=typeof reportError=="function"?reportError:function(t){console.error(t)};function hd(t){this._internalRoot=t}Al.prototype.render=hd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Cl(t,e,null,null)};Al.prototype.unmount=hd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;br(function(){Cl(null,t,null,null)}),e[gn]=null}};function Al(t){this._internalRoot=t}Al.prototype.unstable_scheduleHydration=function(t){if(t){var e=fy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bn.length&&e!==0&&e<bn[n].priority;n++);bn.splice(n,0,t),n===0&&my(t)}};function dd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tm(){}function zE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Ya(o);i.call(h)}}var o=Mv(e,r,t,0,null,!1,!1,"",tm);return t._reactRootContainer=o,t[gn]=o.current,qi(t.nodeType===8?t.parentNode:t),br(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Ya(u);l.call(h)}}var u=ud(t,0,!1,null,null,!1,!1,"",tm);return t._reactRootContainer=u,t[gn]=u.current,qi(t.nodeType===8?t.parentNode:t),br(function(){Cl(e,u,n,r)}),u}function Pl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Ya(o);l.call(u)}}Cl(e,o,t,s)}else o=zE(n,e,t,s,r);return Ya(o)}hy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yi(e.pendingLanes);n!==0&&(kh(e,n|1),_t(e,Re()),!(ie&6)&&(Cs=Re()+500,ur()))}break;case 13:br(function(){var r=yn(t,1);if(r!==null){var s=ut();Bt(r,t,1,s)}}),cd(t,1)}};Vh=function(t){if(t.tag===13){var e=yn(t,134217728);if(e!==null){var n=ut();Bt(e,t,134217728,n)}cd(t,134217728)}};dy=function(t){if(t.tag===13){var e=Wn(t),n=yn(t,e);if(n!==null){var r=ut();Bt(n,t,e,r)}cd(t,e)}};fy=function(){return ae};py=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};fc=function(t,e,n){switch(e){case"input":if(oc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_l(r);if(!s)throw Error(F(90));qg(r),oc(r,s)}}}break;case"textarea":Qg(t,n);break;case"select":e=n.value,e!=null&&hs(t,!!n.multiple,e,!1)}};ey=id;ty=br;var UE={usingClientEntryPoint:!1,Events:[go,ss,_l,Jg,Zg,id]},pi={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BE={bundleType:pi.bundleType,version:pi.version,rendererPackageName:pi.rendererPackageName,rendererConfig:pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sy(t),t===null?null:t.stateNode},findFiberByHostInstance:pi.findFiberByHostInstance||FE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ra.isDisabled&&ra.supportsFiber)try{ml=ra.inject(BE),Jt=ra}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dd(e))throw Error(F(200));return OE(t,e,null,n)};At.createRoot=function(t,e){if(!dd(t))throw Error(F(299));var n=!1,r="",s=jv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ud(t,1,!1,null,null,n,!1,r,s),t[gn]=e.current,qi(t.nodeType===8?t.parentNode:t),new hd(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=sy(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return br(t)};At.hydrate=function(t,e,n){if(!Rl(e))throw Error(F(200));return Pl(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!dd(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=jv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Mv(e,null,t,1,n??null,s,!1,i,o),t[gn]=e.current,qi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Al(e)};At.render=function(t,e,n){if(!Rl(e))throw Error(F(200));return Pl(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!Rl(t))throw Error(F(40));return t._reactRootContainer?(br(function(){Pl(null,null,t,!1,function(){t._reactRootContainer=null,t[gn]=null})}),!0):!1};At.unstable_batchedUpdates=id;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rl(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Pl(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function Lv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lv)}catch(t){console.error(t)}}Lv(),Lg.exports=At;var $E=Lg.exports,nm=$E;Zu.createRoot=nm.createRoot,Zu.hydrateRoot=nm.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eo(){return eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eo.apply(this,arguments)}var On;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(On||(On={}));const rm="popstate";function HE(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Wc("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ja(s)}return WE(e,n,null,t)}function be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ov(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qE(){return Math.random().toString(36).substr(2,8)}function sm(t,e){return{usr:t.state,key:t.key,idx:e}}function Wc(t,e,n,r){return n===void 0&&(n=null),eo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?js(e):e,{state:n,key:e&&e.key||r||qE()})}function Ja(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function js(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WE(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=On.Pop,u=null,h=f();h==null&&(h=0,o.replaceState(eo({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=On.Pop;let D=f(),_=D==null?null:D-h;h=D,u&&u({action:l,location:P.location,delta:_})}function g(D,_){l=On.Push;let w=Wc(P.location,D,_);h=f()+1;let T=sm(w,h),N=P.createHref(w);try{o.pushState(T,"",N)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(N)}i&&u&&u({action:l,location:P.location,delta:1})}function C(D,_){l=On.Replace;let w=Wc(P.location,D,_);h=f();let T=sm(w,h),N=P.createHref(w);o.replaceState(T,"",N),i&&u&&u({action:l,location:P.location,delta:0})}function R(D){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof D=="string"?D:Ja(D);return w=w.replace(/ $/,"%20"),be(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let P={get action(){return l},get location(){return t(s,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(rm,m),u=D,()=>{s.removeEventListener(rm,m),u=null}},createHref(D){return e(s,D)},createURL:R,encodeLocation(D){let _=R(D);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:C,go(D){return o.go(D)}};return P}var im;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(im||(im={}));function QE(t,e,n){return n===void 0&&(n="/"),GE(t,e,n)}function GE(t,e,n,r){let s=typeof e=="string"?js(e):e,i=fd(s.pathname||"/",n);if(i==null)return null;let o=Fv(t);KE(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=ax(i);l=sx(o[u],h)}return l}function Fv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(be(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=Gn([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Fv(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:nx(h,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of zv(i.path))s(i,o,u)}),e}function zv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function KE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XE=/^:[\w-]+$/,YE=3,JE=2,ZE=1,ex=10,tx=-2,om=t=>t==="*";function nx(t,e){let n=t.split("/"),r=n.length;return n.some(om)&&(r+=tx),e&&(r+=JE),n.filter(s=>!om(s)).reduce((s,i)=>s+(XE.test(i)?YE:i===""?ZE:ex),r)}function rx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function sx(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=ix({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Gn([i,m.pathname]),pathnameBase:hx(Gn([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Gn([i,m.pathnameBase]))}return o}function ix(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ox(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,f,m)=>{let{paramName:g,isOptional:C}=f;if(g==="*"){let P=l[m]||"";o=i.slice(0,i.length-P.length).replace(/(.)\/+$/,"$1")}const R=l[m];return C&&!R?h[g]=void 0:h[g]=(R||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function ox(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ov(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function ax(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ov(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function fd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function lx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?js(t):t;return{pathname:n?n.startsWith("/")?n:ux(n,e):e,search:dx(r),hash:fx(s)}}function ux(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Uv(t,e){let n=cx(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Bv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=js(t):(s=eo({},t),be(!s.pathname||!s.pathname.includes("?"),zu("?","pathname","search",s)),be(!s.pathname||!s.pathname.includes("#"),zu("#","pathname","hash",s)),be(!s.search||!s.search.includes("#"),zu("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=lx(s,l),h=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const Gn=t=>t.join("/").replace(/\/\/+/g,"/"),hx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function px(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $v=["post","put","patch","delete"];new Set($v);const mx=["get",...$v];new Set(mx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function to(){return to=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},to.apply(this,arguments)}const pd=M.createContext(null),gx=M.createContext(null),Fr=M.createContext(null),Nl=M.createContext(null),zr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Hv=M.createContext(null);function yx(t,e){let{relative:n}=e===void 0?{}:e;vo()||be(!1);let{basename:r,navigator:s}=M.useContext(Fr),{hash:i,pathname:o,search:l}=Wv(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Gn([r,o])),s.createHref({pathname:u,search:l,hash:i})}function vo(){return M.useContext(Nl)!=null}function kl(){return vo()||be(!1),M.useContext(Nl).location}function qv(t){M.useContext(Fr).static||M.useLayoutEffect(t)}function Ls(){let{isDataRoute:t}=M.useContext(zr);return t?Nx():vx()}function vx(){vo()||be(!1);let t=M.useContext(pd),{basename:e,future:n,navigator:r}=M.useContext(Fr),{matches:s}=M.useContext(zr),{pathname:i}=kl(),o=JSON.stringify(Uv(s,n.v7_relativeSplatPath)),l=M.useRef(!1);return qv(()=>{l.current=!0}),M.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=Bv(h,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Gn([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}function Wv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Fr),{matches:s}=M.useContext(zr),{pathname:i}=kl(),o=JSON.stringify(Uv(s,r.v7_relativeSplatPath));return M.useMemo(()=>Bv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function _x(t,e){return wx(t,e)}function wx(t,e,n,r){vo()||be(!1);let{navigator:s}=M.useContext(Fr),{matches:i}=M.useContext(zr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=kl(),f;if(e){var m;let D=typeof e=="string"?js(e):e;u==="/"||(m=D.pathname)!=null&&m.startsWith(u)||be(!1),f=D}else f=h;let g=f.pathname||"/",C=g;if(u!=="/"){let D=u.replace(/^\//,"").split("/");C="/"+g.replace(/^\//,"").split("/").slice(D.length).join("/")}let R=QE(t,{pathname:C}),P=Sx(R&&R.map(D=>Object.assign({},D,{params:Object.assign({},l,D.params),pathname:Gn([u,s.encodeLocation?s.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?u:Gn([u,s.encodeLocation?s.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),i,n,r);return e&&P?M.createElement(Nl.Provider,{value:{location:to({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:On.Pop}},P):P}function Ex(){let t=Px(),e=px(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const xx=M.createElement(Ex,null);class Tx extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(zr.Provider,{value:this.props.routeContext},M.createElement(Hv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ix(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(pd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(zr.Provider,{value:e},r)}function Sx(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||be(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=f),m.route.id){let{loaderData:g,errors:C}=n,R=m.route.loader&&g[m.route.id]===void 0&&(!C||C[m.route.id]===void 0);if(m.route.lazy||R){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let C,R=!1,P=null,D=null;n&&(C=l&&m.route.id?l[m.route.id]:void 0,P=m.route.errorElement||xx,u&&(h<0&&g===0?(kx("route-fallback"),R=!0,D=null):h===g&&(R=!0,D=m.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,g+1)),w=()=>{let T;return C?T=P:R?T=D:m.route.Component?T=M.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=f,M.createElement(Ix,{match:m,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?M.createElement(Tx,{location:n.location,revalidation:n.revalidation,component:P,error:C,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var Qv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Qv||{}),Gv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gv||{});function Cx(t){let e=M.useContext(pd);return e||be(!1),e}function Ax(t){let e=M.useContext(gx);return e||be(!1),e}function Rx(t){let e=M.useContext(zr);return e||be(!1),e}function Kv(t){let e=Rx(),n=e.matches[e.matches.length-1];return n.route.id||be(!1),n.route.id}function Px(){var t;let e=M.useContext(Hv),n=Ax(),r=Kv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Nx(){let{router:t}=Cx(Qv.UseNavigateStable),e=Kv(Gv.UseNavigateStable),n=M.useRef(!1);return qv(()=>{n.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,to({fromRouteId:e},i)))},[t,e])}const am={};function kx(t,e,n){am[t]||(am[t]=!0)}function Vx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Gr(t){be(!1)}function Dx(t){let{basename:e="/",children:n=null,location:r,navigationType:s=On.Pop,navigator:i,static:o=!1,future:l}=t;vo()&&be(!1);let u=e.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:i,static:o,future:to({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=js(r));let{pathname:f="/",search:m="",hash:g="",state:C=null,key:R="default"}=r,P=M.useMemo(()=>{let D=fd(f,u);return D==null?null:{location:{pathname:D,search:m,hash:g,state:C,key:R},navigationType:s}},[u,f,m,g,C,R,s]);return P==null?null:M.createElement(Fr.Provider,{value:h},M.createElement(Nl.Provider,{children:n,value:P}))}function bx(t){let{children:e,location:n}=t;return _x(Qc(e),n)}new Promise(()=>{});function Qc(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,Qc(r.props.children,i));return}r.type!==Gr&&be(!1),!r.props.index||!r.props.children||be(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gc(){return Gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gc.apply(this,arguments)}function Mx(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function jx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Lx(t,e){return t.button===0&&(!e||e==="_self")&&!jx(t)}const Ox=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Fx="6";try{window.__reactRouterVersion=Fx}catch{}const zx="startTransition",lm=Vw[zx];function Ux(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=HE({window:s,v5Compat:!0}));let o=i.current,[l,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},f=M.useCallback(m=>{h&&lm?lm(()=>u(m)):u(m)},[u,h]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.useEffect(()=>Vx(r),[r]),M.createElement(Dx,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Bx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sa=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:h,preventScrollReset:f,viewTransition:m}=e,g=Mx(e,Ox),{basename:C}=M.useContext(Fr),R,P=!1;if(typeof h=="string"&&$x.test(h)&&(R=h,Bx))try{let T=new URL(window.location.href),N=h.startsWith("//")?new URL(T.protocol+h):new URL(h),O=fd(N.pathname,C);N.origin===T.origin&&O!=null?h=O+N.search+N.hash:P=!0}catch{}let D=yx(h,{relative:s}),_=Hx(h,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function w(T){r&&r(T),T.defaultPrevented||_(T)}return M.createElement("a",Gc({},g,{href:R||D,onClick:P||i?r:w,ref:n,target:u}))});var um;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(um||(um={}));var cm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cm||(cm={}));function Hx(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=Ls(),h=kl(),f=Wv(t,{relative:o});return M.useCallback(m=>{if(Lx(m,n)){m.preventDefault();let g=r!==void 0?r:Ja(h)===Ja(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[h,u,f,r,s,n,t,i,o,l])}const qx=()=>{};var hm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Wx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Yv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,C=h&63;u||(C=64,o||(g=64)),r.push(n[f],n[m],n[g],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Wx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new Qx;const g=i<<2|l>>4;if(r.push(g),h!==64){const C=l<<4&240|h>>2;if(r.push(C),m!==64){const R=h<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Qx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gx=function(t){const e=Xv(t);return Yv.encodeByteArray(e,!0)},Za=function(t){return Gx(t).replace(/\./g,"")},Kx=function(t){try{return Yv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=()=>Xx().__FIREBASE_DEFAULTS__,Jx=()=>{if(typeof process>"u"||typeof hm>"u")return;const t=hm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Zx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kx(t[1]);return e&&JSON.parse(e)},md=()=>{try{return qx()||Yx()||Jx()||Zx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eT=t=>{var e,n;return(n=(e=md())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tT=t=>{const e=eT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Jv=()=>{var t;return(t=md())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Za(JSON.stringify(n)),Za(JSON.stringify(o)),""].join(".")}const Vi={};function iT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vi))Vi[e]?t.emulator.push(e):t.prod.push(e);return t}function oT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let dm=!1;function aT(t,e){if(typeof window>"u"||typeof document>"u"||!gd(window.location.host)||Vi[t]===e||Vi[t]||dm)return;Vi[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=iT().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,C){g.setAttribute("width","24"),g.setAttribute("id",C),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{dm=!0,o()},g}function f(g,C){g.setAttribute("id",C),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=oT(r),C=n("text"),R=document.getElementById(C)||document.createElement("span"),P=n("learnmore"),D=document.getElementById(P)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const T=g.element;l(T),f(D,P);const N=h();u(w,_),T.append(w,R,D,N),document.body.appendChild(T)}i?(R.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uT(){var e;const t=(e=md())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cT(){return!uT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hT(){try{return typeof indexedDB=="object"}catch{return!1}}function dT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="FirebaseError";class Os extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fT,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zv.prototype.create)}}class Zv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?pT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Os(s,l,r)}}function pT(t,e){return t.replace(mT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const mT=/\{\$([^}]+)}/g;function el(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(fm(i)&&fm(o)){if(!el(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return t&&t._delegate?t._delegate:t}class no{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vT(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yT(t){return t===wr?void 0:t}function vT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const wT={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},ET=se.INFO,xT={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},TT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=xT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e_{constructor(e){this.name=e,this._logLevel=ET,this._logHandler=TT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const IT=(t,e)=>e.some(n=>t instanceof n);let pm,mm;function ST(){return pm||(pm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CT(){return mm||(mm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t_=new WeakMap,Kc=new WeakMap,n_=new WeakMap,Uu=new WeakMap,yd=new WeakMap;function AT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Kn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&t_.set(n,t)}).catch(()=>{}),yd.set(e,t),e}function RT(t){if(Kc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Kc.set(t,e)}let Xc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||n_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PT(t){Xc=t(Xc)}function NT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bu(this),e,...n);return n_.set(r,e.sort?e.sort():[e]),Kn(r)}:CT().includes(t)?function(...e){return t.apply(Bu(this),e),Kn(t_.get(this))}:function(...e){return Kn(t.apply(Bu(this),e))}}function kT(t){return typeof t=="function"?NT(t):(t instanceof IDBTransaction&&RT(t),IT(t,ST())?new Proxy(t,Xc):t)}function Kn(t){if(t instanceof IDBRequest)return AT(t);if(Uu.has(t))return Uu.get(t);const e=kT(t);return e!==t&&(Uu.set(t,e),yd.set(e,t)),e}const Bu=t=>yd.get(t);function VT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Kn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Kn(o.result),u.oldVersion,u.newVersion,Kn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const DT=["get","getKey","getAll","getAllKeys","count"],bT=["put","add","delete","clear"],$u=new Map;function gm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($u.get(e))return $u.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=bT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||DT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return $u.set(e,i),i}PT(t=>({...t,get:(e,n,r)=>gm(e,n)||t.get(e,n,r),has:(e,n)=>!!gm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yc="@firebase/app",ym="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new e_("@firebase/app"),LT="@firebase/app-compat",OT="@firebase/analytics-compat",FT="@firebase/analytics",zT="@firebase/app-check-compat",UT="@firebase/app-check",BT="@firebase/auth",$T="@firebase/auth-compat",HT="@firebase/database",qT="@firebase/data-connect",WT="@firebase/database-compat",QT="@firebase/functions",GT="@firebase/functions-compat",KT="@firebase/installations",XT="@firebase/installations-compat",YT="@firebase/messaging",JT="@firebase/messaging-compat",ZT="@firebase/performance",eI="@firebase/performance-compat",tI="@firebase/remote-config",nI="@firebase/remote-config-compat",rI="@firebase/storage",sI="@firebase/storage-compat",iI="@firebase/firestore",oI="@firebase/ai",aI="@firebase/firestore-compat",lI="firebase",uI="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="[DEFAULT]",cI={[Yc]:"fire-core",[LT]:"fire-core-compat",[FT]:"fire-analytics",[OT]:"fire-analytics-compat",[UT]:"fire-app-check",[zT]:"fire-app-check-compat",[BT]:"fire-auth",[$T]:"fire-auth-compat",[HT]:"fire-rtdb",[qT]:"fire-data-connect",[WT]:"fire-rtdb-compat",[QT]:"fire-fn",[GT]:"fire-fn-compat",[KT]:"fire-iid",[XT]:"fire-iid-compat",[YT]:"fire-fcm",[JT]:"fire-fcm-compat",[ZT]:"fire-perf",[eI]:"fire-perf-compat",[tI]:"fire-rc",[nI]:"fire-rc-compat",[rI]:"fire-gcs",[sI]:"fire-gcs-compat",[iI]:"fire-fst",[aI]:"fire-fst-compat",[oI]:"fire-vertex","fire-js":"fire-js",[lI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Map,hI=new Map,Zc=new Map;function vm(t,e){try{t.container.addComponent(e)}catch(n){_n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nl(t){const e=t.name;if(Zc.has(e))return _n.debug(`There were multiple attempts to register component ${e}.`),!1;Zc.set(e,t);for(const n of tl.values())vm(n,t);for(const n of hI.values())vm(n,t);return!0}function dI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fI(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xn=new Zv("app","Firebase",pI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=uI;function r_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Jc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Xn.create("bad-app-name",{appName:String(s)});if(n||(n=Jv()),!n)throw Xn.create("no-options");const i=tl.get(s);if(i){if(el(n,i.options)&&el(r,i.config))return i;throw Xn.create("duplicate-app",{appName:s})}const o=new _T(s);for(const u of Zc.values())o.addComponent(u);const l=new mI(n,r,o);return tl.set(s,l),l}function yI(t=Jc){const e=tl.get(t);if(!e&&t===Jc&&Jv())return r_();if(!e)throw Xn.create("no-app",{appName:t});return e}function ys(t,e,n){let r=cI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_n.warn(o.join(" "));return}nl(new no(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="firebase-heartbeat-database",_I=1,ro="firebase-heartbeat-store";let Hu=null;function s_(){return Hu||(Hu=VT(vI,_I,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xn.create("idb-open",{originalErrorMessage:t.message})})),Hu}async function wI(t){try{const n=(await s_()).transaction(ro),r=await n.objectStore(ro).get(i_(t));return await n.done,r}catch(e){if(e instanceof Os)_n.warn(e.message);else{const n=Xn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_n.warn(n.message)}}}async function _m(t,e){try{const r=(await s_()).transaction(ro,"readwrite");await r.objectStore(ro).put(e,i_(t)),await r.done}catch(n){if(n instanceof Os)_n.warn(n.message);else{const r=Xn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_n.warn(r.message)}}}function i_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=1024,xI=30;class TI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>xI){const o=CI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_n.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wm(),{heartbeatsToSend:r,unsentEntries:s}=II(this._heartbeatsCache.heartbeats),i=Za(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return _n.warn(n),""}}}function wm(){return new Date().toISOString().substring(0,10)}function II(t,e=EI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Em(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Em(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hT()?dT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _m(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _m(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Em(t){return Za(JSON.stringify({version:2,heartbeats:t})).length}function CI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t){nl(new no("platform-logger",e=>new MT(e),"PRIVATE")),nl(new no("heartbeat",e=>new TI(e),"PRIVATE")),ys(Yc,ym,t),ys(Yc,ym,"esm2020"),ys("fire-js","")}AI("");var RI="firebase",PI="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(RI,PI,"app");var xm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yn,o_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function x(){}x.prototype=v.prototype,E.F=v.prototype,E.prototype=new x,E.prototype.constructor=E,E.D=function(S,A,k){for(var I=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)I[Ie-2]=arguments[Ie];return v.prototype[A].apply(S,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,v,x){x||(x=0);const S=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)S[A]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(A=0;A<16;++A)S[A]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=E.g[0],x=E.g[1],A=E.g[2];let k=E.g[3],I;I=v+(k^x&(A^k))+S[0]+3614090360&4294967295,v=x+(I<<7&4294967295|I>>>25),I=k+(A^v&(x^A))+S[1]+3905402710&4294967295,k=v+(I<<12&4294967295|I>>>20),I=A+(x^k&(v^x))+S[2]+606105819&4294967295,A=k+(I<<17&4294967295|I>>>15),I=x+(v^A&(k^v))+S[3]+3250441966&4294967295,x=A+(I<<22&4294967295|I>>>10),I=v+(k^x&(A^k))+S[4]+4118548399&4294967295,v=x+(I<<7&4294967295|I>>>25),I=k+(A^v&(x^A))+S[5]+1200080426&4294967295,k=v+(I<<12&4294967295|I>>>20),I=A+(x^k&(v^x))+S[6]+2821735955&4294967295,A=k+(I<<17&4294967295|I>>>15),I=x+(v^A&(k^v))+S[7]+4249261313&4294967295,x=A+(I<<22&4294967295|I>>>10),I=v+(k^x&(A^k))+S[8]+1770035416&4294967295,v=x+(I<<7&4294967295|I>>>25),I=k+(A^v&(x^A))+S[9]+2336552879&4294967295,k=v+(I<<12&4294967295|I>>>20),I=A+(x^k&(v^x))+S[10]+4294925233&4294967295,A=k+(I<<17&4294967295|I>>>15),I=x+(v^A&(k^v))+S[11]+2304563134&4294967295,x=A+(I<<22&4294967295|I>>>10),I=v+(k^x&(A^k))+S[12]+1804603682&4294967295,v=x+(I<<7&4294967295|I>>>25),I=k+(A^v&(x^A))+S[13]+4254626195&4294967295,k=v+(I<<12&4294967295|I>>>20),I=A+(x^k&(v^x))+S[14]+2792965006&4294967295,A=k+(I<<17&4294967295|I>>>15),I=x+(v^A&(k^v))+S[15]+1236535329&4294967295,x=A+(I<<22&4294967295|I>>>10),I=v+(A^k&(x^A))+S[1]+4129170786&4294967295,v=x+(I<<5&4294967295|I>>>27),I=k+(x^A&(v^x))+S[6]+3225465664&4294967295,k=v+(I<<9&4294967295|I>>>23),I=A+(v^x&(k^v))+S[11]+643717713&4294967295,A=k+(I<<14&4294967295|I>>>18),I=x+(k^v&(A^k))+S[0]+3921069994&4294967295,x=A+(I<<20&4294967295|I>>>12),I=v+(A^k&(x^A))+S[5]+3593408605&4294967295,v=x+(I<<5&4294967295|I>>>27),I=k+(x^A&(v^x))+S[10]+38016083&4294967295,k=v+(I<<9&4294967295|I>>>23),I=A+(v^x&(k^v))+S[15]+3634488961&4294967295,A=k+(I<<14&4294967295|I>>>18),I=x+(k^v&(A^k))+S[4]+3889429448&4294967295,x=A+(I<<20&4294967295|I>>>12),I=v+(A^k&(x^A))+S[9]+568446438&4294967295,v=x+(I<<5&4294967295|I>>>27),I=k+(x^A&(v^x))+S[14]+3275163606&4294967295,k=v+(I<<9&4294967295|I>>>23),I=A+(v^x&(k^v))+S[3]+4107603335&4294967295,A=k+(I<<14&4294967295|I>>>18),I=x+(k^v&(A^k))+S[8]+1163531501&4294967295,x=A+(I<<20&4294967295|I>>>12),I=v+(A^k&(x^A))+S[13]+2850285829&4294967295,v=x+(I<<5&4294967295|I>>>27),I=k+(x^A&(v^x))+S[2]+4243563512&4294967295,k=v+(I<<9&4294967295|I>>>23),I=A+(v^x&(k^v))+S[7]+1735328473&4294967295,A=k+(I<<14&4294967295|I>>>18),I=x+(k^v&(A^k))+S[12]+2368359562&4294967295,x=A+(I<<20&4294967295|I>>>12),I=v+(x^A^k)+S[5]+4294588738&4294967295,v=x+(I<<4&4294967295|I>>>28),I=k+(v^x^A)+S[8]+2272392833&4294967295,k=v+(I<<11&4294967295|I>>>21),I=A+(k^v^x)+S[11]+1839030562&4294967295,A=k+(I<<16&4294967295|I>>>16),I=x+(A^k^v)+S[14]+4259657740&4294967295,x=A+(I<<23&4294967295|I>>>9),I=v+(x^A^k)+S[1]+2763975236&4294967295,v=x+(I<<4&4294967295|I>>>28),I=k+(v^x^A)+S[4]+1272893353&4294967295,k=v+(I<<11&4294967295|I>>>21),I=A+(k^v^x)+S[7]+4139469664&4294967295,A=k+(I<<16&4294967295|I>>>16),I=x+(A^k^v)+S[10]+3200236656&4294967295,x=A+(I<<23&4294967295|I>>>9),I=v+(x^A^k)+S[13]+681279174&4294967295,v=x+(I<<4&4294967295|I>>>28),I=k+(v^x^A)+S[0]+3936430074&4294967295,k=v+(I<<11&4294967295|I>>>21),I=A+(k^v^x)+S[3]+3572445317&4294967295,A=k+(I<<16&4294967295|I>>>16),I=x+(A^k^v)+S[6]+76029189&4294967295,x=A+(I<<23&4294967295|I>>>9),I=v+(x^A^k)+S[9]+3654602809&4294967295,v=x+(I<<4&4294967295|I>>>28),I=k+(v^x^A)+S[12]+3873151461&4294967295,k=v+(I<<11&4294967295|I>>>21),I=A+(k^v^x)+S[15]+530742520&4294967295,A=k+(I<<16&4294967295|I>>>16),I=x+(A^k^v)+S[2]+3299628645&4294967295,x=A+(I<<23&4294967295|I>>>9),I=v+(A^(x|~k))+S[0]+4096336452&4294967295,v=x+(I<<6&4294967295|I>>>26),I=k+(x^(v|~A))+S[7]+1126891415&4294967295,k=v+(I<<10&4294967295|I>>>22),I=A+(v^(k|~x))+S[14]+2878612391&4294967295,A=k+(I<<15&4294967295|I>>>17),I=x+(k^(A|~v))+S[5]+4237533241&4294967295,x=A+(I<<21&4294967295|I>>>11),I=v+(A^(x|~k))+S[12]+1700485571&4294967295,v=x+(I<<6&4294967295|I>>>26),I=k+(x^(v|~A))+S[3]+2399980690&4294967295,k=v+(I<<10&4294967295|I>>>22),I=A+(v^(k|~x))+S[10]+4293915773&4294967295,A=k+(I<<15&4294967295|I>>>17),I=x+(k^(A|~v))+S[1]+2240044497&4294967295,x=A+(I<<21&4294967295|I>>>11),I=v+(A^(x|~k))+S[8]+1873313359&4294967295,v=x+(I<<6&4294967295|I>>>26),I=k+(x^(v|~A))+S[15]+4264355552&4294967295,k=v+(I<<10&4294967295|I>>>22),I=A+(v^(k|~x))+S[6]+2734768916&4294967295,A=k+(I<<15&4294967295|I>>>17),I=x+(k^(A|~v))+S[13]+1309151649&4294967295,x=A+(I<<21&4294967295|I>>>11),I=v+(A^(x|~k))+S[4]+4149444226&4294967295,v=x+(I<<6&4294967295|I>>>26),I=k+(x^(v|~A))+S[11]+3174756917&4294967295,k=v+(I<<10&4294967295|I>>>22),I=A+(v^(k|~x))+S[2]+718787259&4294967295,A=k+(I<<15&4294967295|I>>>17),I=x+(k^(A|~v))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+k&4294967295}r.prototype.v=function(E,v){v===void 0&&(v=E.length);const x=v-this.blockSize,S=this.C;let A=this.h,k=0;for(;k<v;){if(A==0)for(;k<=x;)s(this,E,k),k+=this.blockSize;if(typeof E=="string"){for(;k<v;)if(S[A++]=E.charCodeAt(k++),A==this.blockSize){s(this,S),A=0;break}}else for(;k<v;)if(S[A++]=E[k++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=v},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;v=this.o*8;for(var x=E.length-8;x<E.length;++x)E[x]=v&255,v/=256;for(this.v(E),E=Array(16),v=0,x=0;x<4;++x)for(let S=0;S<32;S+=8)E[v++]=this.g[x]>>>S&255;return E};function i(E,v){var x=l;return Object.prototype.hasOwnProperty.call(x,E)?x[E]:x[E]=v(E)}function o(E,v){this.h=v;const x=[];let S=!0;for(let A=E.length-1;A>=0;A--){const k=E[A]|0;S&&k==v||(x[A]=k,S=!1)}this.g=x}var l={};function u(E){return-128<=E&&E<128?i(E,function(v){return new o([v|0],v<0?-1:0)}):new o([E|0],E<0?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return D(h(-E));const v=[];let x=1;for(let S=0;E>=x;S++)v[S]=E/x|0,x*=4294967296;return new o(v,0)}function f(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return D(f(E.substring(1),v));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=h(Math.pow(v,8));let S=m;for(let k=0;k<E.length;k+=8){var A=Math.min(8,E.length-k);const I=parseInt(E.substring(k,k+A),v);A<8?(A=h(Math.pow(v,A)),S=S.j(A).add(h(I))):(S=S.j(x),S=S.add(h(I)))}return S}var m=u(0),g=u(1),C=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-D(this).m();let E=0,v=1;for(let x=0;x<this.g.length;x++){const S=this.i(x);E+=(S>=0?S:4294967296+S)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(P(this))return"-"+D(this).toString(E);const v=h(Math.pow(E,6));var x=this;let S="";for(;;){const A=N(x,v).g;x=_(x,A.j(v));let k=((x.g.length>0?x.g[0]:x.h)>>>0).toString(E);if(x=A,R(x))return k+S;for(;k.length<6;)k="0"+k;S=k+S}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(let v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function P(E){return E.h==-1}t.l=function(E){return E=_(this,E),P(E)?-1:R(E)?0:1};function D(E){const v=E.g.length,x=[];for(let S=0;S<v;S++)x[S]=~E.g[S];return new o(x,~E.h).add(g)}t.abs=function(){return P(this)?D(this):this},t.add=function(E){const v=Math.max(this.g.length,E.g.length),x=[];let S=0;for(let A=0;A<=v;A++){let k=S+(this.i(A)&65535)+(E.i(A)&65535),I=(k>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);S=I>>>16,k&=65535,I&=65535,x[A]=I<<16|k}return new o(x,x[x.length-1]&-2147483648?-1:0)};function _(E,v){return E.add(D(v))}t.j=function(E){if(R(this)||R(E))return m;if(P(this))return P(E)?D(this).j(D(E)):D(D(this).j(E));if(P(E))return D(this.j(D(E)));if(this.l(C)<0&&E.l(C)<0)return h(this.m()*E.m());const v=this.g.length+E.g.length,x=[];for(var S=0;S<2*v;S++)x[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<E.g.length;A++){const k=this.i(S)>>>16,I=this.i(S)&65535,Ie=E.i(A)>>>16,jt=E.i(A)&65535;x[2*S+2*A]+=I*jt,w(x,2*S+2*A),x[2*S+2*A+1]+=k*jt,w(x,2*S+2*A+1),x[2*S+2*A+1]+=I*Ie,w(x,2*S+2*A+1),x[2*S+2*A+2]+=k*Ie,w(x,2*S+2*A+2)}for(E=0;E<v;E++)x[E]=x[2*E+1]<<16|x[2*E];for(E=v;E<2*v;E++)x[E]=0;return new o(x,0)};function w(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function T(E,v){this.g=E,this.h=v}function N(E,v){if(R(v))throw Error("division by zero");if(R(E))return new T(m,m);if(P(E))return v=N(D(E),v),new T(D(v.g),D(v.h));if(P(v))return v=N(E,D(v)),new T(D(v.g),v.h);if(E.g.length>30){if(P(E)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var x=g,S=v;S.l(E)<=0;)x=O(x),S=O(S);var A=z(x,1),k=z(S,1);for(S=z(S,2),x=z(x,2);!R(S);){var I=k.add(S);I.l(E)<=0&&(A=A.add(x),k=I),S=z(S,1),x=z(x,1)}return v=_(E,A.j(v)),new T(A,v)}for(A=m;E.l(v)>=0;){for(x=Math.max(1,Math.floor(E.m()/v.m())),S=Math.ceil(Math.log(x)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),k=h(x),I=k.j(v);P(I)||I.l(E)>0;)x-=S,k=h(x),I=k.j(v);R(k)&&(k=g),A=A.add(k),E=_(E,I)}return new T(A,E)}t.B=function(E){return N(this,E).h},t.and=function(E){const v=Math.max(this.g.length,E.g.length),x=[];for(let S=0;S<v;S++)x[S]=this.i(S)&E.i(S);return new o(x,this.h&E.h)},t.or=function(E){const v=Math.max(this.g.length,E.g.length),x=[];for(let S=0;S<v;S++)x[S]=this.i(S)|E.i(S);return new o(x,this.h|E.h)},t.xor=function(E){const v=Math.max(this.g.length,E.g.length),x=[];for(let S=0;S<v;S++)x[S]=this.i(S)^E.i(S);return new o(x,this.h^E.h)};function O(E){const v=E.g.length+1,x=[];for(let S=0;S<v;S++)x[S]=E.i(S)<<1|E.i(S-1)>>>31;return new o(x,E.h)}function z(E,v){const x=v>>5;v%=32;const S=E.g.length-x,A=[];for(let k=0;k<S;k++)A[k]=v>0?E.i(k+x)>>>v|E.i(k+x+1)<<32-v:E.i(k+x);return new o(A,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Yn=o}).apply(typeof xm<"u"?xm:typeof self<"u"?self:typeof window<"u"?window:{});var ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a_,_i,l_,xa,eh,u_,c_,h_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ia=="object"&&ia];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var d=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var V=a[y];if(!(V in d))break e;d=d[V]}a=a[a.length-1],y=d[a],c=c(y),c!=y&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(c){var d=[],y;for(y in c)Object.prototype.hasOwnProperty.call(c,y)&&d.push([y,c[y]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,d){return a.call.apply(a.bind,arguments)}function h(a,c,d){return h=u,h.apply(null,arguments)}function f(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function m(a,c){function d(){}d.prototype=c.prototype,a.Z=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(y,V,b){for(var U=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)U[Z-2]=arguments[Z];return c.prototype[V].apply(y,U)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function C(a){const c=a.length;if(c>0){const d=Array(c);for(let y=0;y<c;y++)d[y]=a[y];return d}return[]}function R(a,c){for(let y=1;y<arguments.length;y++){const V=arguments[y];var d=typeof V;if(d=d!="object"?d:V?Array.isArray(V)?"array":d:"null",d=="array"||d=="object"&&typeof V.length=="number"){d=a.length||0;const b=V.length||0;a.length=d+b;for(let U=0;U<b;U++)a[d+U]=V[U]}else a.push(V)}}class P{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function D(a){o.setTimeout(()=>{throw a},0)}function _(){var a=E;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class w{constructor(){this.h=this.g=null}add(c,d){const y=T.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var T=new P(()=>new N,a=>a.reset());class N{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let O,z=!1,E=new w,v=()=>{const a=Promise.resolve(void 0);O=()=>{a.then(x)}};function x(){for(var a;a=_();){try{a.h.call(a.g)}catch(d){D(d)}var c=T;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}z=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,c),o.removeEventListener("test",d,c)}catch{}return a}();function I(a){return/^[\s\xa0]*$/.test(a)}function Ie(a,c){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}m(Ie,A),Ie.prototype.init=function(a,c){const d=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var jt="closure_listenable_"+(Math.random()*1e6|0),dr=0;function Tn(a,c,d,y,V){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=V,this.key=++dr,this.da=this.fa=!1}function B(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function X(a,c,d){for(const y in a)c.call(d,a[y],y,a)}function G(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function ce(a){const c={};for(const d in a)c[d]=a[d];return c}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ln(a,c){let d,y;for(let V=1;V<arguments.length;V++){y=arguments[V];for(d in y)a[d]=y[d];for(let b=0;b<ve.length;b++)d=ve[b],Object.prototype.hasOwnProperty.call(y,d)&&(a[d]=y[d])}}function dt(a){this.src=a,this.g={},this.h=0}dt.prototype.add=function(a,c,d,y,V){const b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);const U=it(a,c,y,V);return U>-1?(c=a[U],d||(c.fa=!1)):(c=new Tn(c,this.src,b,!!y,V),c.fa=d,a.push(c)),c};function un(a,c){const d=c.type;if(d in a.g){var y=a.g[d],V=Array.prototype.indexOf.call(y,c,void 0),b;(b=V>=0)&&Array.prototype.splice.call(y,V,1),b&&(B(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function it(a,c,d,y){for(let V=0;V<a.length;++V){const b=a[V];if(!b.da&&b.listener==c&&b.capture==!!d&&b.ha==y)return V}return-1}var qt="closure_lm_"+(Math.random()*1e6|0),Hs={};function $r(a,c,d,y,V){if(Array.isArray(c)){for(let b=0;b<c.length;b++)$r(a,c[b],d,y,V);return null}return d=Jd(d),a&&a[jt]?a.J(c,d,l(y)?!!y.capture:!1,V):Ao(a,c,d,!1,y,V)}function Ao(a,c,d,y,V,b){if(!c)throw Error("Invalid event type");const U=l(V)?!!V.capture:!!V;let Z=In(a);if(Z||(a[qt]=Z=new dt(a)),d=Z.add(c,d,y,U,b),d.proxy)return d;if(y=Xl(),d.proxy=y,y.src=a,y.listener=d,a.addEventListener)k||(V=U),V===void 0&&(V=!1),a.addEventListener(c.toString(),y,V);else if(a.attachEvent)a.attachEvent(le(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Xl(){function a(d){return c.call(a.src,a.listener,d)}const c=_e;return a}function Ro(a,c,d,y,V){if(Array.isArray(c))for(var b=0;b<c.length;b++)Ro(a,c[b],d,y,V);else y=l(y)?!!y.capture:!!y,d=Jd(d),a&&a[jt]?(a=a.i,b=String(c).toString(),b in a.g&&(c=a.g[b],d=it(c,d,y,V),d>-1&&(B(c[d]),Array.prototype.splice.call(c,d,1),c.length==0&&(delete a.g[b],a.h--)))):a&&(a=In(a))&&(c=a.g[c.toString()],a=-1,c&&(a=it(c,d,y,V)),(d=a>-1?c[a]:null)&&q(d))}function q(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[jt])un(c.i,a);else{var d=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(d,y,a.capture):c.detachEvent?c.detachEvent(le(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=In(c))?(un(d,a),d.h==0&&(d.src=null,c[qt]=null)):B(a)}}}function le(a){return a in Hs?Hs[a]:Hs[a]="on"+a}function _e(a,c){if(a.da)a=!0;else{c=new Ie(c,this);const d=a.listener,y=a.ha||a.src;a.fa&&q(a),a=d.call(y,c)}return a}function In(a){return a=a[qt],a instanceof dt?a:null}var wt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Jd(a){return typeof a=="function"?a:(a[wt]||(a[wt]=function(c){return a.handleEvent(c)}),a[wt])}function Xe(){S.call(this),this.i=new dt(this),this.M=this,this.G=null}m(Xe,S),Xe.prototype[jt]=!0,Xe.prototype.removeEventListener=function(a,c,d,y){Ro(this,a,c,d,y)};function ot(a,c){var d,y=a.G;if(y)for(d=[];y;y=y.G)d.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new A(c,a);else if(c instanceof A)c.target=c.target||a;else{var V=c;c=new A(y,a),ln(c,V)}V=!0;let b,U;if(d)for(U=d.length-1;U>=0;U--)b=c.g=d[U],V=Po(b,y,!0,c)&&V;if(b=c.g=a,V=Po(b,y,!0,c)&&V,V=Po(b,y,!1,c)&&V,d)for(U=0;U<d.length;U++)b=c.g=d[U],V=Po(b,y,!1,c)&&V}Xe.prototype.N=function(){if(Xe.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const d=a.g[c];for(let y=0;y<d.length;y++)B(d[y]);delete a.g[c],a.h--}}this.G=null},Xe.prototype.J=function(a,c,d,y){return this.i.add(String(a),c,!1,d,y)},Xe.prototype.K=function(a,c,d,y){return this.i.add(String(a),c,!0,d,y)};function Po(a,c,d,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let V=!0;for(let b=0;b<c.length;++b){const U=c[b];if(U&&!U.da&&U.capture==d){const Z=U.listener,Me=U.ha||U.src;U.fa&&un(a.i,U),V=Z.call(Me,y)!==!1&&V}}return V&&!y.defaultPrevented}function $0(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function Zd(a){a.g=$0(()=>{a.g=null,a.i&&(a.i=!1,Zd(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class H0 extends S{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Zd(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(a){S.call(this),this.h=a,this.g={}}m(qs,S);var ef=[];function tf(a){X(a.g,function(c,d){this.g.hasOwnProperty(d)&&q(c)},a),a.g={}}qs.prototype.N=function(){qs.Z.N.call(this),tf(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yl=o.JSON.stringify,q0=o.JSON.parse,W0=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function nf(){}function rf(){}var Ws={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jl(){A.call(this,"d")}m(Jl,A);function Zl(){A.call(this,"c")}m(Zl,A);var fr={},sf=null;function No(){return sf=sf||new Xe}fr.Ia="serverreachability";function of(a){A.call(this,fr.Ia,a)}m(of,A);function Qs(a){const c=No();ot(c,new of(c))}fr.STAT_EVENT="statevent";function af(a,c){A.call(this,fr.STAT_EVENT,a),this.stat=c}m(af,A);function at(a){const c=No();ot(c,new af(c,a))}fr.Ja="timingevent";function lf(a,c){A.call(this,fr.Ja,a),this.size=c}m(lf,A);function Gs(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function Ks(){this.g=!0}Ks.prototype.ua=function(){this.g=!1};function Q0(a,c,d,y,V,b){a.info(function(){if(a.g)if(b){var U="",Z=b.split("&");for(let ue=0;ue<Z.length;ue++){var Me=Z[ue].split("=");if(Me.length>1){const ze=Me[0];Me=Me[1];const Qt=ze.split("_");U=Qt.length>=2&&Qt[1]=="type"?U+(ze+"="+Me+"&"):U+(ze+"=redacted&")}}}else U=null;else U=b;return"XMLHTTP REQ ("+y+") [attempt "+V+"]: "+c+`
`+d+`
`+U})}function G0(a,c,d,y,V,b,U){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+V+"]: "+c+`
`+d+`
`+b+" "+U})}function Hr(a,c,d,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+X0(a,d)+(y?" "+y:"")})}function K0(a,c){a.info(function(){return"TIMEOUT: "+c})}Ks.prototype.info=function(){};function X0(a,c){if(!a.g)return c;if(!c)return null;try{const b=JSON.parse(c);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var d=b[a];if(!(d.length<2)){var y=d[1];if(Array.isArray(y)&&!(y.length<1)){var V=y[0];if(V!="noop"&&V!="stop"&&V!="close")for(let U=1;U<y.length;U++)y[U]=""}}}}return Yl(b)}catch{return c}}var ko={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},uf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cf;function eu(){}m(eu,nf),eu.prototype.g=function(){return new XMLHttpRequest},cf=new eu;function Xs(a){return encodeURIComponent(String(a))}function Y0(a){var c=1;a=a.split(":");const d=[];for(;c>0&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function Sn(a,c,d,y){this.j=a,this.i=c,this.l=d,this.S=y||1,this.V=new qs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hf}function hf(){this.i=null,this.g="",this.h=!1}var df={},tu={};function nu(a,c,d){a.M=1,a.A=Do(Wt(c)),a.u=d,a.R=!0,ff(a,null)}function ff(a,c){a.F=Date.now(),Vo(a),a.B=Wt(a.A);var d=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),Cf(d.i,"t",y),a.C=0,d=a.j.L,a.h=new hf,a.g=Hf(a.j,d?c:null,!a.u),a.P>0&&(a.O=new H0(h(a.Y,a,a.g),a.P)),c=a.V,d=a.g,y=a.ba;var V="readystatechange";Array.isArray(V)||(V&&(ef[0]=V.toString()),V=ef);for(let b=0;b<V.length;b++){const U=$r(d,V[b],y||c.handleEvent,!1,c.h||c);if(!U)break;c.g[U.key]=U}c=a.J?ce(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),Qs(),Q0(a.i,a.v,a.B,a.l,a.S,a.u)}Sn.prototype.ba=function(a){a=a.target;const c=this.O;c&&Rn(a)==3?c.j():this.Y(a)},Sn.prototype.Y=function(a){try{if(a==this.g)e:{const Z=Rn(this.g),Me=this.g.ya(),ue=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||Df(this.g)))){this.K||Z!=4||Me==7||(Me==8||ue<=0?Qs(3):Qs(2)),ru(this);var c=this.g.ca();this.X=c;var d=J0(this);if(this.o=c==200,G0(this.i,this.v,this.B,this.l,this.S,Z,c),this.o){if(this.U&&!this.L){t:{if(this.g){var y,V=this.g;if((y=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(y)){var b=y;break t}}b=null}if(a=b)Hr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,su(this,a);else{this.o=!1,this.m=3,at(12),pr(this),Ys(this);break e}}if(this.R){a=!0;let ze;for(;!this.K&&this.C<d.length;)if(ze=Z0(this,d),ze==tu){Z==4&&(this.m=4,at(14),a=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(ze==df){this.m=4,at(15),Hr(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else Hr(this.i,this.l,ze,null),su(this,ze);if(pf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||d.length!=0||this.h.h||(this.m=1,at(16),a=!1),this.o=this.o&&a,!a)Hr(this.i,this.l,d,"[Invalid Chunked Response]"),pr(this),Ys(this);else if(d.length>0&&!this.W){this.W=!0;var U=this.j;U.g==this&&U.aa&&!U.P&&(U.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),du(U),U.P=!0,at(11))}}else Hr(this.i,this.l,d,null),su(this,d);Z==4&&pr(this),this.o&&!this.K&&(Z==4?zf(this.j,this):(this.o=!1,Vo(this)))}else fw(this.g),c==400&&d.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),pr(this),Ys(this)}}}catch{}finally{}};function J0(a){if(!pf(a))return a.g.la();const c=Df(a.g);if(c==="")return"";let d="";const y=c.length,V=Rn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return pr(a),Ys(a),"";a.h.i=new o.TextDecoder}for(let b=0;b<y;b++)a.h.h=!0,d+=a.h.i.decode(c[b],{stream:!(V&&b==y-1)});return c.length=0,a.h.g+=d,a.C=0,a.h.g}function pf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Z0(a,c){var d=a.C,y=c.indexOf(`
`,d);return y==-1?tu:(d=Number(c.substring(d,y)),isNaN(d)?df:(y+=1,y+d>c.length?tu:(c=c.slice(y,y+d),a.C=y+d,c)))}Sn.prototype.cancel=function(){this.K=!0,pr(this)};function Vo(a){a.T=Date.now()+a.H,mf(a,a.H)}function mf(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Gs(h(a.aa,a),c)}function ru(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Sn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(K0(this.i,this.B),this.M!=2&&(Qs(),at(17)),pr(this),this.m=2,Ys(this)):mf(this,this.T-a)};function Ys(a){a.j.I==0||a.K||zf(a.j,a)}function pr(a){ru(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,tf(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function su(a,c){try{var d=a.j;if(d.I!=0&&(d.g==a||iu(d.h,a))){if(!a.L&&iu(d.h,a)&&d.I==3){try{var y=d.Ba.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var V=y;if(V[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)Oo(d),jo(d);else break e;hu(d),at(18)}}else d.xa=V[1],0<d.xa-d.K&&V[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Gs(h(d.Va,d),6e3));vf(d.h)<=1&&d.ta&&(d.ta=void 0)}else gr(d,11)}else if((a.L||d.g==a)&&Oo(d),!I(c))for(V=d.Ba.g.parse(c),c=0;c<V.length;c++){let ue=V[c];const ze=ue[0];if(!(ze<=d.K))if(d.K=ze,ue=ue[1],d.I==2)if(ue[0]=="c"){d.M=ue[1],d.ba=ue[2];const Qt=ue[3];Qt!=null&&(d.ka=Qt,d.j.info("VER="+d.ka));const yr=ue[4];yr!=null&&(d.za=yr,d.j.info("SVER="+d.za));const Pn=ue[5];Pn!=null&&typeof Pn=="number"&&Pn>0&&(y=1.5*Pn,d.O=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const Nn=a.g;if(Nn){const zo=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var b=y.h;b.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(ou(b,b.h),b.h=null))}if(y.G){const fu=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;fu&&(y.wa=fu,fe(y.J,y.G,fu))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),y=d;var U=a;if(y.na=$f(y,y.L?y.ba:null,y.W),U.L){_f(y.h,U);var Z=U,Me=y.O;Me&&(Z.H=Me),Z.D&&(ru(Z),Vo(Z)),y.g=U}else Of(y);d.i.length>0&&Lo(d)}else ue[0]!="stop"&&ue[0]!="close"||gr(d,7);else d.I==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?gr(d,7):cu(d):ue[0]!="noop"&&d.l&&d.l.qa(ue),d.A=0)}}Qs(4)}catch{}}var ew=class{constructor(a,c){this.g=a,this.map=c}};function gf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function vf(a){return a.h?1:a.g?a.g.size:0}function iu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function ou(a,c){a.g?a.g.add(c):a.h=c}function _f(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}gf.prototype.cancel=function(){if(this.i=wf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function wf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.G);return c}return C(a.i)}var Ef=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tw(a,c){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const y=a[d].indexOf("=");let V,b=null;y>=0?(V=a[d].substring(0,y),b=a[d].substring(y+1)):V=a[d],c(V,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Cn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof Cn?(this.l=a.l,Js(this,a.j),this.o=a.o,this.g=a.g,Zs(this,a.u),this.h=a.h,au(this,Af(a.i)),this.m=a.m):a&&(c=String(a).match(Ef))?(this.l=!1,Js(this,c[1]||"",!0),this.o=ei(c[2]||""),this.g=ei(c[3]||"",!0),Zs(this,c[4]),this.h=ei(c[5]||"",!0),au(this,c[6]||"",!0),this.m=ei(c[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}Cn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(ti(c,xf,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ti(c,xf,!0),"@"),a.push(Xs(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ti(d,d.charAt(0)=="/"?sw:rw,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ti(d,ow)),a.join("")},Cn.prototype.resolve=function(a){const c=Wt(this);let d=!!a.j;d?Js(c,a.j):d=!!a.o,d?c.o=a.o:d=!!a.g,d?c.g=a.g:d=a.u!=null;var y=a.h;if(d)Zs(c,a.u);else if(d=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var V=c.h.lastIndexOf("/");V!=-1&&(y=c.h.slice(0,V+1)+y)}if(V=y,V==".."||V==".")y="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){y=V.lastIndexOf("/",0)==0,V=V.split("/");const b=[];for(let U=0;U<V.length;){const Z=V[U++];Z=="."?y&&U==V.length&&b.push(""):Z==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),y&&U==V.length&&b.push("")):(b.push(Z),y=!0)}y=b.join("/")}else y=V}return d?c.h=y:d=a.i.toString()!=="",d?au(c,Af(a.i)):d=!!a.m,d&&(c.m=a.m),c};function Wt(a){return new Cn(a)}function Js(a,c,d){a.j=d?ei(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Zs(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function au(a,c,d){c instanceof ni?(a.i=c,aw(a.i,a.l)):(d||(c=ti(c,iw)),a.i=new ni(c,a.l))}function fe(a,c,d){a.i.set(c,d)}function Do(a){return fe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ei(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ti(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,nw),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function nw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var xf=/[#\/\?@]/g,rw=/[#\?:]/g,sw=/[#\?]/g,iw=/[#\?@]/g,ow=/#/g;function ni(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function mr(a){a.g||(a.g=new Map,a.h=0,a.i&&tw(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=ni.prototype,t.add=function(a,c){mr(this),this.i=null,a=qr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function Tf(a,c){mr(a),c=qr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function If(a,c){return mr(a),c=qr(a,c),a.g.has(c)}t.forEach=function(a,c){mr(this),this.g.forEach(function(d,y){d.forEach(function(V){a.call(c,V,y,this)},this)},this)};function Sf(a,c){mr(a);let d=[];if(typeof c=="string")If(a,c)&&(d=d.concat(a.g.get(qr(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)d=d.concat(a[c]);return d}t.set=function(a,c){return mr(this),this.i=null,a=qr(this,a),If(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=Sf(this,a),a.length>0?String(a[0]):c):c};function Cf(a,c,d){Tf(a,c),d.length>0&&(a.i=null,a.g.set(qr(a,c),C(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let y=0;y<c.length;y++){var d=c[y];const V=Xs(d);d=Sf(this,d);for(let b=0;b<d.length;b++){let U=V;d[b]!==""&&(U+="="+Xs(d[b])),a.push(U)}}return this.i=a.join("&")};function Af(a){const c=new ni;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function qr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function aw(a,c){c&&!a.j&&(mr(a),a.i=null,a.g.forEach(function(d,y){const V=y.toLowerCase();y!=V&&(Tf(this,y),Cf(this,V,d))},a)),a.j=c}function lw(a,c){const d=new Ks;if(o.Image){const y=new Image;y.onload=f(An,d,"TestLoadImage: loaded",!0,c,y),y.onerror=f(An,d,"TestLoadImage: error",!1,c,y),y.onabort=f(An,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=f(An,d,"TestLoadImage: timeout",!1,c,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function uw(a,c){const d=new Ks,y=new AbortController,V=setTimeout(()=>{y.abort(),An(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(b=>{clearTimeout(V),b.ok?An(d,"TestPingServer: ok",!0,c):An(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(V),An(d,"TestPingServer: error",!1,c)})}function An(a,c,d,y,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),y(d)}catch{}}function cw(){this.g=new W0}function lu(a){this.i=a.Sb||null,this.h=a.ab||!1}m(lu,nf),lu.prototype.g=function(){return new bo(this.i,this.h)};function bo(a,c){Xe.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(bo,Xe),t=bo.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,si(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ri(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?ri(this):si(this),this.readyState==3&&Rf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ri(this))},t.Na=function(a){this.g&&(this.response=a,ri(this))},t.ga=function(){this.g&&ri(this)};function ri(a){a.readyState=4,a.l=null,a.j=null,a.B=null,si(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function si(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Pf(a){let c="";return X(a,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function uu(a,c,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=Pf(d),typeof a=="string"?d!=null&&Xs(d):fe(a,c,d))}function Se(a){Xe.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Se,Xe);var hw=/^https?$/i,dw=["POST","PUT"];t=Se.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cf.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(b){Nf(this,b);return}if(a=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var V in y)d.set(V,y[V]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const b of y.keys())d.set(b,y.get(b));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(b=>b.toLowerCase()=="content-type"),V=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(dw,c,void 0)>=0)||y||V||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,U]of d)this.g.setRequestHeader(b,U);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){Nf(this,b)}};function Nf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,kf(a),Mo(a)}function kf(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ot(this,"complete"),ot(this,"abort"),Mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mo(this,!0)),Se.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Vf(this):this.Xa())},t.Xa=function(){Vf(this)};function Vf(a){if(a.h&&typeof i<"u"){if(a.v&&Rn(a)==4)setTimeout(a.Ca.bind(a),0);else if(ot(a,"readystatechange"),Rn(a)==4){a.h=!1;try{const b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var y;if(y=b===0){let U=String(a.D).match(Ef)[1]||null;!U&&o.self&&o.self.location&&(U=o.self.location.protocol.slice(0,-1)),y=!hw.test(U?U.toLowerCase():"")}d=y}if(d)ot(a,"complete"),ot(a,"success");else{a.o=6;try{var V=Rn(a)>2?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.ca()+"]",kf(a)}}finally{Mo(a)}}}}function Mo(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,c||ot(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Rn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),q0(c)}};function Df(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function fw(a){const c={};a=(a.g&&Rn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(I(a[y]))continue;var d=Y0(a[y]);const V=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const b=c[V]||[];c[V]=b,b.push(d)}G(c,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ii(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function bf(a){this.za=0,this.i=[],this.j=new Ks,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ii("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ii("baseRetryDelayMs",5e3,a),this.Za=ii("retryDelaySeedMs",1e4,a),this.Ta=ii("forwardChannelMaxRetries",2,a),this.va=ii("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new gf(a&&a.concurrentRequestLimit),this.Ba=new cw,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=bf.prototype,t.ka=8,t.I=1,t.connect=function(a,c,d,y){at(0),this.W=a,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.J=$f(this,null,this.W),Lo(this)};function cu(a){if(Mf(a),a.I==3){var c=a.V++,d=Wt(a.J);if(fe(d,"SID",a.M),fe(d,"RID",c),fe(d,"TYPE","terminate"),oi(a,d),c=new Sn(a,a.j,c),c.M=2,c.A=Do(Wt(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=c.A,d=!0),d||(c.g=Hf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Vo(c)}Bf(a)}function jo(a){a.g&&(du(a),a.g.cancel(),a.g=null)}function Mf(a){jo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Oo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Lo(a){if(!yf(a.h)&&!a.m){a.m=!0;var c=a.Ea;O||v(),z||(O(),z=!0),E.add(c,a),a.D=0}}function pw(a,c){return vf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Gs(h(a.Ea,a,c),Uf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const V=new Sn(this,this.j,a);let b=this.o;if(this.U&&(b?(b=ce(b),ln(b,this.U)):b=this.U),this.u!==null||this.R||(V.J=b,b=null),this.S)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,c>4096){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Lf(this,V,c),d=Wt(this.J),fe(d,"RID",a),fe(d,"CVER",22),this.G&&fe(d,"X-HTTP-Session-Id",this.G),oi(this,d),b&&(this.R?c="headers="+Xs(Pf(b))+"&"+c:this.u&&uu(d,this.u,b)),ou(this.h,V),this.Ra&&fe(d,"TYPE","init"),this.S?(fe(d,"$req",c),fe(d,"SID","null"),V.U=!0,nu(V,d,null)):nu(V,d,c),this.I=2}}else this.I==3&&(a?jf(this,a):this.i.length==0||yf(this.h)||jf(this))};function jf(a,c){var d;c?d=c.l:d=a.V++;const y=Wt(a.J);fe(y,"SID",a.M),fe(y,"RID",d),fe(y,"AID",a.K),oi(a,y),a.u&&a.o&&uu(y,a.u,a.o),d=new Sn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Lf(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ou(a.h,d),nu(d,y,c)}function oi(a,c){a.H&&X(a.H,function(d,y){fe(c,y,d)}),a.l&&X({},function(d,y){fe(c,y,d)})}function Lf(a,c,d){d=Math.min(a.i.length,d);const y=a.l?h(a.l.Ka,a.l,a):null;e:{var V=a.i;let Z=-1;for(;;){const Me=["count="+d];Z==-1?d>0?(Z=V[0].g,Me.push("ofs="+Z)):Z=0:Me.push("ofs="+Z);let ue=!0;for(let ze=0;ze<d;ze++){var b=V[ze].g;const Qt=V[ze].map;if(b-=Z,b<0)Z=Math.max(0,V[ze].g-100),ue=!1;else try{b="req"+b+"_"||"";try{var U=Qt instanceof Map?Qt:Object.entries(Qt);for(const[yr,Pn]of U){let Nn=Pn;l(Pn)&&(Nn=Yl(Pn)),Me.push(b+yr+"="+encodeURIComponent(Nn))}}catch(yr){throw Me.push(b+"type="+encodeURIComponent("_badmap")),yr}}catch{y&&y(Qt)}}if(ue){U=Me.join("&");break e}}U=void 0}return a=a.i.splice(0,d),c.G=a,U}function Of(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;O||v(),z||(O(),z=!0),E.add(c,a),a.A=0}}function hu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Gs(h(a.Da,a),Uf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Ff(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Gs(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),jo(this),Ff(this))};function du(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Ff(a){a.g=new Sn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=Wt(a.na);fe(c,"RID","rpc"),fe(c,"SID",a.M),fe(c,"AID",a.K),fe(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&fe(c,"TO",a.ia),fe(c,"TYPE","xmlhttp"),oi(a,c),a.u&&a.o&&uu(c,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=Do(Wt(c)),d.u=null,d.R=!0,ff(d,a)}t.Va=function(){this.C!=null&&(this.C=null,jo(this),hu(this),at(19))};function Oo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function zf(a,c){var d=null;if(a.g==c){Oo(a),du(a),a.g=null;var y=2}else if(iu(a.h,c))d=c.G,_f(a.h,c),y=1;else return;if(a.I!=0){if(c.o)if(y==1){d=c.u?c.u.length:0,c=Date.now()-c.F;var V=a.D;y=No(),ot(y,new lf(y,d)),Lo(a)}else Of(a);else if(V=c.m,V==3||V==0&&c.X>0||!(y==1&&pw(a,c)||y==2&&hu(a)))switch(d&&d.length>0&&(c=a.h,c.i=c.i.concat(d)),V){case 1:gr(a,5);break;case 4:gr(a,10);break;case 3:gr(a,6);break;default:gr(a,2)}}}function Uf(a,c){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*c}function gr(a,c){if(a.j.info("Error code "+c),c==2){var d=h(a.bb,a),y=a.Ua;const V=!y;y=new Cn(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Js(y,"https"),Do(y),V?lw(y.toString(),d):uw(y.toString(),d)}else at(2);a.I=0,a.l&&a.l.pa(c),Bf(a),Mf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Bf(a){if(a.I=0,a.ja=[],a.l){const c=wf(a.h);(c.length!=0||a.i.length!=0)&&(R(a.ja,c),R(a.ja,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.oa()}}function $f(a,c,d){var y=d instanceof Cn?Wt(d):new Cn(d);if(y.g!="")c&&(y.g=c+"."+y.g),Zs(y,y.u);else{var V=o.location;y=V.protocol,c=c?c+"."+V.hostname:V.hostname,V=+V.port;const b=new Cn(null);y&&Js(b,y),c&&(b.g=c),V&&Zs(b,V),d&&(b.h=d),y=b}return d=a.G,c=a.wa,d&&c&&fe(y,d,c),fe(y,"VER",a.ka),oi(a,y),y}function Hf(a,c,d){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new Se(new lu({ab:d})):new Se(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qf(){}t=qf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Fo(){}Fo.prototype.g=function(a,c){return new Et(a,c)};function Et(a,c){Xe.call(this),this.g=new bf(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!I(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!I(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Wr(this)}m(Et,Xe),Et.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){cu(this.g)},Et.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Yl(a),a=d);c.i.push(new ew(c.Ya++,a)),c.I==3&&Lo(c)},Et.prototype.N=function(){this.g.l=null,delete this.j,cu(this.g),delete this.g,Et.Z.N.call(this)};function Wf(a){Jl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}m(Wf,Jl);function Qf(){Zl.call(this),this.status=1}m(Qf,Zl);function Wr(a){this.g=a}m(Wr,qf),Wr.prototype.ra=function(){ot(this.g,"a")},Wr.prototype.qa=function(a){ot(this.g,new Wf(a))},Wr.prototype.pa=function(a){ot(this.g,new Qf)},Wr.prototype.oa=function(){ot(this.g,"b")},Fo.prototype.createWebChannel=Fo.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,h_=function(){return new Fo},c_=function(){return No()},u_=fr,eh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,xa=ko,uf.COMPLETE="complete",l_=uf,rf.EventType=Ws,Ws.OPEN="a",Ws.CLOSE="b",Ws.ERROR="c",Ws.MESSAGE="d",Xe.prototype.listen=Xe.prototype.J,_i=rf,Se.prototype.listenOnce=Se.prototype.K,Se.prototype.getLastError=Se.prototype.Ha,Se.prototype.getLastErrorCode=Se.prototype.ya,Se.prototype.getStatus=Se.prototype.ca,Se.prototype.getResponseJson=Se.prototype.La,Se.prototype.getResponseText=Se.prototype.la,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Fa,a_=Se}).apply(typeof ia<"u"?ia:typeof self<"u"?self:typeof window<"u"?window:{});const Tm="@firebase/firestore",Im="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fs="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new e_("@firebase/firestore");function Kr(){return Mr.logLevel}function $(t,...e){if(Mr.logLevel<=se.DEBUG){const n=e.map(vd);Mr.debug(`Firestore (${Fs}): ${t}`,...n)}}function wn(t,...e){if(Mr.logLevel<=se.ERROR){const n=e.map(vd);Mr.error(`Firestore (${Fs}): ${t}`,...n)}}function As(t,...e){if(Mr.logLevel<=se.WARN){const n=e.map(vd);Mr.warn(`Firestore (${Fs}): ${t}`,...n)}}function vd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,d_(t,r,n)}function d_(t,e,n){let r=`FIRESTORE (${Fs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wn(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||d_(e,s,r)}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}}class kI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VI{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ar,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new f_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new et(e)}}class DI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new DI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=jI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function te(t,e){return t<e?-1:t>e?1:0}function th(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return qu(s)===qu(i)?te(s,i):qu(s)?1:-1}return te(t.length,e.length)}const LI=55296,OI=57343;function qu(t){const e=t.charCodeAt(0);return e>=LI&&e<=OI}function Rs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="__name__";class Xt{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Xt.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return te(e.length,n.length)}static compareSegments(e,n){const r=Xt.isNumericId(e),s=Xt.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Xt.extractNumericId(e).compare(Xt.extractNumericId(n)):th(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yn.fromString(e.substring(4,e.length-2))}}class he extends Xt{construct(e,n,r){return new he(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new he(n)}static emptyPath(){return new he([])}}const FI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends Xt{construct(e,n,r){return new We(e,n,r)}static isValidIdentifier(e){return FI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cm}static keyField(){return new We([Cm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new H(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new H(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(n)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(he.fromString(e))}static fromName(e){return new Q(he.fromString(e).popFirst(5))}static empty(){return new Q(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&he.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return he.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new he(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t,e,n){if(!n)throw new H(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zI(t,e,n,r){if(e===!0&&r===!0)throw new H(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Am(t){if(!Q.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rm(t){if(Q.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function m_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K(12329,{type:typeof t})}function Rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vl(t);throw new H(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e){const n={typeString:t};return e&&(n.value=e),n}function _o(t,e){if(!m_(t))throw new H(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new H(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=-62135596800,Nm=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Nm);return new me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Pm)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nm}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_o(e,me._jsonSchema))return new me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Pm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:Ve("string",me._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(e){return new Y(e)}static min(){return new Y(new me(0,0))}static max(){return new Y(new me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=-1;function UI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new tr(s,Q.empty(),e)}function BI(t){return new tr(t.readTime,t.key,so)}class tr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new tr(Y.min(),Q.empty(),so)}static max(){return new tr(Y.max(),Q.empty(),so)}}function $I(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==HI)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function WI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Us(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=-1;function bl(t){return t==null}function rl(t){return t===0&&1/t==-1/0}function QI(t){return typeof t=="number"&&Number.isInteger(t)&&!rl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="";function GI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=km(e)),e=KI(t.get(n),e);return km(e)}function KI(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case g_:n+="";break;default:n+=i}}return n}function km(t){return t+g_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function y_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.comparator=e,this.root=n||qe.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oa(this.root,e,this.comparator,!1)}getReverseIterator(){return new oa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oa(this.root,e,this.comparator,!0)}}class oa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??qe.RED,this.left=s??qe.EMPTY,this.right=i??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new qe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dm(this.data.getIterator())}getIteratorFrom(e){return new Dm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class Dm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new It([])}unionWith(e){let n=new Fe(We.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new It(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new v_("Invalid base64 string: "+i):i}}(e);return new Ke(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ke(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const XI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=XI.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rr(t){return typeof t=="string"?Ke.fromBase64String(t):Ke.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="server_timestamp",w_="__type__",E_="__previous_value__",x_="__local_write_time__";function Ed(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[w_])==null?void 0:r.stringValue)===__}function Ml(t){const e=t.mapValue.fields[E_];return Ed(e)?Ml(e):e}function io(t){const e=nr(t.mapValue.fields[x_].timestampValue);return new me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,r,s,i,o,l,u,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const sl="(default)";class oo{constructor(e,n){this.projectId=e,this.database=n||sl}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===sl}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="__type__",JI="__max__",aa={mapValue:{}},I_="__vector__",il="value";function sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ed(t)?4:eS(t)?9007199254740991:ZI(t)?10:11:K(28295,{value:t})}function an(t,e){if(t===e)return!0;const n=sr(t);if(n!==sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return io(t).isEqual(io(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=nr(s.timestampValue),l=nr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return rr(s.bytesValue).isEqual(rr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),l=Ae(i.doubleValue);return o===l?rl(o)===rl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Rs(t.arrayValue.values||[],e.arrayValue.values||[],an);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Vm(o)!==Vm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!an(o[u],l[u])))return!1;return!0}(t,e);default:return K(52216,{left:t})}}function ao(t,e){return(t.values||[]).find(n=>an(n,e))!==void 0}function Ps(t,e){if(t===e)return 0;const n=sr(t),r=sr(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ae(i.integerValue||i.doubleValue),u=Ae(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return bm(t.timestampValue,e.timestampValue);case 4:return bm(io(t),io(e));case 5:return th(t.stringValue,e.stringValue);case 6:return function(i,o){const l=rr(i),u=rr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=te(l[h],u[h]);if(f!==0)return f}return te(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=te(Ae(i.latitude),Ae(o.latitude));return l!==0?l:te(Ae(i.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Mm(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,C,R,P;const l=i.fields||{},u=o.fields||{},h=(g=l[il])==null?void 0:g.arrayValue,f=(C=u[il])==null?void 0:C.arrayValue,m=te(((R=h==null?void 0:h.values)==null?void 0:R.length)||0,((P=f==null?void 0:f.values)==null?void 0:P.length)||0);return m!==0?m:Mm(h,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===aa.mapValue&&o===aa.mapValue)return 0;if(i===aa.mapValue)return 1;if(o===aa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=th(u[m],f[m]);if(g!==0)return g;const C=Ps(l[u[m]],h[f[m]]);if(C!==0)return C}return te(u.length,f.length)}(t.mapValue,e.mapValue);default:throw K(23264,{he:n})}}function bm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);const n=nr(t),r=nr(e),s=te(n.seconds,r.seconds);return s!==0?s:te(n.nanos,r.nanos)}function Mm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ps(n[s],r[s]);if(i)return i}return te(n.length,r.length)}function Ns(t){return nh(t)}function nh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=nh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${nh(n.fields[o])}`;return s+"}"}(t.mapValue):K(61005,{value:t})}function Ta(t){switch(sr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ml(t);return e?16+Ta(e):16;case 5:return 2*t.stringValue.length;case 6:return rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ta(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return cr(r.fields,(i,o)=>{s+=i.length+Ta(o)}),s}(t.mapValue);default:throw K(13486,{value:t})}}function jm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rh(t){return!!t&&"integerValue"in t}function xd(t){return!!t&&"arrayValue"in t}function Lm(t){return!!t&&"nullValue"in t}function Om(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ia(t){return!!t&&"mapValue"in t}function ZI(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[T_])==null?void 0:r.stringValue)===I_}function Di(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return cr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Di(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Di(t.arrayValue.values[n]);return e}return{...t}}function eS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===JI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.value=e}static empty(){return new mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ia(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Di(n)}setAll(e){let n=We.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Di(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ia(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return an(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ia(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){cr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new mt(Di(this.value))}}function S_(t){const e=[];return cr(t.fields,(n,r)=>{const s=new We([n]);if(Ia(r)){const i=S_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new It(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new nt(e,0,Y.min(),Y.min(),Y.min(),mt.empty(),0)}static newFoundDocument(e,n,r,s){return new nt(e,1,n,Y.min(),r,s,0)}static newNoDocument(e,n){return new nt(e,2,n,Y.min(),Y.min(),mt.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,Y.min(),Y.min(),mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.position=e,this.inclusive=n}}function Fm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Ps(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function zm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!an(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n="asc"){this.field=e,this.dir=n}}function tS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{}class ke extends C_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rS(e,n,r):n==="array-contains"?new oS(e,r):n==="in"?new aS(e,r):n==="not-in"?new lS(e,r):n==="array-contains-any"?new uS(e,r):new ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sS(e,r):new iS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ps(n,this.value)):n!==null&&sr(this.value)===sr(n)&&this.matchesComparison(Ps(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends C_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ht(e,n)}matches(e){return A_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function A_(t){return t.op==="and"}function R_(t){return nS(t)&&A_(t)}function nS(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function sh(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+Ns(t.value);if(R_(t))return t.filters.map(e=>sh(e)).join(",");{const e=t.filters.map(n=>sh(n)).join(",");return`${t.op}(${e})`}}function P_(t,e){return t instanceof ke?function(r,s){return s instanceof ke&&r.op===s.op&&r.field.isEqual(s.field)&&an(r.value,s.value)}(t,e):t instanceof Ht?function(r,s){return s instanceof Ht&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&P_(o,s.filters[l]),!0):!1}(t,e):void K(19439)}function N_(t){return t instanceof ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Ns(n.value)}`}(t):t instanceof Ht?function(n){return n.op.toString()+" {"+n.getFilters().map(N_).join(" ,")+"}"}(t):"Filter"}class rS extends ke{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class sS extends ke{constructor(e,n){super(e,"in",n),this.keys=k_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iS extends ke{constructor(e,n){super(e,"not-in",n),this.keys=k_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function k_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class oS extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xd(n)&&ao(n.arrayValue,this.value)}}class aS extends ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ao(this.value.arrayValue,n)}}class lS extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ao(this.value.arrayValue,n)}}class uS extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ao(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Um(t,e=null,n=[],r=[],s=null,i=null,o=null){return new cS(t,e,n,r,s,i,o)}function Td(t){const e=J(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),bl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ns(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ns(r)).join(",")),e.Te=n}return e.Te}function Id(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!P_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zm(t.startAt,e.startAt)&&zm(t.endAt,e.endAt)}function ih(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hS(t,e,n,r,s,i,o,l){return new wo(t,e,n,r,s,i,o,l)}function Sd(t){return new wo(t)}function Bm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V_(t){return t.collectionGroup!==null}function bi(t){const e=J(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Fe(We.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new al(i,r))}),n.has(We.keyField().canonicalString())||e.Ie.push(new al(We.keyField(),r))}return e.Ie}function en(t){const e=J(t);return e.Ee||(e.Ee=dS(e,bi(t))),e.Ee}function dS(t,e){if(t.limitType==="F")return Um(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new al(s.field,i)});const n=t.endAt?new ol(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ol(t.startAt.position,t.startAt.inclusive):null;return Um(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function oh(t,e){const n=t.filters.concat([e]);return new wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ah(t,e,n){return new wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jl(t,e){return Id(en(t),en(e))&&t.limitType===e.limitType}function D_(t){return`${Td(en(t))}|lt:${t.limitType}`}function Xr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>N_(s)).join(", ")}]`),bl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ns(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ns(s)).join(",")),`Target(${r})`}(en(t))}; limitType=${t.limitType})`}function Ll(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Fm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,bi(r),s)||r.endAt&&!function(o,l,u){const h=Fm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,bi(r),s))}(t,e)}function fS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function b_(t){return(e,n)=>{let r=!1;for(const s of bi(t)){const i=pS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function pS(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Ps(u,h):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){cr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return y_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=new Te(Q.comparator);function En(){return mS}const M_=new Te(Q.comparator);function wi(...t){let e=M_;for(const n of t)e=e.insert(n.key,n);return e}function j_(t){let e=M_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ir(){return Mi()}function L_(){return Mi()}function Mi(){return new Ur(t=>t.toString(),(t,e)=>t.isEqual(e))}const gS=new Te(Q.comparator),yS=new Fe(Q.comparator);function ne(...t){let e=yS;for(const n of t)e=e.add(n);return e}const vS=new Fe(te);function _S(){return vS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(e)?"-0":e}}function O_(t){return{integerValue:""+t}}function wS(t,e){return QI(e)?O_(e):Cd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this._=void 0}}function ES(t,e,n){return t instanceof lo?function(s,i){const o={fields:{[w_]:{stringValue:__},[x_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ed(i)&&(i=Ml(i)),i&&(o.fields[E_]=i),{mapValue:o}}(n,e):t instanceof uo?z_(t,e):t instanceof co?U_(t,e):function(s,i){const o=F_(s,i),l=$m(o)+$m(s.Ae);return rh(o)&&rh(s.Ae)?O_(l):Cd(s.serializer,l)}(t,e)}function xS(t,e,n){return t instanceof uo?z_(t,e):t instanceof co?U_(t,e):n}function F_(t,e){return t instanceof ll?function(r){return rh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class lo extends Ol{}class uo extends Ol{constructor(e){super(),this.elements=e}}function z_(t,e){const n=B_(e);for(const r of t.elements)n.some(s=>an(s,r))||n.push(r);return{arrayValue:{values:n}}}class co extends Ol{constructor(e){super(),this.elements=e}}function U_(t,e){let n=B_(e);for(const r of t.elements)n=n.filter(s=>!an(s,r));return{arrayValue:{values:n}}}class ll extends Ol{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $m(t){return Ae(t.integerValue||t.doubleValue)}function B_(t){return xd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n){this.field=e,this.transform=n}}function IS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof uo&&s instanceof uo||r instanceof co&&s instanceof co?Rs(r.elements,s.elements,an):r instanceof ll&&s instanceof ll?an(r.Ae,s.Ae):r instanceof lo&&s instanceof lo}(t.transform,e.transform)}class SS{constructor(e,n){this.version=e,this.transformResults=n}}class tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tn}static exists(e){return new tn(void 0,e)}static updateTime(e){return new tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fl{}function $_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new q_(t.key,tn.none()):new Eo(t.key,t.data,tn.none());{const n=t.data,r=mt.empty();let s=new Fe(We.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new hr(t.key,r,new It(s.toArray()),tn.none())}}function CS(t,e,n){t instanceof Eo?function(s,i,o){const l=s.value.clone(),u=qm(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof hr?function(s,i,o){if(!Sa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=qm(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(H_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ji(t,e,n,r){return t instanceof Eo?function(i,o,l,u){if(!Sa(i.precondition,o))return l;const h=i.value.clone(),f=Wm(i.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof hr?function(i,o,l,u){if(!Sa(i.precondition,o))return l;const h=Wm(i.fieldTransforms,u,o),f=o.data;return f.setAll(H_(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return Sa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function AS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=F_(r.transform,s||null);i!=null&&(n===null&&(n=mt.empty()),n.set(r.field,i))}return n||null}function Hm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Rs(r,s,(i,o)=>IS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Eo extends Fl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hr extends Fl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function H_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qm(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,xS(o,l,n[s]))}return r}function Wm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,ES(i,o,e))}return r}class q_ extends Fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RS extends Fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&CS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ji(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ji(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=L_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=$_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&Rs(this.mutations,e.mutations,(n,r)=>Hm(n,r))&&Rs(this.baseMutations,e.baseMutations,(n,r)=>Hm(n,r))}}class Ad{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return gS}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ad(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,re;function VS(t){switch(t){case j.OK:return K(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return K(15467,{code:t})}}function W_(t){if(t===void 0)return wn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Pe.OK:return j.OK;case Pe.CANCELLED:return j.CANCELLED;case Pe.UNKNOWN:return j.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return j.INTERNAL;case Pe.UNAVAILABLE:return j.UNAVAILABLE;case Pe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Pe.NOT_FOUND:return j.NOT_FOUND;case Pe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Pe.ABORTED:return j.ABORTED;case Pe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Pe.DATA_LOSS:return j.DATA_LOSS;default:return K(39323,{code:t})}}(re=Pe||(Pe={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new Yn([4294967295,4294967295],0);function Qm(t){const e=DS().encode(t),n=new o_;return n.update(e),new Uint8Array(n.digest())}function Gm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Yn([n,r],0),new Yn([s,i],0)]}class Rd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ei(`Invalid padding: ${n}`);if(r<0)throw new Ei(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ei(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ei(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Yn.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Yn.fromNumber(r)));return s.compare(bS)===1&&(s=new Yn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qm(e),[r,s]=Gm(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Rd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Qm(e),[r,s]=Gm(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ei extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,xo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zl(Y.min(),s,new Te(te),En(),ne())}}class xo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xo(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Q_{constructor(e,n){this.targetId=e,this.Ce=n}}class G_{constructor(e,n,r=Ke.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Km{constructor(){this.ve=0,this.Fe=Xm(),this.Me=Ke.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ne(),n=ne(),r=ne();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:K(38017,{changeType:i})}}),new xo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Xm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class MS{constructor(e){this.Ge=e,this.ze=new Map,this.je=En(),this.Je=la(),this.He=la(),this.Ye=new Te(te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ih(i))if(r===0){const o=new Q(i.path);this.et(n,o,nt.newNoDocument(o,Y.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=rr(r).toUint8Array()}catch(u){if(u instanceof v_)return As("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Rd(o,s,i)}catch(u){return As(u instanceof Ei?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&ih(l.target)){const u=new Q(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,nt.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ne();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new zl(e,n,this.Ye,this.je,r);return this.je=En(),this.Je=la(),this.He=la(),this.Ye=new Te(te),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Km,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fe(te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fe(te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Km),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function la(){return new Te(Q.comparator)}function Xm(){return new Te(Q.comparator)}const jS={asc:"ASCENDING",desc:"DESCENDING"},LS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OS={and:"AND",or:"OR"};class FS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lh(t,e){return t.useProto3Json||bl(e)?e:{value:e}}function ul(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zS(t,e){return ul(t,e.toTimestamp())}function nn(t){return oe(!!t,49232),Y.fromTimestamp(function(n){const r=nr(n);return new me(r.seconds,r.nanos)}(t))}function Pd(t,e){return uh(t,e).canonicalString()}function uh(t,e){const n=function(s){return new he(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function X_(t){const e=he.fromString(t);return oe(t0(e),10190,{key:e.toString()}),e}function ch(t,e){return Pd(t.databaseId,e.path)}function Wu(t,e){const n=X_(e);if(n.get(1)!==t.databaseId.projectId)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(J_(n))}function Y_(t,e){return Pd(t.databaseId,e)}function US(t){const e=X_(t);return e.length===4?he.emptyPath():J_(e)}function hh(t){return new he(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function J_(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ym(t,e,n){return{name:ch(t,e),fields:n.value.mapValue.fields}}function BS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(oe(f===void 0||typeof f=="string",58123),Ke.fromBase64String(f||"")):(oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ke.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?j.UNKNOWN:W_(h.code);return new H(f,h.message||"")}(o);n=new G_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Wu(t,r.document.name),i=nn(r.document.updateTime),o=r.document.createTime?nn(r.document.createTime):Y.min(),l=new mt({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(s,i,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Ca(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Wu(t,r.document),i=r.readTime?nn(r.readTime):Y.min(),o=nt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ca([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Wu(t,r.document),i=r.removedTargetIds||[];n=new Ca([],i,s,null)}else{if(!("filter"in e))return K(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new kS(s,i),l=r.targetId;n=new Q_(l,o)}}return n}function $S(t,e){let n;if(e instanceof Eo)n={update:Ym(t,e.key,e.value)};else if(e instanceof q_)n={delete:ch(t,e.key)};else if(e instanceof hr)n={update:Ym(t,e.key,e.data),updateMask:JS(e.fieldMask)};else{if(!(e instanceof RS))return K(16599,{Vt:e.type});n={verify:ch(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof lo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof co)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ll)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:zS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K(27497)}(t,e.precondition)),n}function HS(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?nn(s.updateTime):nn(i);return o.isEqual(Y.min())&&(o=nn(i)),new SS(o,s.transformResults||[])}(n,e))):[]}function qS(t,e){return{documents:[Y_(t,e.path)]}}function WS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Y_(t,s);const i=function(h){if(h.length!==0)return e0(Ht.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:Yr(g.field),direction:KS(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=lh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function QS(t){let e=US(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=Z_(m);return g instanceof Ht&&R_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(R){return new al(Jr(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,bl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,C=m.values||[];return new ol(C,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,C=m.values||[];return new ol(C,g)}(n.endAt)),hS(e,s,o,i,l,"F",u,h)}function GS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Z_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jr(n.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Jr(n.unaryFilter.field);return ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jr(n.unaryFilter.field);return ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jr(n.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):t.fieldFilter!==void 0?function(n){return ke.create(Jr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ht.create(n.compositeFilter.filters.map(r=>Z_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t})}function KS(t){return jS[t]}function XS(t){return LS[t]}function YS(t){return OS[t]}function Yr(t){return{fieldPath:t.canonicalString()}}function Jr(t){return We.fromServerFormat(t.fieldPath)}function e0(t){return t instanceof ke?function(n){if(n.op==="=="){if(Om(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NAN"}};if(Lm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Om(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NAN"}};if(Lm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yr(n.field),op:XS(n.op),value:n.value}}}(t):t instanceof Ht?function(n){const r=n.getFilters().map(s=>e0(s));return r.length===1?r[0]:{compositeFilter:{op:YS(n.op),filters:r}}}(t):K(54877,{filter:t})}function JS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function t0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r,s,i=Y.min(),o=Y.min(),l=Ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Fn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.yt=e}}function e2(t){const e=QS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ah(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.Cn=new n2}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(tr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(tr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class n2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Fe(he.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Fe(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},n0=41943040;class ft{static withCacheSize(e){return new ft(e,ft.DEFAULT_COLLECTION_PERCENTILE,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ft.DEFAULT_COLLECTION_PERCENTILE=10,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ft.DEFAULT=new ft(n0,ft.DEFAULT_COLLECTION_PERCENTILE,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ft.DISABLED=new ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ks(0)}static cr(){return new ks(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="LruGarbageCollector",r2=1048576;function eg([t,e],[n,r]){const s=te(t,n);return s===0?te(e,r):s}class s2{constructor(e){this.Ir=e,this.buffer=new Fe(eg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();eg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class i2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(Zm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Us(n)?$(Zm,"Ignoring IndexedDB error during garbage collection: ",n):await zs(n)}await this.Vr(3e5)})}}class o2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Dl.ce);const r=new s2(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Jm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jm):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Kr()<=se.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function a2(t,e){return new o2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.changes=new Ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ji(r.mutation,s,It.empty(),me.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=Ir();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=wi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=En();const o=Mi(),l=function(){return Mi()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof hr)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),ji(f.mutation,h,f.mutation.getFieldMask(),me.now())):o.set(h.key,It.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>l.set(h,new u2(f,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Mi();let s=new Te((o,l)=>o-l),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||It.empty();f=l.applyToLocalView(h,f),r.set(u,f);const m=(s.get(l.batchId)||ne()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,m=L_();f.forEach(g=>{if(!i.has(g)){const C=$_(n.get(g),r.get(g));C!==null&&m.set(g,C),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Ir());let l=so,u=i;return o.next(h=>L.forEach(h,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ne())).next(f=>({batchId:l,changes:j_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=wi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=wi();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const h=function(m,g){return new wo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,nt.newInvalidDocument(f)))});let l=wi();return o.forEach((u,h)=>{const f=i.get(u);f!==void 0&&ji(f.mutation,h,It.empty(),me.now()),Ll(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:e2(s.bundledQuery),readTime:nn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.overlays=new Te(Q.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ir();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Ir(),i=n.length+1,o=new Q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Te((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=Ir(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Ir(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new NS(n,r));let i=this.qr.get(n);i===void 0&&(i=ne(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this.Qr=new Fe(Ue.$r),this.Ur=new Fe(Ue.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ue(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Q(new he([])),r=new Ue(n,e),s=new Ue(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Q(new he([])),r=new Ue(n,e),s=new Ue(n,e+1);let i=ne();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ue(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||te(e.Yr,n.Yr)}static Kr(e,n){return te(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fe(Ue.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new PS(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ue(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?wd:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),s=new Ue(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(te);return n.forEach(s=>{const i=new Ue(s,0),o=new Ue(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new Ue(new Q(i),0);let l=new Fe(te);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},o),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ue(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ue(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.ri=e,this.docs=function(){return new Te(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=En();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():nt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=En();const o=n.path,l=new Q(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||$I(BI(f),r)<=0||(s.has(f.key)||Ll(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){K(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new g2(this)}getSize(e){return L.resolve(this.size)}}class g2 extends l2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.persistence=e,this.si=new Ur(n=>Td(n),Id),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new Nd,this.targetCount=0,this.ai=ks.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ks(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n){this.ui={},this.overlays={},this.ci=new Dl(0),this.li=!1,this.li=!0,this.hi=new f2,this.referenceDelegate=e(this),this.Pi=new y2(this),this.indexManager=new t2,this.remoteDocumentCache=function(s){return new m2(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new ZS(n),this.Ii=new h2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new d2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new p2(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const s=new v2(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class v2 extends qI{constructor(e){super(),this.currentSequenceNumber=e}}class kd{constructor(e){this.persistence=e,this.Ri=new Nd,this.Vi=null}static mi(e){return new kd(e)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=Q.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class cl{constructor(e,n){this.persistence=e,this.pi=new Ur(r=>GI(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=a2(this,n)}static mi(e,n){return new cl(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Y.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ta(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return cT()?8:WI(lT())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new _2;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Kr()<=se.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Kr()<=se.DEBUG&&$("QueryEngine","Query:",Xr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Kr()<=se.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(n))):L.resolve())}ys(e,n){if(Bm(n))return L.resolve(null);let r=en(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ah(n,null,"F"),r=en(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ne(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,ah(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,s){return Bm(n)||s.isEqual(Y.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(Kr()<=se.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Xr(n)),this.vs(e,o,n,UI(s,so)).next(l=>l))})}Ds(e,n){let r=new Fe(b_(e));return n.forEach((s,i)=>{Ll(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Kr()<=se.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Xr(n)),this.ps.getDocumentsMatchingQuery(e,n,tr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="LocalStore",E2=3e8;class x2{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Te(te),this.xs=new Ur(i=>Td(i),Id),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function T2(t,e,n,r){return new x2(t,e,n,r)}async function s0(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ne();for(const h of s){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function I2(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const m=h.batch,g=m.keys();let C=L.resolve();return g.forEach(R=>{C=C.next(()=>f.getEntry(u,R)).next(P=>{const D=h.docVersions.get(R);oe(D!==null,48541),P.version.compareTo(D)<0&&(m.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),f.addEntry(P)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ne();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function i0(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function S2(t,e){const n=J(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let C=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(Ke.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(f.resumeToken,r)),s=s.insert(m,C),function(P,D,_){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=E2?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,C,f)&&l.push(n.Pi.updateTargetData(i,C))});let u=En(),h=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(C2(i,o,e.documentUpdates).next(f=>{u=f.ks,h=f.qs})),!r.isEqual(Y.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ms=s,i))}function C2(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=En();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):$(Dd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:s}})}function A2(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function R2(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Fn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function dh(t,e,n){const r=J(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Us(o))throw o;$(Dd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function tg(t,e,n){const r=J(t);let s=Y.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const m=J(u),g=m.xs.get(f);return g!==void 0?L.resolve(m.Ms.get(g)):m.Pi.getTargetData(h,f)}(r,o,en(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Y.min(),n?i:ne())).next(l=>(P2(r,fS(e),l),{documents:l,Qs:i})))}function P2(t,e,n){let r=t.Os.get(e)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class ng{constructor(){this.activeTargetIds=_S()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N2{constructor(){this.Mo=new ng,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ng,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="ConnectivityMonitor";class sg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(rg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(rg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua=null;function fh(){return ua===null?ua=function(){return 268435456+Math.round(2147483648*Math.random())}():ua++,"0x"+ua.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu="RestConnection",V2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===sl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=fh(),l=this.zo(e,n.toUriEncodedString());$(Qu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:h}=new URL(l),f=gd(h);return this.Jo(e,l,u,r,f).then(m=>($(Qu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw As(Qu,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=V2[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class M2 extends D2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=fh();return new Promise((l,u)=>{const h=new a_;h.setWithCredentials(!0),h.listenOnce(l_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case xa.NO_ERROR:const m=h.getResponseJson();$(Ze,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case xa.TIMEOUT:$(Ze,`RPC '${e}' ${o} timed out`),u(new H(j.DEADLINE_EXCEEDED,"Request time out"));break;case xa.HTTP_ERROR:const g=h.getStatus();if($(Ze,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const R=C==null?void 0:C.error;if(R&&R.status&&R.message){const P=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(w)>=0?w:j.UNKNOWN}(R.status);u(new H(P,R.message))}else u(new H(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new H(j.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{$(Ze,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);$(Ze,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",f,r,15)})}T_(e,n,r){const s=fh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=h_(),l=c_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");$(Ze,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.I_(m);let g=!1,C=!1;const R=new b2({Yo:D=>{C?$(Ze,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(g||($(Ze,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),$(Ze,`RPC '${e}' stream ${s} sending:`,D),m.send(D))},Zo:()=>m.close()}),P=(D,_,w)=>{D.listen(_,T=>{try{w(T)}catch(N){setTimeout(()=>{throw N},0)}})};return P(m,_i.EventType.OPEN,()=>{C||($(Ze,`RPC '${e}' stream ${s} transport opened.`),R.o_())}),P(m,_i.EventType.CLOSE,()=>{C||(C=!0,$(Ze,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(m))}),P(m,_i.EventType.ERROR,D=>{C||(C=!0,As(Ze,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),R.a_(new H(j.UNAVAILABLE,"The operation could not be completed")))}),P(m,_i.EventType.MESSAGE,D=>{var _;if(!C){const w=D.data[0];oe(!!w,16349);const T=w,N=(T==null?void 0:T.error)||((_=T[0])==null?void 0:_.error);if(N){$(Ze,`RPC '${e}' stream ${s} received error:`,N);const O=N.status;let z=function(x){const S=Pe[x];if(S!==void 0)return W_(S)}(O),E=N.message;z===void 0&&(z=j.INTERNAL,E="Unknown error status: "+O+" with message "+N.message),C=!0,R.a_(new H(z,E)),m.close()}else $(Ze,`RPC '${e}' stream ${s} received:`,w),R.u_(w)}}),P(l,u_.STAT_EVENT,D=>{D.stat===eh.PROXY?$(Ze,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===eh.NOPROXY&&$(Ze,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Gu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){return new FS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="PersistentStream";class a0{constructor(e,n,r,s,i,o,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new o0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(wn(n.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new H(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(ig,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(ig,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j2 extends a0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=BS(this.serializer,e),r=function(i){if(!("targetChange"in i))return Y.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?nn(o.readTime):Y.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=hh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=ih(u)?{documents:qS(i,u)}:{query:WS(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=K_(i,o.resumeToken);const h=lh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=ul(i,o.snapshotVersion.toTimestamp());const h=lh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=GS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=hh(this.serializer),n.removeTarget=e,this.q_(n)}}class L2 extends a0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=HS(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=hh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$S(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{}class F2 extends O2{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,uh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(j.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,uh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class z2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wn(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="RemoteStore";class U2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Br(this)&&($(jr,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await To(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Bl(h)}(this))})}),this.Ra=new z2(r,s)}}async function Bl(t){if(Br(t))for(const e of t.da)await e(!0)}async function To(t){for(const e of t.da)await e(!1)}function l0(t,e){const n=J(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ld(n)?jd(n):Bs(n).O_()&&Md(n,e))}function bd(t,e){const n=J(t),r=Bs(n);n.Ia.delete(e),r.O_()&&u0(n,e),n.Ia.size===0&&(r.O_()?r.L_():Br(n)&&n.Ra.set("Unknown"))}function Md(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bs(t).Y_(e)}function u0(t,e){t.Va.Ue(e),Bs(t).Z_(e)}function jd(t){t.Va=new MS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Bs(t).start(),t.Ra.ua()}function Ld(t){return Br(t)&&!Bs(t).x_()&&t.Ia.size>0}function Br(t){return J(t).Ea.size===0}function c0(t){t.Va=void 0}async function B2(t){t.Ra.set("Online")}async function $2(t){t.Ia.forEach((e,n)=>{Md(t,e)})}async function H2(t,e){c0(t),Ld(t)?(t.Ra.ha(e),jd(t)):t.Ra.set("Unknown")}async function q2(t,e,n){if(t.Ra.set("Online"),e instanceof G_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){$(jr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hl(t,r)}else if(e instanceof Ca?t.Va.Ze(e):e instanceof Q_?t.Va.st(e):t.Va.tt(e),!n.isEqual(Y.min()))try{const r=await i0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(Ke.EMPTY_BYTE_STRING,f.snapshotVersion)),u0(i,u);const m=new Fn(f.target,u,h,f.sequenceNumber);Md(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){$(jr,"Failed to raise snapshot:",r),await hl(t,r)}}async function hl(t,e,n){if(!Us(e))throw e;t.Ea.add(1),await To(t),t.Ra.set("Offline"),n||(n=()=>i0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(jr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bl(t)})}function h0(t,e){return e().catch(n=>hl(t,n,e))}async function $l(t){const e=J(t),n=ir(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wd;for(;W2(e);)try{const s=await A2(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Q2(e,s)}catch(s){await hl(e,s)}d0(e)&&f0(e)}function W2(t){return Br(t)&&t.Ta.length<10}function Q2(t,e){t.Ta.push(e);const n=ir(t);n.O_()&&n.X_&&n.ea(e.mutations)}function d0(t){return Br(t)&&!ir(t).x_()&&t.Ta.length>0}function f0(t){ir(t).start()}async function G2(t){ir(t).ra()}async function K2(t){const e=ir(t);for(const n of t.Ta)e.ea(n.mutations)}async function X2(t,e,n){const r=t.Ta.shift(),s=Ad.from(r,e,n);await h0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $l(t)}async function Y2(t,e){e&&ir(t).X_&&await async function(r,s){if(function(o){return VS(o)&&o!==j.ABORTED}(s.code)){const i=r.Ta.shift();ir(r).B_(),await h0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $l(r)}}(t,e),d0(t)&&f0(t)}async function og(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),$(jr,"RemoteStore received new credentials");const r=Br(n);n.Ea.add(3),await To(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bl(n)}async function J2(t,e){const n=J(t);e?(n.Ea.delete(2),await Bl(n)):e||(n.Ea.add(2),await To(n),n.Ra.set("Unknown"))}function Bs(t){return t.ma||(t.ma=function(n,r,s){const i=J(n);return i.sa(),new j2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:B2.bind(null,t),t_:$2.bind(null,t),r_:H2.bind(null,t),H_:q2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Ld(t)?jd(t):t.Ra.set("Unknown")):(await t.ma.stop(),c0(t))})),t.ma}function ir(t){return t.fa||(t.fa=function(n,r,s){const i=J(n);return i.sa(),new L2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:G2.bind(null,t),r_:Y2.bind(null,t),ta:K2.bind(null,t),na:X2.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $l(t)):(await t.fa.stop(),t.Ta.length>0&&($(jr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Od(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fd(t,e){if(wn("AsyncQueue",`${e}: ${t}`),Us(t))return new H(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{static emptySet(e){return new vs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=wi(),this.sortedSet=new Te(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.ga=new Te(Q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):K(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Vs{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Vs(e,n,vs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class eC{constructor(){this.queries=lg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=lg(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new H(j.ABORTED,"Firestore shutting down"))}}function lg(){return new Ur(t=>D_(t),jl)}async function tC(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Z2,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Fd(o,`Initialization of query '${Xr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&zd(n)}async function nC(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rC(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&zd(n)}function sC(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function zd(t){t.Ca.forEach(e=>{e.next()})}var ph,ug;(ug=ph||(ph={})).Ma="default",ug.Cache="cache";class iC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Vs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ph.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.key=e}}class m0{constructor(e){this.key=e}}class oC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ne(),this.mutatedKeys=ne(),this.eu=b_(e),this.tu=new vs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ag,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),C=Ll(this.query,m)?m:null,R=!!g&&this.mutatedKeys.has(g.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let D=!1;g&&C?g.data.isEqual(C.data)?R!==P&&(r.track({type:3,doc:C}),D=!0):this.su(g,C)||(r.track({type:2,doc:C}),D=!0,(u&&this.eu(C,u)>0||h&&this.eu(C,h)<0)&&(l=!0)):!g&&C?(r.track({type:0,doc:C}),D=!0):g&&!C&&(r.track({type:1,doc:g}),D=!0,(u||h)&&(l=!0)),D&&(C?(o=o.add(C),i=P?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(C,R){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:D})}};return P(C)-P(R)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Vs(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ag,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ne(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new m0(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new p0(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ud="SyncEngine";class aC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lC{constructor(e){this.key=e,this.hu=!1}}class uC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ur(l=>D_(l),jl),this.Iu=new Map,this.Eu=new Set,this.du=new Te(Q.comparator),this.Au=new Map,this.Ru=new Nd,this.Vu={},this.mu=new Map,this.fu=ks.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cC(t,e,n=!0){const r=E0(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await g0(r,e,n,!0),s}async function hC(t,e){const n=E0(t);await g0(n,e,!0,!1)}async function g0(t,e,n,r){const s=await R2(t.localStore,en(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await dC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&l0(t.remoteStore,s),l}async function dC(t,e,n,r,s){t.pu=(m,g,C)=>async function(P,D,_,w){let T=D.view.ru(_);T.Cs&&(T=await tg(P.localStore,D.query,!1).then(({documents:E})=>D.view.ru(E,T)));const N=w&&w.targetChanges.get(D.targetId),O=w&&w.targetMismatches.get(D.targetId)!=null,z=D.view.applyChanges(T,P.isPrimaryClient,N,O);return hg(P,D.targetId,z.au),z.snapshot}(t,m,g,C);const i=await tg(t.localStore,e,!0),o=new oC(e,i.Qs),l=o.ru(i.documents),u=xo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);hg(t,n,h.au);const f=new aC(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function fC(t,e,n){const r=J(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!jl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&bd(r.remoteStore,s.targetId),mh(r,s.targetId)}).catch(zs)):(mh(r,s.targetId),await dh(r.localStore,s.targetId,!0))}async function pC(t,e){const n=J(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bd(n.remoteStore,r.targetId))}async function mC(t,e,n){const r=xC(t);try{const s=await function(o,l){const u=J(o),h=me.now(),f=l.reduce((C,R)=>C.add(R.key),ne());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=En(),P=ne();return u.Ns.getEntries(C,f).next(D=>{R=D,R.forEach((_,w)=>{w.isValidDocument()||(P=P.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,R)).next(D=>{m=D;const _=[];for(const w of l){const T=AS(w,m.get(w.key).overlayedDocument);T!=null&&_.push(new hr(w.key,T,S_(T.value.mapValue),tn.exists(!0)))}return u.mutationQueue.addMutationBatch(C,h,_,l)}).next(D=>{g=D;const _=D.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(C,D.batchId,_)})}).then(()=>({batchId:g.batchId,changes:j_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Te(te)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await Io(r,s.changes),await $l(r.remoteStore)}catch(s){const i=Fd(s,"Failed to persist write");n.reject(i)}}async function y0(t,e){const n=J(t);try{const r=await S2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))}),await Io(n,r,e)}catch(r){await zs(r)}}function cg(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=J(o);u.onlineState=l;let h=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(l)&&(h=!0)}),h&&zd(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gC(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Te(Q.comparator);o=o.insert(i,nt.newNoDocument(i,Y.min()));const l=ne().add(i),u=new zl(Y.min(),new Map,new Te(te),o,l);await y0(r,u),r.du=r.du.remove(i),r.Au.delete(e),Bd(r)}else await dh(r.localStore,e,!1).then(()=>mh(r,e,n)).catch(zs)}async function yC(t,e){const n=J(t),r=e.batch.batchId;try{const s=await I2(n.localStore,e);_0(n,r,null),v0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Io(n,s)}catch(s){await zs(s)}}async function vC(t,e,n){const r=J(t);try{const s=await function(o,l){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(oe(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);_0(r,e,n),v0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Io(r,s)}catch(s){await zs(s)}}function v0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function _0(t,e,n){const r=J(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function mh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||w0(t,r)})}function w0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Bd(t))}function hg(t,e,n){for(const r of n)r instanceof p0?(t.Ru.addReference(r.key,e),_C(t,r)):r instanceof m0?($(Ud,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||w0(t,r.key)):K(19791,{wu:r})}function _C(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(Ud,"New document in limbo: "+n),t.Eu.add(r),Bd(t))}function Bd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(he.fromString(e)),r=t.fu.next();t.Au.set(r,new lC(n)),t.du=t.du.insert(n,r),l0(t.remoteStore,new Fn(en(Sd(n.path)),r,"TargetPurposeLimboResolution",Dl.ce))}}async function Io(t,e,n){const r=J(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Vd.As(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,h){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(h,g=>L.forEach(g.Es,C=>f.persistence.referenceDelegate.addReference(m,g.targetId,C)).next(()=>L.forEach(g.ds,C=>f.persistence.referenceDelegate.removeReference(m,g.targetId,C)))))}catch(m){if(!Us(m))throw m;$(Dd,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const C=f.Ms.get(g),R=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(R);f.Ms=f.Ms.insert(g,P)}}}(r.localStore,i))}async function wC(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){$(Ud,"User change. New user:",e.toKey());const r=await s0(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new H(j.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Io(n,r.Ls)}}function EC(t,e){const n=J(t),r=n.Au.get(e);if(r&&r.hu)return ne().add(r.key);{let s=ne();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function E0(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gC.bind(null,e),e.Pu.H_=rC.bind(null,e.eventManager),e.Pu.yu=sC.bind(null,e.eventManager),e}function xC(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vC.bind(null,e),e}class dl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ul(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return T2(this.persistence,new w2,e.initialUser,this.serializer)}Cu(e){return new r0(kd.mi,this.serializer)}Du(e){return new N2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dl.provider={build:()=>new dl};class TC extends dl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof cl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new i2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ft.withCacheSize(this.cacheSizeBytes):ft.DEFAULT;return new r0(r=>cl.mi(r,n),this.serializer)}}class gh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wC.bind(null,this.syncEngine),await J2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eC}()}createDatastore(e){const n=Ul(e.databaseInfo.databaseId),r=function(i){return new M2(i)}(e.databaseInfo);return function(i,o,l,u){return new F2(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new U2(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>cg(this.syncEngine,n,0),function(){return sg.v()?new sg:new k2}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,f){const m=new uC(s,i,o,l,u,h);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);$(jr,"RemoteStore shutting down."),i.Ea.add(5),await To(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}gh.provider={build:()=>new gh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="FirestoreClient";class SC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=et.UNAUTHENTICATED,this.clientId=_d.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{$(or,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(or,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ku(t,e){t.asyncQueue.verifyOperationInProgress(),$(or,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await s0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CC(t);$(or,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>og(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>og(e.remoteStore,s)),t._onlineComponents=e}async function CC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(or,"Using user provided OfflineComponentProvider");try{await Ku(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await Ku(t,new dl)}}else $(or,"Using default OfflineComponentProvider"),await Ku(t,new TC(void 0));return t._offlineComponents}async function x0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(or,"Using user provided OnlineComponentProvider"),await dg(t,t._uninitializedComponentsProvider._online)):($(or,"Using default OnlineComponentProvider"),await dg(t,new gh))),t._onlineComponents}function AC(t){return x0(t).then(e=>e.syncEngine)}async function fg(t){const e=await x0(t),n=e.eventManager;return n.onListen=cC.bind(null,e.syncEngine),n.onUnlisten=fC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pC.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="firestore.googleapis.com",mg=!0;class gg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=I0,this.ssl=mg}else this.host=e.host,this.ssl=e.ssl??mg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=n0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r2)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NI;switch(r.type){case"firstParty":return new bI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pg.get(n);r&&($("ComponentProvider","Removing Datastore"),pg.delete(n),r.terminate())}(this),Promise.resolve()}}function RC(t,e,n,r={}){var h;t=Rr(t,Hl);const s=gd(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(rT(`https://${l}`),aT("Firestore",!0)),i.host!==I0&&i.host!==l&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!el(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=et.MOCK_USER;else{f=sT(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new H(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new et(g)}t._authCredentials=new kI(new f_(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class De{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new De(this.firestore,e,this._key)}toJSON(){return{type:De._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_o(n,De._jsonSchema))return new De(e,r||null,new Q(he.fromString(n.referencePath)))}}De._jsonSchemaVersion="firestore/documentReference/1.0",De._jsonSchema={type:Ve("string",De._jsonSchemaVersion),referencePath:Ve("string")};class Jn extends $s{constructor(e,n,r){super(e,n,Sd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new De(this.firestore,null,new Q(e))}withConverter(e){return new Jn(this.firestore,e,this._path)}}function yh(t,e,...n){if(t=on(t),p_("collection","path",e),t instanceof Hl){const r=he.fromString(e,...n);return Rm(r),new Jn(t,null,r)}{if(!(t instanceof De||t instanceof Jn))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return Rm(r),new Jn(t.firestore,null,r)}}function S0(t,e,...n){if(t=on(t),arguments.length===1&&(e=_d.newId()),p_("doc","path",e),t instanceof Hl){const r=he.fromString(e,...n);return Am(r),new De(t,null,new Q(r))}{if(!(t instanceof De||t instanceof Jn))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return Am(r),new De(t.firestore,t instanceof Jn?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="AsyncQueue";class vg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new o0(this,"async_queue_retry"),this._c=()=>{const r=Gu();r&&$(yg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Gu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ar;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Us(e))throw e;$(yg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,wn("INTERNAL UNHANDLED ERROR: ",_g(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Od.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&K(47125,{Pc:_g(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _g(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ho extends Hl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vg(e),this._firestoreClient=void 0,await e}}}function PC(t,e){const n=typeof t=="object"?t:yI(),r=typeof t=="string"?t:sl,s=dI(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=tT("firestore");i&&RC(s,...i)}return s}function C0(t){if(t._terminated)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NC(t),t._firestoreClient}function NC(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,h,f){return new YI(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,T0(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new SC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kt(Ke.fromBase64String(e))}catch(n){throw new H(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kt(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_o(e,kt._jsonSchema))return kt.fromBase64String(e.bytes)}}kt._jsonSchemaVersion="firestore/bytes/1.0",kt._jsonSchema={type:Ve("string",kt._jsonSchemaVersion),bytes:Ve("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rn._jsonSchemaVersion}}static fromJSON(e){if(_o(e,rn._jsonSchema))return new rn(e.latitude,e.longitude)}}rn._jsonSchemaVersion="firestore/geoPoint/1.0",rn._jsonSchema={type:Ve("string",rn._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:sn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_o(e,sn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new sn(e.vectorValues);throw new H(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sn._jsonSchemaVersion="firestore/vectorValue/1.0",sn._jsonSchema={type:Ve("string",sn._jsonSchemaVersion),vectorValues:Ve("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^__.*__$/;class VC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eo(e,this.data,n,this.fieldTransforms)}}class A0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function R0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:t})}}class $d{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $d({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return fl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(R0(this.Ac)&&kC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ul(e)}Cc(e,n,r,s=!1){return new $d({Ac:e,methodName:n,Dc:r,path:We.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hd(t){const e=t._freezeSettings(),n=Ul(t._databaseId);return new DC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bC(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Wd("Data must be an object, but it was:",o,r);const l=P0(r,o);let u,h;if(i.merge)u=new It(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=vh(e,m,n);if(!o.contains(g))throw new H(j.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);k0(f,g)||f.push(g)}u=new It(f),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new VC(new mt(l),u,h)}class Ql extends Wl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ql}}class qd extends Wl{_toFieldTransform(e){return new TS(e.path,new lo)}isEqual(e){return e instanceof qd}}function MC(t,e,n,r){const s=t.Cc(1,e,n);Wd("Data must be an object, but it was:",s,r);const i=[],o=mt.empty();cr(r,(u,h)=>{const f=Qd(e,u,n);h=on(h);const m=s.yc(f);if(h instanceof Ql)i.push(f);else{const g=So(h,m);g!=null&&(i.push(f),o.set(f,g))}});const l=new It(i);return new A0(o,l,s.fieldTransforms)}function jC(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[vh(e,r,n)],u=[s];if(i.length%2!=0)throw new H(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(vh(e,i[g])),u.push(i[g+1]);const h=[],f=mt.empty();for(let g=l.length-1;g>=0;--g)if(!k0(h,l[g])){const C=l[g];let R=u[g];R=on(R);const P=o.yc(C);if(R instanceof Ql)h.push(C);else{const D=So(R,P);D!=null&&(h.push(C),f.set(C,D))}}const m=new It(h);return new A0(f,m,o.fieldTransforms)}function LC(t,e,n,r=!1){return So(n,t.Cc(r?4:3,e))}function So(t,e){if(N0(t=on(t)))return Wd("Unsupported field value:",e,t),P0(t,e);if(t instanceof Wl)return function(r,s){if(!R0(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=So(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=me.fromDate(r);return{timestampValue:ul(s.serializer,i)}}if(r instanceof me){const i=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ul(s.serializer,i)}}if(r instanceof rn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kt)return{bytesValue:K_(s.serializer,r._byteString)};if(r instanceof De){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof sn)return function(o,l){return{mapValue:{fields:{[T_]:{stringValue:I_},[il]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Cd(l.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Vl(r)}`)}(t,e)}function P0(t,e){const n={};return y_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cr(t,(r,s)=>{const i=So(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function N0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof rn||t instanceof kt||t instanceof De||t instanceof Wl||t instanceof sn)}function Wd(t,e,n){if(!N0(n)||!m_(n)){const r=Vl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function vh(t,e,n){if((e=on(e))instanceof ql)return e._internalPath;if(typeof e=="string")return Qd(t,e);throw fl("Field path arguments must be of type string or ",t,!1,void 0,n)}const OC=new RegExp("[~\\*/\\[\\]]");function Qd(t,e,n){if(e.search(OC)>=0)throw fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ql(...e.split("."))._internalPath}catch{throw fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new H(j.INVALID_ARGUMENT,l+t+u)}function k0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(D0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FC extends V0{data(){return super.data()}}function D0(t,e){return typeof e=="string"?Qd(t,e):e instanceof ql?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gd{}class UC extends Gd{}function BC(t,e,...n){let r=[];e instanceof Gd&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Xd).length,l=i.filter(u=>u instanceof Kd).length;if(o>1||o>0&&l>0)throw new H(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Kd extends UC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kd(e,n,r)}_apply(e){const n=this._parse(e);return b0(e._query,n),new $s(e.firestore,e.converter,oh(e._query,n))}_parse(e){const n=Hd(e.firestore);return function(i,o,l,u,h,f,m){let g;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new H(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){xg(m,f);const R=[];for(const P of m)R.push(Eg(u,i,P));g={arrayValue:{values:R}}}else g=Eg(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||xg(m,f),g=LC(l,o,m,f==="in"||f==="not-in");return ke.create(h,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Xd extends Gd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ht.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)b0(o,u),o=oh(o,u)}(e._query,n),new $s(e.firestore,e.converter,oh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Eg(t,e,n){if(typeof(n=on(n))=="string"){if(n==="")throw new H(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V_(e)&&n.indexOf("/")!==-1)throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(he.fromString(n));if(!Q.isDocumentKey(r))throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jm(t,new Q(r))}if(n instanceof De)return jm(t,n._key);throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vl(n)}.`)}function xg(t,e){if(!Array.isArray(t)||t.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b0(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $C{convertValue(e,n="none"){switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[il].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ae(o.doubleValue));return new sn(n)}convertGeoPoint(e){return new rn(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ml(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(io(e));default:return null}}convertTimestamp(e){const n=nr(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=he.fromString(e);oe(t0(r),9688,{name:e});const s=new oo(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||wn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class xi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pr extends V0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Aa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(D0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Pr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Pr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pr._jsonSchema={type:Ve("string",Pr._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class Aa extends Pr{data(e={}){return super.data(e)}}class _s{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new xi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Aa(this._firestore,this._userDataWriter,r.key,r,new xi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Aa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new xi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Aa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new xi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:qC(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_s._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_d.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:Ve("string",_s._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class M0 extends $C{constructor(e){super(),this.firestore=e}convertBytes(e){return new kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,n)}}function WC(t,e,n,...r){t=Rr(t,De);const s=Rr(t.firestore,ho),i=Hd(s);let o;return o=typeof(e=on(e))=="string"||e instanceof ql?jC(i,"updateDoc",t._key,e,n,r):MC(i,"updateDoc",t._key,e),L0(s,[o.toMutation(t._key,tn.exists(!0))])}function j0(t,e){const n=Rr(t.firestore,ho),r=S0(t),s=HC(t.converter,e);return L0(n,[bC(Hd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function QC(t,...e){var u,h,f;t=on(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||wg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wg(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let i,o,l;if(t instanceof De)o=Rr(t.firestore,ho),l=Sd(t._key.path),i={next:m=>{e[r]&&e[r](GC(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Rr(t,$s);o=Rr(m.firestore,ho),l=m._query;const g=new M0(o);i={next:C=>{e[r]&&e[r](new _s(o,g,m,C))},error:e[r+1],complete:e[r+2]},zC(t._query)}return function(g,C,R,P){const D=new IC(P),_=new iC(C,D,R);return g.asyncQueue.enqueueAndForget(async()=>tC(await fg(g),_)),()=>{D.Nu(),g.asyncQueue.enqueueAndForget(async()=>nC(await fg(g),_))}}(C0(o),l,s,i)}function L0(t,e){return function(r,s){const i=new Ar;return r.asyncQueue.enqueueAndForget(async()=>mC(await AC(r),s,i)),i.promise}(C0(t),e)}function GC(t,e,n){const r=n.docs.get(e._key),s=new M0(t);return new Pr(t,s,e._key,r,new xi(n.hasPendingWrites,n.fromCache),e.converter)}function O0(){return new qd("serverTimestamp")}(function(e,n=!0){(function(s){Fs=s})(gI),nl(new no("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ho(new VI(r.getProvider("auth-internal")),new MI(o,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(h.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ys(Tm,Im,e),ys(Tm,Im,"esm2020")})();const KC={apiKey:"MOCK_API_KEY_12345",authDomain:"mock-project-incois.firebaseapp.com",projectId:"mock-incois-id",storageBucket:"mock-incois-id.appspot.com",messagingSenderId:"1234567890",appId:"1:1234567890:web:mockwebid"},XC="local-dev-incois-id",YC=typeof __app_id<"u"?__app_id:XC,Xu=typeof __firebase_config<"u"?JSON.parse(__firebase_config):KC,Yu=`artifacts/${YC}/public/data/hazardReports`,JC=[{id:1,source:"X/Twitter",urgency:"HIGH",sentiment:.85,message:"Massive wave observed near Visakhapatnam port! Flooding has started. #Vizag #Cyclone",location:{lat:17.69,lng:83.21},type:"Flooding/Swell",misinformation:!1},{id:2,source:"Google Alert/News",urgency:"LOW",sentiment:.2,message:"Weather advisory update: Heavy rain expected next week. Normal high tide.",location:{lat:18.97,lng:72.82},type:"Weather/Tide",misinformation:!1},{id:3,source:"Public Post",urgency:"CRITICAL",sentiment:.95,message:"EMERGENCY! Heard on WhatsApp that a Tsunami is coming! Evacuate immediately! #TsunamiRumor",location:{lat:10.82,lng:79.84},type:"Rumor",misinformation:!0}],Ju=[{id:"r1",persistentMockId:"user_coastalguard",reporterRole:"Coastal Guard",status:"received",hazardType:"flooding",description:"Immediate heavy sea ingression, 1m water on road.",location:{lat:17.71,lng:83.27,name:"Visakhapatnam Port"},mediaFiles:[],date:"9/28/2025"},{id:"r2",persistentMockId:"user_resident",reporterRole:"Coastal Resident",status:"received",hazardType:"erosion",description:"Large section of beach wall collapsed.",location:{lat:17.7,lng:83.25,name:"Visakhapatnam Port"},mediaFiles:[],date:"9/28/2025"},{id:"r3",persistentMockId:"user_resident",reporterRole:"Coastal Resident",status:"review",hazardType:"others",extraHazardType:"Tsunami Warning",description:"Unusual rapid receding tide near harbor.",location:{lat:17.72,lng:83.28,name:"Visakhapatnam Port"},mediaFiles:[],date:"9/28/2025"},{id:"r4",persistentMockId:"user_coastalguard",reporterRole:"Coastal Guard",status:"verified",hazardType:"flooding",description:"Verified 1.5m high waves impacting shoreline.",location:{lat:17.7,lng:83.26,name:"Visakhapatnam Port"},mediaFiles:[],date:"9/27/2025"},{id:"r5",persistentMockId:"user_volunteer",reporterRole:"General Volunteer",status:"false",hazardType:"pollution",description:"Minor debris sighted.",location:{lat:17.73,lng:83.24,name:"Visakhapatnam Port"},mediaFiles:[],date:"9/26/2025"},{id:"r6",persistentMockId:"user_coastalguard",reporterRole:"Coastal Guard",status:"received",hazardType:"erosion",description:"Heavy dunes washing away. Access compromised.",location:{lat:19.8,lng:85.83,name:"Puri Beach"},mediaFiles:[],date:"9/28/2025"},{id:"r7",persistentMockId:"user_resident",reporterRole:"Coastal Resident",status:"review",hazardType:"flooding",description:"Water approaching main road.",location:{lat:19.81,lng:85.84,name:"Puri Beach Road"},mediaFiles:[],date:"9/28/2025"},{id:"r8",persistentMockId:"user_volunteer",reporterRole:"General Volunteer",status:"received",hazardType:"others",extraHazardType:"Beach Closure",description:"Local police closing access.",location:{lat:19.79,lng:85.82,name:"Puri Beach South"},mediaFiles:[],date:"9/27/2025"},{id:"r9",persistentMockId:"admin_test_1",reporterRole:"Administrator",status:"received",hazardType:"pollution",description:"Confirmed minor oil slick near dock 3.",location:{lat:18.96,lng:72.85,name:"Mumbai Port"},mediaFiles:[],date:"9/28/2025"},{id:"r10",persistentMockId:"user_resident",reporterRole:"Coastal Resident",status:"verified",hazardType:"flooding",description:"Verified report from yesterday.",location:{lat:12.92,lng:74.85,name:"Mangalore"},mediaFiles:[],date:"9/26/2025"},{id:"r11",persistentMockId:"user_resident",reporterRole:"Coastal Resident",status:"received",hazardType:"erosion",description:"New report by the same resident.",location:{lat:12.93,lng:74.86,name:"Mangalore"},mediaFiles:[],date:"9/29/2025"},{id:"r12",persistentMockId:"guest_user",reporterRole:"Guest",status:"review",hazardType:"others",extraHazardType:"Navigation Hazard",description:"Floating debris sighted near channel.",location:{lat:15.29,lng:73.85,name:"Goa Coast"},mediaFiles:[],date:"9/29/2025"},{id:"r13",persistentMockId:"user_coastalguard",reporterRole:"Coastal Guard",status:"verified",hazardType:"pollution",description:"Confirmed pollution cleared.",location:{lat:16.51,lng:82.02,name:"Kakinada"},mediaFiles:[],date:"9/25/2025"},{id:"r14",persistentMockId:"user_resident",reporterRole:"Coastal Resident",status:"false",hazardType:"flooding",description:"Heavy rain, but not coastal flooding.",location:{lat:12.98,lng:80.24,name:"Chennai Suburb"},mediaFiles:[],date:"9/28/2025"},{id:"r15",persistentMockId:"user_resident",reporterRole:"Coastal Resident",status:"received",hazardType:"flooding",description:"Water level rising quickly.",location:{lat:13.06,lng:80.27,name:"Chennai Central"},mediaFiles:[],date:"9/29/2025"}],F0=M.createContext(),Co=()=>{const t=M.useContext(F0);if(!t)throw new Error("useReports must be used within a ReportsProvider");return t},ZC=({children:t})=>{const[e,n]=M.useState(Ju),[r,s]=M.useState(null),[i]=M.useState(crypto.randomUUID()),[o,l]=M.useState(!1),[u,h]=M.useState(!1),f=localStorage.getItem("mockId")||"guest_user";M.useEffect(()=>{if(Object.keys(Xu).length===0||!Xu.projectId){console.error("Firebase config is missing or invalid. Cannot initialize Firebase."),h(!0),l(!0);return}try{const _=r_(Xu),w=PC(_);s(w),l(!0)}catch(_){console.error("Firebase initialization failed:",_),h(!0),l(!0)}},[]),M.useEffect(()=>{if(r&&o&&!u){const _=BC(yh(r,Yu)),w=QC(_,T=>{const N=T.docs.map(z=>({id:z.id,...z.data()})),O=[...Ju,...N.filter(z=>!Ju.some(E=>E.id===z.id))];O.sort((z,E)=>{var S,A;const v=((S=z.timestamp)==null?void 0:S.toMillis())||0;return(((A=E.timestamp)==null?void 0:A.toMillis())||0)-v}),n(O)},T=>{console.error("Firestore snapshot error:",T)});return()=>w()}},[r,o,u]);const m=M.useCallback(async _=>{if(!r)return console.error("Submission Failed: Database (db) is not initialized."),null;const w={userId:i,persistentMockId:f,date:new Date().toLocaleString(),location:_.location,status:"received",description:_.description,hazardType:_.hazardType,extraHazardType:_.extraHazardType,mediaFiles:_.mediaFiles||[],reporterRole:_.reporterRole,timestamp:O0()};try{const T=await j0(yh(r,Yu),w);return console.log("Report successfully added with ID:",T.id),{id:T.id,...w}}catch(T){return console.error("Error adding document: ",T),null}},[r,i,f]),g=M.useCallback(async(_,w)=>{if(!r){console.error("Database not initialized for update.");return}try{const T=S0(r,Yu,_);await WC(T,{status:w})}catch(T){console.error("Error updating document: ",T)}},[r]),C=M.useCallback(()=>e.filter(_=>_.persistentMockId===f),[e,f]),R=M.useCallback(()=>e,[e]),P=M.useCallback(()=>JC,[]),D={reports:e,userId:i,isAuthReady:o,configError:u,addReport:m,updateReportStatus:g,getMyReports:C,getAllReports:R,persistentMockId:f,getSocialMediaData:P,db:r};return p.jsx(F0.Provider,{value:D,children:t})},Gl=({variant:t="default"})=>t==="login"?p.jsx("footer",{className:"bg-white/80 backdrop-blur-md border-t border-ocean-200/50 mt-16",children:p.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-4xl mb-4 float-animation",children:"🐚"}),p.jsx("h1",{className:"text-3xl font-bold ocean-bold ocean-text mb-4",children:"About the Platform (BluShell)"}),p.jsx("p",{className:"text-ocean-700 text-lg leading-relaxed max-w-3xl mx-auto",children:"BluShell is a community-driven platform dedicated to monitoring, reporting, and mitigating coastal hazards along India's coastline. Our mission is to empower citizens, researchers, and authorities to collaboratively protect marine environments and ensure the safety of coastal communities."})]})})}):t==="support"?p.jsx("footer",{className:"bg-white/80 backdrop-blur-md border-t border-ocean-200/50 mt-16",children:p.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:p.jsx("p",{className:"text-center text-ocean-600 text-lg",children:"🆘 Need help? Contact support"})})}):null,Le=({children:t,className:e="",onClick:n,hover:r=!0})=>{const s="card p-6",i=r?"cursor-pointer hover:shadow-xl":"";return p.jsx("div",{className:`${s} ${i} ${e}`,onClick:n,children:t})},eA=()=>{let t=localStorage.getItem("mockId");return t||(t=`user_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("mockId",t)),t},Tg=(t,e,n)=>{eA(),localStorage.setItem("userRole",t),t==="Field Contributor"?localStorage.setItem("selectedRole","Coastal Resident"):t==="Administrator"&&localStorage.setItem("selectedRole","INCOIS Analyst"),e(n)},tA=()=>{const t=Ls(),e=()=>{Tg("Field Contributor",t,"/contributor-role")},n=()=>{Tg("Administrator",t,"/admin-dashboard")};return p.jsxs("div",{className:"min-h-screen flex flex-col",children:[p.jsx("main",{className:"flex-1",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("div",{className:"text-6xl mb-4 wave-animation",children:"🌊"}),p.jsx("h1",{className:"text-5xl font-bold ocean-text mb-4",children:"INCOIS Hazard Platform"})]}),p.jsxs("p",{className:"text-lg text-ocean-700 max-w-3xl mx-auto leading-relaxed",children:["Developed in collaboration with the ",p.jsx("span",{className:"font-semibold text-ocean-800",children:"Indian National Centre for Ocean Information Services (INCOIS)"}),", this platform provides a unified system for reporting and monitoring coastal hazards."]})]}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:"text-3xl font-semibold text-ocean-800 text-center mb-8",children:"🎯 Select your access role to proceed"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[p.jsxs(Le,{onClick:e,className:"text-center group hover:scale-105 transition-transform duration-300 cursor-pointer",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("div",{className:"w-20 h-20 bg-ocean-gradient rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg group-hover:shadow-xl transition-all duration-300",children:p.jsx("div",{className:"text-3xl",children:"👥"})}),p.jsx("h3",{className:"text-2xl font-bold text-ocean-800 mb-3",children:"Field Contributor"}),p.jsx("p",{className:"text-ocean-600 mb-4 leading-relaxed",children:"Report incidents and contribute to coastal safety monitoring"}),p.jsxs("div",{className:"text-sm text-ocean-500 mb-6 space-y-1",children:[p.jsxs("p",{className:"flex items-center justify-center",children:[p.jsx("span",{className:"mr-2",children:"🏃‍♂️"})," General Volunteer"]}),p.jsxs("p",{className:"flex items-center justify-center",children:[p.jsx("span",{className:"mr-2",children:"🏠"})," Coastal Resident"]}),p.jsxs("p",{className:"flex items-center justify-center",children:[p.jsx("span",{className:"mr-2",children:"🛡️"})," Coastal Guard"]})]})]}),p.jsx("button",{className:"btn-primary w-full text-lg py-4",children:"Login as Field Contributor"})]}),p.jsxs(Le,{onClick:n,className:"text-center group hover:scale-105 transition-transform duration-300 cursor-pointer",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("div",{className:"w-20 h-20 bg-wave-gradient rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg group-hover:shadow-xl transition-all duration-300",children:p.jsx("div",{className:"text-3xl",children:"⚙️"})}),p.jsx("h3",{className:"text-2xl font-bold text-ocean-800 mb-3",children:"Administrator"}),p.jsx("p",{className:"text-ocean-600 mb-4 leading-relaxed",children:"Manage event status and resource updates"}),p.jsxs("div",{className:"text-sm text-ocean-500 mb-6 space-y-1",children:[p.jsxs("p",{className:"flex items-center justify-center",children:[p.jsx("span",{className:"mr-2",children:"📊"})," Event status management"]}),p.jsxs("p",{className:"flex items-center justify-center",children:[p.jsx("span",{className:"mr-2",children:"🔄"})," Resource updates"]})]})]}),p.jsx("button",{className:"btn-primary w-full text-lg py-4",children:"Login as Administrator"})]})]})]})]})}),p.jsx(Gl,{variant:"login"})]})},Yd=({showNav:t=!0})=>{const e=M.useMemo(()=>{const r=localStorage.getItem("userRole");return r==="Administrator"?"/admin-dashboard":r==="Field Contributor"?"/reports":"/"},[]),n=()=>{localStorage.removeItem("userRole"),localStorage.removeItem("mockId"),localStorage.removeItem("selectedRole"),window.location.href="/"};return p.jsx("nav",{className:"bg-white/80 backdrop-blur-md shadow-lg border-b border-ocean-200/50",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between items-center h-16",children:[p.jsx("div",{className:"flex items-center",children:p.jsxs(sa,{to:e,className:"flex items-center group",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center mr-3 overflow-hidden bg-ocean-gradient shadow-lg group-hover:shadow-xl transition-all duration-300",children:p.jsx("img",{src:"src/photos/shellLogo.jpg",alt:"BluShell Logo",className:"w-full h-full object-cover"})}),p.jsx("span",{className:"text-xl font-bold ocean-text",children:"BluShell"})]})}),t&&p.jsx("div",{className:"hidden md:block",children:p.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[p.jsx(sa,{to:e,className:"nav-link",children:"🏠 Home"}),p.jsx(sa,{to:"/reports",className:"nav-link",children:"📊 My Reports"}),p.jsx(sa,{to:"/report-hazard",className:"nav-link",children:"🚨 Report Hazard"}),p.jsx("button",{onClick:n,className:"nav-link text-red-600 hover:text-red-700 font-semibold border-l pl-4 border-gray-200",children:"🚪 Logout"}),p.jsxs("div",{className:"relative group",children:[p.jsxs("button",{className:"nav-link flex items-center",children:["🌐 Language",p.jsx("svg",{className:"ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p.jsx("div",{className:"absolute z-10 left-0 mt-2 w-32 bg-white/90 backdrop-blur-md border border-ocean-200 rounded-xl shadow-lg opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-all duration-300 pointer-events-none group-hover:pointer-events-auto group-focus-within:pointer-events-auto",children:p.jsxs("ul",{children:[p.jsx("li",{children:p.jsx("button",{className:"block w-full text-left px-4 py-2 text-ocean-700 hover:bg-ocean-100 rounded-lg mx-1 my-1 transition-colors",children:"🇺🇸 English"})}),p.jsx("li",{children:p.jsx("button",{className:"block w-full text-left px-4 py-2 text-ocean-700 hover:bg-ocean-100 rounded-lg mx-1 my-1 transition-colors",children:"🇮🇳 हिन्दी"})}),p.jsx("li",{children:p.jsx("button",{className:"block w-full text-left px-4 py-2 text-ocean-700 hover:bg-ocean-100 rounded-lg mx-1 my-1 transition-colors",children:"🇮🇳 मराठी"})})]})})]})]})})]})})})},nA=()=>{const t=Ls(),e=r=>{localStorage.setItem("selectedRole",r),t("/reports")},n=[{name:"Coastal Guard",priority:9,trust:"High trust",description:"Official coastal security personnel with highest priority access",icon:"🛡️",color:"bg-coral-gradient text-white"},{name:"Disaster Manager",priority:8,trust:"High trust",description:"Emergency management professionals with elevated priority",icon:"🚨",color:"bg-sand-gradient text-white"},{name:"General Volunteer",priority:5,trust:"High trust",description:"Community volunteers contributing to coastal safety",icon:"👥",color:"bg-ocean-gradient text-white"},{name:"Coastal Resident",priority:3,trust:"High trust",description:"Local residents with direct coastal area knowledge",icon:"🏠",color:"bg-wave-gradient text-white"}];return p.jsxs("div",{className:"min-h-screen flex flex-col",children:[p.jsx(Yd,{showNav:!0}),p.jsx("main",{className:"flex-1",children:p.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("div",{className:"text-5xl mb-4 wave-animation",children:"👥"}),p.jsx("h1",{className:"text-5xl font-bold ocean-text mb-4",children:"Field Contributor Access"}),p.jsx("p",{className:"text-lg text-ocean-600 max-w-3xl mx-auto leading-relaxed",children:"Please select your primary role. This determines the weight & priority of your reports. Your role selection helps us prioritize and validate reports based on your expertise and location."})]}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-6",children:n.map((r,s)=>p.jsxs(Le,{onClick:()=>e(r.name),className:"relative cursor-pointer hover:shadow-2xl transition-shadow duration-300",children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:"text-3xl mr-3",children:r.icon}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:r.name}),p.jsx("p",{className:"text-sm text-gray-600",children:r.trust})]})]}),p.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.color}`,children:["Priority ",r.priority]})]}),p.jsx("p",{className:"text-gray-600 mb-6",children:r.description}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"text-sm text-gray-500",children:["Report weight: ",r.priority,"/10"]}),p.jsx("button",{className:"btn-primary",children:"Select Role"})]})]},s))}),p.jsxs("div",{className:"mt-12 bg-blue-50 rounded-lg p-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"About Role Priorities"}),p.jsx("p",{className:"text-gray-600",children:"Higher priority roles receive faster processing and greater weight in our verification system. All roles are trusted contributors, but priority levels help us allocate resources effectively during critical situations."})]})]})}),p.jsx(Gl,{variant:"support"})]})},z0=({status:t,children:e})=>{const n=r=>{switch(r){case"received":return"status-badge status-received";case"review":return"status-badge status-review";case"verified":return"status-badge status-verified";case"false":return"status-badge status-false";default:return"status-badge bg-gray-100 text-gray-800"}};return p.jsx("span",{className:n(t),children:e})},Kl=({type:t,title:e,description:n,className:r=""})=>{const s=i=>{switch(i){case"advisory":return"alert-advisory";case"warning":return"alert-warning";case"information":return"alert-information";default:return"bg-gray-100 text-gray-800 border-l-4 border-gray-500"}};return p.jsxs("div",{className:`p-4 rounded-lg ${s(t)} ${r}`,children:[p.jsx("h4",{className:"font-semibold mb-1",children:e}),p.jsx("p",{className:"text-sm",children:n})]})},rA=()=>{const t=Ls(),{getMyReports:e,getAllReports:n,updateReportStatus:r,persistentMockId:s}=Co(),[i,o]=M.useState("my-reports"),[l,u]=M.useState("all"),f=localStorage.getItem("userRole")==="Administrator",m=e(),g=n();s&&s.substring(0,8);const C=[{type:"advisory",title:"Advisory: Moderate wind at Kutch region",description:"Wind speeds expected to reach 25-30 km/h over the next 24 hours. Small craft advisory in effect."},{type:"warning",title:"Warning: High wave Malabar coast region",description:"Wave heights of 3-4 meters expected. Avoid coastal activities and fishing operations."},{type:"information",title:"Information: Monsoon onset update by June 5th",description:"IMD predicts monsoon onset in Kerala by June 5th, 2024. Prepare for seasonal weather changes."}],R=_=>{switch(_){case"received":return"Received";case"review":return"Under Review";case"verified":return"Verified by INCOIS";case"false":return"False Alarm";default:return _}},P=async(_,w)=>{if(!f){console.warn("Attempted status update denied: User is not an Administrator.");return}await r(_,w)},D=i==="my-reports"?m:g.filter(_=>l==="all"||_.status===l);return p.jsxs("div",{className:"min-h-screen flex flex-col",children:[p.jsx(Yd,{showNav:!0}),p.jsx("main",{className:"flex-1",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsxs("div",{className:"text-right text-sm text-gray-500 mb-2",children:["Your Reporter ID: ",p.jsx("span",{className:"font-mono text-ocean-700",children:s})]}),p.jsx("div",{className:"mb-8",children:p.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-4",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-4xl mb-3 wave-animation",children:"📊"}),p.jsx("h1",{className:"text-4xl font-bold ocean-text mb-3",children:"Reports & Status Tracker"}),p.jsx("p",{className:"text-ocean-600 text-lg",children:"Monitor your reports and stay updated with the latest INCOIS information"})]}),p.jsx("button",{onClick:()=>t("/report-hazard"),className:"btn-primary text-lg px-8 py-4 whitespace-nowrap",children:"🚨 Report New Hazard"})]})}),p.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[p.jsxs("div",{className:"lg:col-span-2",children:[p.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:[p.jsxs("button",{onClick:()=>o("my-reports"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${i==="my-reports"?"bg-white text-ocean-500 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["My Reports (",m.length,")"]}),p.jsxs("button",{onClick:()=>o("all-reports"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${i==="all-reports"?"bg-white text-ocean-500 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All Reports (",g.length,")"]})]}),i==="all-reports"&&p.jsx("div",{className:"mb-4",children:p.jsxs("select",{value:l,onChange:_=>u(_.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[p.jsx("option",{value:"all",children:"All Status"}),p.jsx("option",{value:"received",children:"Received"}),p.jsx("option",{value:"review",children:"Under Review"}),p.jsx("option",{value:"verified",children:"Verified"}),p.jsx("option",{value:"false",children:"False Alarm"})]})}),p.jsx("div",{className:"space-y-4",children:D.length===0?p.jsx(Le,{hover:!1,children:p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"text-6xl mb-6 float-animation",children:"🌊"}),p.jsx("h3",{className:"text-2xl font-bold text-ocean-800 mb-3",children:"No reports yet"}),p.jsx("p",{className:"text-ocean-600 mb-8 text-lg",children:"Start by reporting a hazard to see it here"}),i==="my-reports"&&p.jsx("button",{onClick:()=>t("/report-hazard"),className:"btn-primary w-full max-w-sm text-lg py-4",children:"🚨 Report Your First Hazard"})]})}):D.map(_=>p.jsx(Le,{hover:!1,children:p.jsxs("div",{className:"flex items-start justify-between flex-col sm:flex-row gap-4",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[p.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:_.location.name||`${_.location.lat.toFixed(4)}, ${_.location.lng.toFixed(4)}`}),p.jsx(z0,{status:_.status,children:R(_.status)})]}),_.reporterRole&&p.jsx("span",{className:"inline-block bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded-full font-medium mr-2",children:_.reporterRole}),p.jsx("div",{className:"mb-2",children:p.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium mr-2",children:[_.hazardType==="flooding"&&"🌊 Flooding/High Water",_.hazardType==="erosion"&&"🏖️ Coastal Erosion",_.hazardType==="pollution"&&"☠️ Pollution/Spill",_.hazardType==="others"&&`⚠️ ${_.extraHazardType||"Others"}`]})}),p.jsx("p",{className:"text-gray-600 text-sm mb-2 truncate",children:_.description}),_.mediaFiles&&_.mediaFiles.length>0&&p.jsxs("div",{className:"mt-2 p-2 border border-dashed border-gray-300 rounded-lg bg-gray-50",children:[p.jsxs("p",{className:"text-xs font-semibold text-gray-700 mb-1 flex items-center",children:["📸 Media Captured (",_.mediaFiles.length,"):"]}),p.jsx("ul",{className:"text-xs text-gray-600 space-y-0.5",children:_.mediaFiles.map((w,T)=>p.jsxs("li",{className:"truncate",children:[w.name," (",(w.size/1024/1024).toFixed(2)," MB)"]},T))})]}),p.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-2",children:[p.jsx("span",{children:_.date}),i==="all-reports"&&_.persistentMockId&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"•"}),p.jsxs("span",{children:["Reporter Mock ID: ",_.persistentMockId]})]})]})]}),i==="all-reports"&&f&&p.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 items-end",children:[(_.status==="received"||_.status==="review")&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>P(_.id,"verified"),className:"bg-wave-500 text-white text-xs px-3 py-1 rounded-lg hover:bg-wave-600 transition-colors shadow-md w-full sm:w-auto",children:"✅ Verify"}),p.jsx("button",{onClick:()=>P(_.id,"false"),className:"bg-coral-500 text-white text-xs px-3 py-1 rounded-lg hover:bg-coral-600 transition-colors shadow-md w-full sm:w-auto",children:"❌ False Alarm"})]}),_.status==="verified"&&p.jsx("span",{className:"text-xs text-wave-600 font-medium p-1 border border-wave-300 rounded",children:"Verified"}),_.status==="false"&&p.jsx("span",{className:"text-xs text-coral-600 font-medium p-1 border border-coral-300 rounded",children:"Closed"})]})]})},_.id))})]}),p.jsx("div",{className:"lg:col-span-1",children:p.jsxs(Le,{children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Latest local INCOIS updates"}),p.jsx("div",{className:"space-y-4",children:C.map((_,w)=>p.jsx(Kl,{type:_.type,title:_.title,description:_.description},w))}),p.jsx("div",{className:"mt-6 pt-4 border-t",children:p.jsx("a",{href:"https://incois.gov.in/",target:"_blank",rel:"noopener noreferrer",className:"text-ocean-500 hover:text-ocean-700 text-sm font-medium",children:"View full INCOIS alerts →"})})]})})]})]})}),p.jsx(Gl,{})]})},sA=()=>{const t=Ls(),{addReport:e,userId:n,isAuthReady:r}=Co(),[s,i]=M.useState(null),[o,l]=M.useState(null),[u,h]=M.useState(""),[f,m]=M.useState([]),[g,C]=M.useState(!1),[R,P]=M.useState(!1),[D,_]=M.useState(""),[w,T]=M.useState("current"),[N,O]=M.useState(""),[z,E]=M.useState([]),[v,x]=M.useState(null),[S,A]=M.useState(""),[k,I]=M.useState(""),[Ie,jt]=M.useState(null),[dr,Tn]=M.useState(!1),[B,X]=M.useState(!1),G=(q,le="warning")=>{jt({text:q,type:le})};M.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(q=>{i({lat:q.coords.latitude,lng:q.coords.longitude})},q=>{console.error("Error getting location:",q),i({lat:19.076,lng:72.8777})})},[]),M.useEffect(()=>{r||G("Initializing services...","information")},[r]);const ce=[{id:"flooding",name:"Flooding/High Water",icon:"🌊",color:"bg-ocean-100 text-ocean-800 hover:bg-ocean-200 border-ocean-300"},{id:"erosion",name:"Coastal Erosion",icon:"🏖️",color:"bg-sand-100 text-sand-800 hover:bg-sand-200 border-sand-300"},{id:"pollution",name:"Pollution/Spill",icon:"☠️",color:"bg-coral-100 text-coral-800 hover:bg-coral-200 border-coral-300"},{id:"others",name:"Others",icon:"⚠️",color:"bg-wave-100 text-wave-800 hover:bg-wave-200 border-wave-300"}],ve=["Storm Surge","Tsunami Warning","Oil Spill","Marine Debris","Beach Closure","Navigation Hazard","Weather Alert","Not in list"],ln=q=>{l(q),q.id==="others"?P(!0):P(!1)},dt=q=>{const le=Array.from(q.target.files);m(_e=>[..._e,...le])},un=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){G("Voice input not supported in this browser","information");return}const q=window.SpeechRecognition||window.webkitSpeechRecognition,le=new q;le.continuous=!1,le.interimResults=!1,le.lang="en-US",C(!0),le.onresult=_e=>{const In=_e.results[0][0].transcript;h(wt=>wt+" "+In),C(!1)},le.onerror=()=>{C(!1),G("Voice input error. Please try manually.","warning")},le.onend=()=>{C(!1)},le.start()},it=()=>w==="current"?s:v,qt=()=>{l(null),h(""),m([]),P(!1),_(""),T("current"),x(null),O(""),E([]),A(""),I("")},Hs=async()=>{if(!r||!n){G("Please wait for initialization.","warning");return}if(!o||!it()){G("Please select hazard type and location.","warning");return}if(o.id==="others"&&!D){G("Please specify the extra hazard type.","warning");return}Tn(!0);const q=it(),le=localStorage.getItem("selectedRole")||"Guest";let _e;v!=null&&v.name?_e=v.name.trim():s&&w==="current"?_e=`${s.lat.toFixed(6)}, ${s.lng.toFixed(6)}`:_e="Unknown Location",_e.toLowerCase().startsWith("visakhapatnam")?_e="Visakhapatnam Port":_e.toLowerCase().startsWith("puri")?_e="Puri Beach":_e.toLowerCase().startsWith("mumbai")&&(_e="Mumbai Port");const In={hazardType:o.id,description:u,location:{lat:q.lat,lng:q.lng,name:_e},mediaFiles:f.map(wt=>({name:wt.name,size:wt.size})),extraHazardType:R?D:null,reporterRole:le};try{await e(In)?(G("Report Submitted!","information"),qt(),t("/reports")):G("Error submitting report. Please check the console for details.","warning")}catch(wt){console.error("Critical submission error:",wt),G("Critical error during submission. Check console for details.","warning")}finally{Tn(!1)}},$r=()=>{const q=it();return q?`https://maps.google.com/maps?q=${q.lat},${q.lng}&z=15&output=embed`:""},Ao=async()=>{if(N.trim())try{const le=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(N)}&limit=5`)).json();E(le.map(_e=>({id:_e.place_id,name:_e.display_name,lat:parseFloat(_e.lat),lng:parseFloat(_e.lon)})))}catch(q){console.error("Error searching locations:",q),G("Error searching for locations. Please try again.")}},Xl=q=>{x(q),E([]),O(q.name)},Ro=()=>{const q=parseFloat(S),le=parseFloat(k);if(isNaN(q)||isNaN(le)){G("Please enter valid coordinates");return}if(q<-90||q>90||le<-180||le>180){G("Please enter valid latitude (-90 to 90) and longitude (-180 to 180)");return}x({lat:q,lng:le,name:`${q.toFixed(6)}, ${le.toFixed(6)}`})};return p.jsxs("div",{className:"min-h-screen flex flex-col",children:[p.jsx(Yd,{showNav:!0}),p.jsx("main",{className:"flex-1",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsxs("div",{className:"mb-8 text-center",children:[p.jsx("div",{className:"text-5xl mb-4 wave-animation",children:"🌊"}),p.jsx("h1",{className:"text-4xl font-bold ocean-text mb-3",children:"Report Hazard"}),p.jsx("p",{className:"text-ocean-600 text-lg",children:"Report coastal hazards and incidents to help protect our communities"})]}),Ie&&p.jsx(Kl,{type:Ie.type==="information"?"success":"warning",title:Ie.type==="information"?"Success":"Attention",description:Ie.text,className:"mb-6"}),p.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsxs(Le,{children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Report Location"}),p.jsx("div",{className:"mb-4",children:p.jsxs("div",{className:"flex space-x-2 mb-4",children:[p.jsx("button",{onClick:()=>T("current"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${w==="current"?"bg-ocean-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"📍 Current Location"}),p.jsx("button",{onClick:()=>T("search"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${w==="search"?"bg-ocean-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"🔍 Search Location"}),p.jsx("button",{onClick:()=>T("manual"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${w==="manual"?"bg-ocean-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"📝 Manual Coordinates"})]})}),w==="current"&&p.jsx("div",{children:s?p.jsxs("div",{children:[p.jsxs("div",{className:"mb-4",children:[p.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Coordinates: ",s.lat.toFixed(6),", ",s.lng.toFixed(6)]}),p.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg overflow-hidden",children:p.jsx("iframe",{src:$r(),width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Current Location Map"})})]}),p.jsx("button",{className:"btn-primary w-full opacity-50 cursor-not-allowed",children:"📍 Quick Report → (Requires Hazard Type/Description)"})]}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-ocean-500 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Getting your location..."})]})}),w==="search"&&p.jsxs("div",{children:[p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex space-x-2 mb-3",children:[p.jsx("input",{type:"text",value:N,onChange:q=>O(q.target.value),placeholder:"Search for a location...",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-ocean-500 focus:border-transparent",onKeyPress:q=>q.key==="Enter"&&Ao()}),p.jsx("button",{onClick:Ao,className:"btn-primary px-4 py-2",children:"Search"})]}),z.length>0&&p.jsx("div",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto border p-2 rounded-lg",children:z.map(q=>p.jsxs("button",{onClick:()=>Xl(q),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[p.jsx("p",{className:"text-sm font-medium text-gray-900",children:q.name}),p.jsxs("p",{className:"text-xs text-gray-500",children:[q.lat.toFixed(4),", ",q.lng.toFixed(4)]})]},q.id))})]}),v&&p.jsxs("div",{children:[p.jsxs("div",{className:"mb-4",children:[p.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Selected: ",v.name]}),p.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg overflow-hidden",children:p.jsx("iframe",{src:$r(),width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Selected Location Map"})})]}),p.jsx("button",{className:"btn-primary w-full opacity-50 cursor-not-allowed",children:"📍 Report at Selected Location (Fill form below)"})]})]}),w==="manual"&&p.jsxs("div",{children:[p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),p.jsx("input",{type:"number",value:S,onChange:q=>A(q.target.value),placeholder:"e.g., 19.0760",step:"0.000001",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-ocean-500 focus:border-transparent"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),p.jsx("input",{type:"number",value:k,onChange:q=>I(q.target.value),placeholder:"e.g., 72.8777",step:"0.000001",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-ocean-500 focus:border-transparent"})]})]}),p.jsx("button",{onClick:Ro,className:"btn-secondary w-full mb-4",children:"Set Coordinates"})]}),v&&p.jsxs("div",{children:[p.jsxs("div",{className:"mb-4",children:[p.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Coordinates: ",v.lat.toFixed(6),", ",v.lng.toFixed(6)]}),p.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg overflow-hidden",children:p.jsx("iframe",{src:$r(),width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Manual Location Map"})})]}),p.jsx("button",{className:"btn-primary w-full opacity-50 cursor-not-allowed",children:"📍 Report at Selected Location (Fill form below)"})]})]})]}),p.jsxs(Le,{children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hazard Type"}),p.jsx("div",{className:"grid grid-cols-2 gap-3",children:ce.map(q=>p.jsxs("button",{onClick:()=>ln(q),className:`p-4 rounded-lg border-2 transition-all ${(o==null?void 0:o.id)===q.id?"border-ocean-500 bg-ocean-500 text-white":`border-gray-200 ${q.color}`}`,children:[p.jsx("div",{className:"text-2xl mb-2",children:q.icon}),p.jsx("div",{className:"text-sm font-medium",children:q.name})]},q.id))}),R&&p.jsxs("div",{className:"mt-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select specific hazard type:"}),p.jsxs("select",{value:D,onChange:q=>_(q.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[p.jsx("option",{value:"",children:"Select hazard type..."}),ve.map(q=>p.jsx("option",{value:q,children:q},q))]})]})]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs(Le,{children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Description"}),p.jsx("textarea",{value:u,onChange:q=>h(q.target.value),placeholder:"Describe the hazard in detail...",className:"w-full h-32 border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none focus:ring-2 focus:ring-ocean-500 focus:border-transparent"}),p.jsx("div",{className:"mt-3",children:p.jsxs("button",{onClick:un,disabled:g,className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${g?"bg-red-100 text-red-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[p.jsx("span",{children:g?"🔴":"🎤"}),p.jsx("span",{children:g?"Recording...":"Audio-to-text"})]})})]}),p.jsxs(Le,{children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Media Upload"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:dt,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"}),f.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Selected files:"}),f.map((q,le)=>p.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[p.jsx("span",{className:"text-sm text-gray-600",children:q.name}),p.jsx("button",{onClick:()=>m(_e=>_e.filter((In,wt)=>wt!==le)),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})]},le))]})]})]}),p.jsx(Le,{children:p.jsxs("div",{className:"space-y-4",children:[p.jsx("button",{onClick:Hs,className:"w-full btn-danger text-lg py-4",disabled:dr,children:"🚨 Report Urgent Hazard"}),p.jsx("button",{onClick:()=>t("/reports"),className:"w-full btn-secondary",children:"← Back to Recent Reports"})]})})]})]})]})}),p.jsx(Gl,{})]})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oA=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Ig=t=>{const e=oA(t);return e.charAt(0).toUpperCase()+e.slice(1)},U0=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),aA=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},u)=>M.createElement("svg",{ref:u,...lA,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:U0("lucide",s),...!i&&!aA(l)&&{"aria-hidden":"true"},...l},[...o.map(([h,f])=>M.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(t,e)=>{const n=M.forwardRef(({className:r,...s},i)=>M.createElement(uA,{ref:i,iconNode:e,className:U0(`lucide-${iA(Ig(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Ig(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],hA=st("bell",cA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],fA=st("chart-column",dA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mA=st("circle-check-big",pA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],yA=st("circle-x",gA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_A=st("clock",vA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],EA=st("file-text",wA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],TA=st("globe",xA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],SA=st("list-checks",IA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],B0=st("loader-circle",CA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],RA=st("map-pin",AA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],NA=st("map",PA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],VA=st("thumbs-down",kA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],bA=st("trending-up",DA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jA=st("triangle-alert",MA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],OA=st("user",LA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],zA=st("zap",FA),UA=({reports:t,onReportSelect:e,selectedReportId:n})=>{const{updateReportStatus:r}=Co(),s=o=>{switch(o){case"received":return"Received";case"review":return"Under Review";case"verified":return"Verified by INCOIS";case"false":return"False Alarm";default:return o}},i=async(o,l)=>{await r(o,l)};return p.jsx("div",{className:"space-y-3",children:t.length===0?p.jsx(Le,{hover:!1,children:p.jsxs("div",{className:"text-center py-8 text-gray-500",children:[p.jsx("div",{className:"text-4xl mb-3",children:"🔍"}),p.jsx("p",{className:"font-semibold",children:"No Pending Reports"}),p.jsx("p",{className:"text-sm",children:"Adjust filters or wait for new submissions."})]})}):t.map(o=>{const l=o.status==="received"||o.status==="review",u=o.id===n;return p.jsxs(Le,{onClick:()=>e(o),className:`p-4 transition-all duration-200 cursor-pointer 
                                ${u?"border-4 border-ocean-500 shadow-xl scale-[1.01]":"border border-gray-200 hover:bg-gray-50"}
                            `,children:[p.jsx("div",{className:"flex justify-between items-start mb-2",children:p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[p.jsx("h4",{className:"text-base font-semibold text-gray-900 break-words max-w-[80%]",children:o.location.name||`${o.location.lat.toFixed(4)}, ${o.location.lng.toFixed(4)}`}),p.jsx(z0,{status:o.status,children:s(o.status)})]}),p.jsxs("p",{className:"text-xs text-ocean-700 font-medium mb-1",children:["Priority Role: **",o.reporterRole||"Unknown","**"]})]})}),u?p.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-3",children:p.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[p.jsxs("p",{className:"flex items-center",children:[p.jsx(EA,{size:16,className:"inline mr-2 text-gray-500"}),p.jsx("span",{className:"font-semibold",children:"Description:"})," ",o.description||"N/A"]}),p.jsxs("p",{className:"flex items-center",children:[p.jsx(TA,{size:16,className:"inline mr-2 text-gray-500"}),p.jsx("span",{className:"font-semibold",children:"Coords:"})," ",o.location.lat.toFixed(6),", ",o.location.lng.toFixed(6)]}),p.jsxs("p",{className:"flex items-center",children:[p.jsx(_A,{size:16,className:"inline mr-2 text-gray-500"}),p.jsx("span",{className:"font-semibold",children:"Time:"})," ",o.date]}),p.jsxs("p",{className:"flex items-center",children:[p.jsx(OA,{size:16,className:"inline mr-2 text-gray-500"}),p.jsx("span",{className:"font-semibold",children:"Reporter ID:"})," ",o.persistentMockId.substring(0,8),"..."]}),o.mediaFiles&&o.mediaFiles.length>0&&p.jsxs("div",{className:"mt-2 p-2 border border-dashed border-gray-300 rounded-lg",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Media Files (Mock Metadata):"}),o.mediaFiles.map((h,f)=>p.jsxs("span",{className:"block text-xs text-green-700",children:[h.name," (",Math.round(h.size/1024)," KB)"]},f))]})]})}):p.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-3",children:o.description||"No description provided."}),l&&p.jsxs("div",{className:"flex space-x-2 pt-2 border-t border-gray-100",children:[p.jsxs("button",{onClick:h=>{h.stopPropagation(),i(o.id,"verified")},className:"btn-primary flex-1 text-xs py-2 px-3 rounded-lg shadow-md hover:shadow-lg transition-shadow bg-green-500 hover:bg-green-600 text-white",children:[p.jsx(mA,{size:14,className:"inline mr-1"})," Verify"]}),p.jsxs("button",{onClick:h=>{h.stopPropagation(),i(o.id,"false")},className:"btn-danger flex-1 text-xs py-2 px-3 rounded-lg shadow-md hover:shadow-lg transition-shadow bg-red-500 hover:bg-red-600 text-white",children:[p.jsx(yA,{size:14,className:"inline mr-1"})," False Alarm"]})]})]},o.id)})})},BA="local-dev-incois-id",$A=({adminId:t,dbInstance:e})=>{const[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(!0),[u,h]=M.useState(null),f=`artifacts/${BA}/public/data/incois_warnings`,m=async g=>{if(g.preventDefault(),!e){h({text:"Database connection failed. Cannot post warning.",type:"warning"});return}h({text:"Submitting...",type:"information"});try{await j0(yh(e,f),{title:n.trim(),message:s.trim(),verified:o,adminId:t,timestamp:O0()}),h({text:"Warning posted successfully! (Check Reports Page)",type:"success"}),r(""),i(""),setTimeout(()=>h(null),4e3)}catch(C){console.error("Error posting warning:",C),h({text:"Failed to post warning. Check console.",type:"warning"})}};return p.jsxs(Le,{className:"flex-shrink-0 border-t-4 border-purple-500",children:[p.jsxs("h3",{className:"text-xl font-bold text-purple-800 flex items-center mb-3",children:[p.jsx(hA,{size:20,className:"mr-2 text-purple-600"})," Post Official Warning"]}),u&&p.jsx(Kl,{type:u.type,title:u.type==="success"?"Success":"Action Required",description:u.text,className:"mb-4"}),p.jsxs("form",{onSubmit:m,className:"space-y-3",children:[p.jsx("input",{type:"text",value:n,onChange:g=>r(g.target.value),placeholder:"Warning Title (e.g., High Wave Alert for Odisha)",className:"w-full p-2 border border-gray-300 rounded-lg",required:!0}),p.jsx("textarea",{value:s,onChange:g=>i(g.target.value),rows:"4",placeholder:"Enter detailed message, directions, or necessary actions...",className:"w-full p-2 border border-gray-300 rounded-lg resize-none",required:!0}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center",children:[p.jsx("input",{type:"checkbox",checked:o,onChange:g=>l(g.target.checked),className:"mr-2 h-4 w-4 text-purple-600 border-gray-300 rounded"}),"Mark as **Verified** by Command Center"]}),p.jsx("button",{type:"submit",className:"py-2 px-4 bg-purple-600 text-white font-semibold rounded-xl hover:bg-purple-700 transition",disabled:!s.trim()||!n.trim(),children:"Post & Disseminate"})]})]})]})},HA=({socialData:t})=>{const e=t.length,n=t.filter(i=>i.urgency==="CRITICAL"||i.urgency==="HIGH").length,r=t.filter(i=>i.misinformation).length,s=({Icon:i,title:o,value:l,color:u})=>p.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(i,{size:20,className:`mr-2 ${u}`}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:o})]}),p.jsx("span",{className:`text-sm font-bold ${u}`,children:l})]});return p.jsxs(Le,{className:"flex-1 border-t-4 border-yellow-500 overflow-y-auto",children:[p.jsxs("h3",{className:"text-xl font-bold text-yellow-800 flex items-center mb-4",children:[p.jsx(bA,{size:20,className:"mr-2 text-yellow-600"}),"Social Media Analytics (A3)"]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(s,{Icon:fA,title:"Volume Spike",value:`${e*10}% Increase`,color:"text-red-600"}),p.jsx(s,{Icon:zA,title:"High Urgency Posts",value:`${n} Detected`,color:"text-orange-600"}),p.jsx(s,{Icon:VA,title:"Misinformation Flags",value:`${r} Critical`,color:"text-purple-600"}),p.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Recent Social Activity:"}),t.map(i=>p.jsxs("p",{className:`text-xs p-2 rounded ${i.misinformation?"bg-red-50":"bg-green-50"}`,children:["[",i.source,"] **",i.urgency,"**: ",i.message.substring(0,50),"..."]},i.id))]})]})]})},qA=({selectedReport:t,activeHotspot:e})=>{var i,o;let n,r;e?(n={lat:e.lat,lng:e.lng},r="blue"):(n=(t==null?void 0:t.location)||{lat:18.975,lng:72.8258},r=(t==null?void 0:t.status)==="verified"?"green":"red");const s=`https://maps.google.com/maps?q=${n.lat},${n.lng}&markers=color:${r}%7C${n.lat},${n.lng}&z=10&output=embed`;return p.jsxs(Le,{className:"flex-shrink-0 h-full",children:[p.jsxs("h3",{className:"text-xl font-bold text-ocean-800 mb-4 flex items-center",children:[p.jsx(RA,{size:20,className:"mr-2 text-ocean-600"}),"Live Hazard Map (A1) | Focus: ",e?e.name:t?((o=(i=t.location)==null?void 0:i.name)==null?void 0:o.substring(0,20))||"Coordinates":"India Coastline"]}),p.jsx("div",{className:"w-full h-full bg-gray-100 rounded-lg overflow-hidden relative",children:p.jsx("iframe",{src:s,width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Situational Map"})})]})},WA=[{name:"Visakhapatnam Coast",status:"CRITICAL",count:5,locationName:"Visakhapatnam Port",lat:17.7,lng:83.27,color:"bg-red-100 text-red-800 border-red-300"},{name:"Puri Beach Sector",status:"HIGH",count:3,locationName:"Puri Beach",lat:19.8,lng:85.83,color:"bg-yellow-100 text-yellow-800 border-yellow-300"},{name:"Mumbai Port Area",status:"MODERATE",count:1,locationName:"Mumbai Port",lat:18.96,lng:72.85,color:"bg-green-100 text-green-800 border-green-300"}],QA=({setCurrentRole:t,userId:e})=>{const{reports:n,getAllReports:r,getSocialMediaData:s,isAuthReady:i,db:o}=Co(),l=s(),[u,h]=M.useState("all"),[f,m]=M.useState("all"),[g,C]=M.useState(null),[R,P]=M.useState(null);if(!i)return p.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:[p.jsx(B0,{className:"animate-spin mr-3",size:32}),p.jsx("h1",{className:"text-2xl font-semibold text-gray-700",children:"Initializing Command Center..."})]});const D=M.useMemo(()=>{const N=new Set(n.map(O=>O.reporterRole).filter(Boolean));return["all",...Array.from(N).sort()]},[n]),_=M.useMemo(()=>{let N=r();if(u!=="all"&&(N=N.filter(O=>O.status===u)),f!=="all"&&(N=N.filter(O=>O.reporterRole===f)),R){const O=R.locationName.toLowerCase().trim();N=N.filter(z=>{var E,v;return(v=(E=z.location)==null?void 0:E.name)==null?void 0:v.toLowerCase().trim().includes(O)})}return N.sort((O,z)=>{var E,v;return(((E=z.timestamp)==null?void 0:E.toMillis())||0)-(((v=O.timestamp)==null?void 0:v.toMillis())||0)}),N},[r,u,f,R]);M.useEffect(()=>{R||(_.length>0&&!g&&C(_[0]),g&&!_.find(N=>N.id===g.id)&&C(null))},[_,g,R]);const w=M.useCallback(N=>{C(N),P(null)},[]),T=M.useCallback(N=>{const O=(R==null?void 0:R.name)===N.name?null:N;P(O),h("all"),m("all"),C(null)},[R]);return p.jsx("div",{className:"min-h-screen flex flex-col",children:p.jsx("main",{className:"flex-1 bg-gray-100",children:p.jsxs("div",{className:"max-w-screen-3xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[p.jsxs("header",{className:"flex justify-between items-center mb-6 pb-2 border-b",children:[p.jsxs("h1",{className:"text-3xl font-bold text-ocean-800 flex items-center",children:[p.jsx(NA,{className:"mr-3",size:28})," Command Center Dashboard"]}),p.jsx("button",{onClick:()=>{localStorage.removeItem("userRole"),localStorage.removeItem("mockId"),window.location.href="/"},className:"py-2 px-4 bg-red-600 text-white rounded-xl shadow-md hover:bg-red-700 transition",children:"Logout"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-6 h-[85vh]",children:[p.jsxs("div",{className:"flex flex-col space-y-6",children:[p.jsxs(Le,{className:"flex-shrink-0",children:[p.jsx("h3",{className:"text-xl font-bold text-ocean-800 mb-4",children:"Filtering Options"}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Status Filter (Initial Queue):"}),p.jsxs("select",{value:u,onChange:N=>h(N.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm",children:[p.jsx("option",{value:"received",children:"Received (NEW)"}),p.jsx("option",{value:"review",children:"Under Review"}),p.jsx("option",{value:"verified",children:"Verified"}),p.jsx("option",{value:"false",children:"False Alarm"}),p.jsx("option",{value:"all",children:"All Reports"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Role Filter (Priority):"}),p.jsxs("select",{value:f,onChange:N=>m(N.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm",children:[p.jsx("option",{value:"all",children:"All Roles"}),D.filter(N=>N!=="all").map(N=>p.jsx("option",{value:N,children:N},N))]})]})]}),p.jsxs(Le,{className:"flex-1 overflow-y-auto",children:[p.jsx("h3",{className:"text-xl font-bold text-ocean-800 mb-4",children:"Active Hotspots (Mock)"}),p.jsxs("div",{className:"space-y-3",children:[R&&p.jsx(Kl,{type:"information",title:`Hotspot Filter Active: ${R.name}`,description:`Queue is filtered by reports near ${R.locationName}. Click again to clear.`,className:"mb-3"}),p.jsx("p",{className:"text-sm text-gray-500 italic",children:"Click a hotspot to filter the queue below:"}),WA.map(N=>p.jsxs("button",{onClick:()=>T(N),className:`w-full text-left p-3 border rounded-lg hover:bg-opacity-80 transition-all text-sm font-semibold 
                                                ${N.color} ${(R==null?void 0:R.name)===N.name?"ring-4 ring-offset-2 ring-ocean-500":""}`,children:[p.jsx("span",{className:"mr-2",children:N.status==="CRITICAL"?"🔴":N.status==="HIGH"?"🟡":"🟢"}),N.name," (",N.count," Reports)"]},N.name))]})]})]}),p.jsxs("div",{className:"md:col-span-2 xl:col-span-2 flex flex-col space-y-6",children:[p.jsx("div",{className:"h-[65%]",children:p.jsx(qA,{selectedReport:g,activeHotspot:R})}),p.jsxs(Le,{className:"flex-1 overflow-y-auto",children:[p.jsxs("h3",{className:"text-xl font-bold text-ocean-800 mb-4",children:[p.jsx(SA,{className:"inline mr-2",size:24})," Verification Queue (Priority List)"]}),p.jsx(UA,{reports:_,onReportSelect:w,selectedReportId:g==null?void 0:g.id})]})]}),p.jsxs("div",{className:"flex flex-col space-y-6",children:[p.jsx($A,{adminId:e,dbInstance:o}),p.jsx(HA,{socialData:l})]})]})]})})})};function GA(){const t=Ls(),{isAuthReady:e,configError:n}=Co();return M.useEffect(()=>{if(e){const r=localStorage.getItem("userRole"),s=localStorage.getItem("mockId"),i=window.location.pathname;s&&r&&i==="/"?r==="Administrator"?t("/admin-dashboard",{replace:!0}):r==="Field Contributor"&&(localStorage.getItem("selectedRole")?t("/reports",{replace:!0}):t("/contributor-role",{replace:!0})):!s&&i!=="/"&&t("/",{replace:!0})}},[e,t]),n?p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-8 text-red-700 bg-red-100",children:[p.jsx(jA,{size:32,className:"mb-4"}),p.jsx("h2",{className:"text-2xl font-bold",children:"Configuration Error"}),p.jsx("p",{className:"text-center",children:"Cannot connect to Firebase. Please check your console logs or Firebase configuration settings."})]}):e?p.jsx("div",{className:"bg-gray-50",children:p.jsxs(bx,{children:[p.jsx(Gr,{path:"/",element:p.jsx(tA,{})}),p.jsx(Gr,{path:"/contributor-role",element:p.jsx(nA,{})}),p.jsx(Gr,{path:"/reports",element:p.jsx(rA,{})}),p.jsx(Gr,{path:"/report-hazard",element:p.jsx(sA,{})}),p.jsx(Gr,{path:"/admin-dashboard",element:p.jsx(QA,{})})]})}):p.jsxs("div",{className:"flex items-center justify-center min-h-screen text-xl text-gray-700",children:[p.jsx(B0,{className:"animate-spin mr-3",size:24})," Initializing Platform Services..."]})}function KA(){return p.jsx(ZC,{children:p.jsx(GA,{})})}Zu.createRoot(document.getElementById("root")).render(p.jsx(Mg.StrictMode,{children:p.jsx(Ux,{children:p.jsx(KA,{})})}));
